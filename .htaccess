Options +FollowSymLinks +MultiViews
# For "AddLanguage" directives, also see the /etc/apache2/mods-available/mime.conf file.
# We only have to add missing ones or ones we want to override.
AddLanguage ast .ast
AddLanguage az .az
AddLanguage bo .bo
AddLanguage bs .bs
AddLanguage ce .ce
# The following one is an override
AddLanguage da .da
AddLanguage en-au .en-AU
AddLanguage en-ca .en-CA
AddLanguage en-gb .en-GB
AddLanguage en-us .en
AddLanguage fi .fi
AddLanguage fo .fo
AddLanguage gl .gl-GL
AddLanguage hi .hi
AddLanguage hu .hu
AddLanguage ia .ia
AddLanguage lt .lt
AddLanguage ms .ms-MS
AddLanguage my .my
AddLanguage nb .nb
AddLanguage oc .oc
AddLanguage pl .pl-PL
AddLanguage sk .sk
AddLanguage sl .sl
AddLanguage sr .sr
AddLanguage tg .tg
AddLanguage ug .ug
AddLanguage uk .uk
AddLanguage uz .uz
AddLanguage zh-hk .zh-HK
LanguagePriority en-us
ForceLanguagePriority Prefer Fallback

# For Installation guide text files, which contain non-ASCII characters
#
AddCharset UTF-8 .txt

RedirectMatch permanent ^/(stable|lts|\d+\.\d+)/?(index\.html)?$ https://help.ubuntu.com

# handle old links after the drop of multilingual support for
# the 18.04 server guide
RedirectMatch permanent ^/18\.04/(serverguide/.+\.html)\..* /$1/$2

# Redirects for installer pages
Redirect /rst https://discourse.ubuntu.com/t/ubuntu-installation-on-computers-with-intel-r-rst-enabled/15347
Redirect /bitlocker https://discourse.ubuntu.com/t/ubuntu-installation-on-computers-running-windows-and-bitlocker-turned-on/15338

# For 20.04, and likely onwards, the serveguide has moved.
# Don't try to be too clever, just force the base page and drop the rest.
#
RedirectMatch permanent ^/(stable|lts|20\.04)/(serverguide/.+\.html)\..* https://ubuntu.com/server/docs
RedirectMatch permanent ^/(stable|lts|20\.04)/(serverguide/.+\.pdf)\..* https://assets.ubuntu.com/ubuntu-server-guide
