<!DOCTYPE html>
<html lang=hu>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Beállítás</title>
<link rel="stylesheet" type="text/css" href="hu.css">
<script type="text/javascript" src="jquery.js"></script><script type="text/javascript" src="jquery.syntax.js"></script><script type="text/javascript" src="yelp.js"></script>
</head>
<body id="home">
<script src="https://ssl.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">
        _uacct = "UA-1018242-8";
        urchinTracker();
      </script><div id="container">
<div id="container-inner">
<div id="mothership"><ul>
<li><a href="https://partners.ubuntu.com">Partners</a></li>
<li><a href="https://www.ubuntu.com/support/community-support">Support</a></li>
<li><a href="https://community.ubuntu.com">Community</a></li>
<li><a href="https://www.ubuntu.com">Ubuntu.com</a></li>
</ul></div>
<div id="header">
<h1 id="ubuntu-header"><a href="https://help.ubuntu.com/">Ubuntu Documentation</a></h1>
<ul id="main-menu">
<li><a class="main-menu-item current" href="../../">Official Documentation</a></li>
<li><a href="https://help.ubuntu.com/community/CommunityHelpWiki">Community Help Wiki</a></li>
<li><a href="https://community.ubuntu.com/t/contribute/26">Contribute</a></li>
</ul>
</div>
<div id="menu-search"><div id="search-box">
<noscript><form action="https://www.google.com/cse" id="cse-search-box"><div>
<input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq"><input type="hidden" name="ie" value="UTF-8"><input type="text" name="q" size="21"><input type="submit" name="sa" value="Search">
</div></form></noscript>
<script>
                document.write('<form action="../../search.html" id="cse-search-box">');
                document.write('  <div>');
                document.write('    <input type="hidden" name="cof" value="FORID:9">');
                document.write('    <input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq">');
                document.write('    <input type="hidden" name="ie" value="UTF-8">');
                document.write('    <input type="text" name="q" size="21">');
                document.write('    <input type="submit" name="sa" value="Search">');
                document.write('  </div>');
                document.write('</form>');
              </script>
</div></div>
<div class="trails"><div class="trail">
<a href="../../14.04" class="trail">Ubuntu 14.04</a> » <a class="trail" href="index.html" title="Ubuntu kiszolgáló kézikönyve">Ubuntu kiszolgáló kézikönyve</a> » <a class="trail" href="dns.html" title="Tartománynév-szolgáltatás (DNS)">Tartománynév-szolgáltatás (DNS)</a> » </div></div>
<div id="cwt-content" class="clearfix content-area"><div id="page">
<div id="content">
<div class="links nextlinks">
<a class="nextlinks-prev" href="dns-installation.html" title="Telepítés">Előző</a><a class="nextlinks-next" href="dns-troubleshooting.html" title="Hibaelhárítás">Következő</a>
</div>
<div class="hgroup"><h1 class="title">Beállítás</h1></div>
<div class="region">
<div class="contents">
<p class="para">A <span class="app application">BIND9</span> számos módon beállítható. A leggyakoribb konfigurációk a gyorsítótárazó névkiszolgáló, elsődleges mester és másodlagos mester.</p>
<div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
	      <p class="para">Gyorsítótárazó névkiszolgálóként használva a BIND9 megkeresi a lekérdezésekre a választ, és megjegyzi azt a tartomány következő lekéréséhez.</p>
	    </li>
<li class="list itemizedlist">
	      <p class="para">Elsődleges mesterként a BIND9 beolvassa a zóna adatait a gépen lévő fájlból, és az adott zónára irányadó lesz.</p>
	    </li>
<li class="list itemizedlist">
	      <p class="para">Másodlagos mester konfigurációban a BIND9 a zónaadatokat másik, az adott zónában mérvadó névkiszolgálótól kapja.</p>
	    </li>
</ul></div>
</div>
<div class="links sectionlinks" role="navigation"><ul>
<li class="links"><a class="xref" href="dns-configuration.html#dns-configuration-overview" title="Áttekintés">Áttekintés</a></li>
<li class="links"><a class="xref" href="dns-configuration.html#dns-caching-configuration" title="Gyorsítótárazó névkiszolgáló">Gyorsítótárazó névkiszolgáló</a></li>
<li class="links"><a class="xref" href="dns-configuration.html#dns-primarymaster-configuration" title="Elsődleges mester">Elsődleges mester</a></li>
<li class="links"><a class="xref" href="dns-configuration.html#dns-secondarymaster-configuration" title="Másodlagos mester">Másodlagos mester</a></li>
</ul></div>
<div class="sect2 sect" id="dns-configuration-overview"><div class="inner">
<div class="hgroup"><h2 class="title">Áttekintés</h2></div>
<div class="region"><div class="contents">
<p class="para">A DNS-konfigurációs fájlok az <span class="file filename">/etc/bind</span> könyvtárban találhatók. Az elsődleges konfigurációs fájl az <span class="file filename">/etc/bind/named.conf</span>.</p>
<p class="para">Az <span class="em emphasis">include</span> sor megadja a DNS-beállításokat tartalmazó fájl nevét. Az <span class="file filename">/etc/bind/named.conf.options</span> fájl <span class="em emphasis">directory</span> sora adja meg a DNS-nek, hogy hol keresse a fájlokat. A BIND által használt összes fájlt ehhez a könyvtárhoz képest keresi.</p>
<p class="para">Az <span class="file filename">/etc/bind/db.root</span> nevű fájl írja le a világszintű gyökér-névkiszolgálókat. A kiszolgálók idővel változnak, emiatt az <span class="file filename">/etc/bind/db.root</span> fájlt rendszeresen karban kell tartani. Ezt általában a <span class="app application">bind9</span> csomag frissítései végzik. A <span class="em emphasis">zone</span> szakasz egy mesterkiszolgálót definiál, és ez a <span class="em emphasis">file</span> beállításban említett fájlban kerül tárolásra.</p>
<p class="para">Ugyanaz a kiszolgáló beállítható gyorsítótárazó névkiszolgálónak, elsődleges és másodlagos mesternek is. Egy kiszolgáló lehet az egyik zóna esetén a mérvadó adatforrásrekord (SOA), míg másik zóna számára másodlagos szolgáltatást biztosíthat. Ezalatt pedig a helyi hálózat gépei számára gyorsítótárazási szolgáltatásokat nyújthat.</p>
</div></div>
</div></div>
<div class="sect2 sect" id="dns-caching-configuration"><div class="inner">
<div class="hgroup"><h2 class="title">Gyorsítótárazó névkiszolgáló</h2></div>
<div class="region"><div class="contents">
<p class="para">Az alapértelmezett konfiguráció egy gyorsítótárazó kiszolgáló beállításait tartalmazza. Egyedül az internetszolgáltató DNS-kiszolgálóinak IP-címeit kell hozzáadnia. Vegye ki megjegyzésből és szerkessze a következőket az <span class="file filename">/etc/bind/named.conf.options</span> fájlban:</p>
<div class="code"><pre class="contents ">forwarders {
                1.2.3.4;
                5.6.7.8;
           };
</pre></div>
<div class="note" title="Megjegyzés"><div class="inner"><div class="region"><div class="contents">
	    <p class="para">Az <span class="em emphasis">1.2.3.4</span> és <span class="em emphasis">5.6.7.8</span> helyére a tényleges névkiszolgálók IP-címeit írja.</p>
	  </div></div></div></div>
<p class="para">Most indítsa újra a DNS-kiszolgálót az új beállítások engedélyezéséhez. Adja ki a következő parancsot:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo service bind9 restart</span>
</pre></div>
<p class="para">A gyorsítótárazó DNS-kiszolgáló tesztelésével kapcsolatos információkért lásd a <a class="xref" href="dns-troubleshooting.html#dns-testing-dig" title="dig">dig</a> szakaszt.</p>
</div></div>
</div></div>
<div class="sect2 sect" id="dns-primarymaster-configuration"><div class="inner">
<div class="hgroup"><h2 class="title">Elsődleges mester</h2></div>
<div class="region">
<div class="contents"><p class="para">Ebben a szakaszban a <span class="app application">BIND9</span> elsődleges mesterként kerül beállításra a <span class="em emphasis">példa.hu</span> tartományhoz. A <span class="em emphasis">példa.hu</span> helyére a saját teljes képzésű tartománynevét (FQDN) írja.</p></div>
<div class="sect3 sect" id="dns-forward-zone-file"><div class="inner">
<div class="hgroup"><h3 class="title">Közvetlen zóna fájl</h3></div>
<div class="region"><div class="contents">
<p class="para">A BIND9 elsődleges mesterkiszolgálóvá tétele érdekében egy DNS-zóna BIND9-hez adásának első lépése az <span class="file filename">/etc/bind/named.conf.local</span> fájl szerkesztése:</p>
<div class="code"><pre class="contents ">zone "példa.hu" {
	type master;
        file "/etc/bind/db.példa.hu";
};
</pre></div>
<p class="para">
	      (Note, if bind will be receiving automatic updates to the file as with DDNS, then use <span class="file filename">/var/lib/bind/db.example.com</span>
	      rather than <span class="file filename">/etc/bind/db.example.com</span> both here and in the copy command below.)
	      </p>
<p class="para">Egy meglévő zónafájlt sablonként használva hozza létre az <span class="file filename">/etc/bind/db.példa.hu</span> fájlt:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo cp /etc/bind/db.local /etc/bind/db.példa.hu</span>
</pre></div>
<p class="para">
	      Edit the new zone file <span class="file filename">/etc/bind/db.example.com</span> change <span class="em emphasis">localhost.</span>
	      to the FQDN of your server, leaving the additional "." at the end. Change <span class="em emphasis">127.0.0.1</span> to the 
	      nameserver's IP Address and <span class="em emphasis">root.localhost</span> to a valid email address, but with a "." instead 
	      of the usual "@" symbol, again leaving the "." at the end. Change the comment to indicate the domain that this
	      file is for.
	      </p>
<p class="para">
	      Create an <span class="em emphasis">A record</span> for the base domain, <span class="em emphasis">example.com</span>.
	      Also, create an <span class="em emphasis">A record</span> for <span class="em emphasis">ns.example.com</span>, the name 
	      server in this example: 
	      </p>
<div class="code"><pre class="contents ">;
; BIND data file for example.com
;
$TTL    604800
@       IN      SOA     example.com. root.example.com. (
                              2         ; Serial
                         604800         ; Refresh
                          86400         ; Retry
                        2419200         ; Expire
                         604800 )       ; Negative Cache TTL
        IN      A       192.168.1.10
;
@       IN      NS      ns.example.com.
@       IN      A       192.168.1.10
@       IN      AAAA    ::1
ns      IN      A       192.168.1.10
</pre></div>
<p class="para">A <span class="em emphasis">Serial</span> értékét minden alkalommal növelnie kell, amikor módosítja a zónafájlt. Ha több változtatást hajt végre a BIND9 újraindítása előtt, akkor elég csak egyszer növelni a Serial értékét.</p>
<p class="para">Most már felveheti a DNS-rekordokat a zónafájl aljára. Részletekért lásd a <a class="xref" href="dns-references.html#dns-record-types" title="Gyakori rekordtípusok">Gyakori rekordtípusok</a> szakaszt.</p>
<div class="note" title="Megjegyzés"><div class="inner"><div class="region"><div class="contents">
	         <p class="para">
	         Many admins like to use the last date edited as the serial of a zone, such as  <span class="em emphasis">2012010100</span>
	         which is yyyymmddss (where <span class="em emphasis">ss</span> is the Serial Number)
		 </p>
	       </div></div></div></div>
<p class="para">Miután módosította a zónafájlt, a módosítások életbe léptetéséhez újra kell indítani a <span class="app application">BIND9</span>-et:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo service bind9 restart</span>
</pre></div>
</div></div>
</div></div>
<div class="sect3 sect" id="dns-reverse-zone-file"><div class="inner">
<div class="hgroup"><h3 class="title">Fordított zónafájl</h3></div>
<div class="region"><div class="contents">
<p class="para">A zóna és a nevek IP-címekké feloldásának beállítása után szükség van egy <span class="em emphasis">fordított zónára</span> is. A fordított zóna segítségével a DNS fel tudja oldani a címet névvé.</p>
<p class="para">Szerkessze az /etc/bind/named.conf.local fájlt, és vegye fel a következőket:</p>
<div class="code"><pre class="contents ">zone "1.168.192.in-addr.arpa" {
        type master;
        file "/etc/bind/db.192";
};
</pre></div>
<div class="note" title="Megjegyzés"><div class="inner"><div class="region"><div class="contents">
	        <p class="para">Az <span class="em emphasis">1.168.192</span> helyére az Ön által használt hálózat első három oktetjét írja. Ennek megfelelően nevezze el az <span class="file filename">/etc/bind/db.192</span> zónafájlt. A névnek meg kell egyeznie a hálózat első oktetjével.</p>
	      </div></div></div></div>
<p class="para">Most hozza létre az <span class="file filename">/etc/bind/db.192</span> fájlt:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo cp /etc/bind/db.127 /etc/bind/db.192</span>
</pre></div>
<p class="para">Szerkessze az <span class="file filename">/etc/bind/db.192</span> fájlt, és módosítsa ugyanazokat a beállításokat, mint az <span class="file filename">/etc/bind/db.példa.hu</span> esetén:</p>
<div class="code"><pre class="contents ">;
; BIND reverse data file for local 192.168.1.XXX net
;
$TTL    604800
@       IN      SOA     ns.example.com. root.example.com. (
                              2         ; Serial
                         604800         ; Refresh
                          86400         ; Retry
                        2419200         ; Expire
                         604800 )       ; Negative Cache TTL
;
@       IN      NS      ns.
10      IN      PTR     ns.example.com.
</pre></div>
<p class="para">
	      The <span class="em emphasis">Serial Number</span> in the Reverse zone needs to be incremented on each change as well. 
	      For each <span class="em emphasis">A record</span> you configure in <span class="file filename">/etc/bind/db.example.com</span>, that is for a different
	      address, you need to create a <span class="em emphasis">PTR record</span> in <span class="file filename">/etc/bind/db.192</span>.
	      </p>
<p class="para">A fordított zóna létrehozása után indítsa újra a <span class="app application">BIND9</span> démont:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo service bind9 restart</span>
</pre></div>
</div></div>
</div></div>
</div>
</div></div>
<div class="sect2 sect" id="dns-secondarymaster-configuration"><div class="inner">
<div class="hgroup"><h2 class="title">Másodlagos mester</h2></div>
<div class="region"><div class="contents">
<p class="para">Az <span class="em emphasis">elsődleges mester</span> beállítása után egy <span class="em emphasis">másodlagos mestert</span> is be kell állítani a tartomány elérhetőségének fenntartása érdekében, amennyiben az elsődleges mester elérhetetlenné válna.</p>
<p class="para">Első lépésként az elsődleges mester kiszolgálón engedélyezni kell a zónaátvitelt. Vegye fel az <span class="em emphasis">allow-transfer</span> beállítást a példa közvetlen és fordított zónadefiníciókba az <span class="file filename">/etc/bind/named.conf.local</span> fájlban:</p>
<div class="code"><pre class="contents ">zone "példa.hu" {
        type master;
	file "/etc/bind/db.example.com";
        allow-transfer { 192.168.1.11; };
};

zone "1.168.192.in-addr.arpa" {
        type master;
        file "/etc/bind/db.192";
	allow-transfer { 192.168.1.11; };
};
</pre></div>
<div class="note" title="Megjegyzés"><div class="inner"><div class="region"><div class="contents">
	      <p class="para">A <span class="em emphasis">192.168.1.11</span> helyére a másodlagos névkiszolgáló IP-címét írja.</p>
            </div></div></div></div>
<p class="para">Indítsa újra a <span class="app application">BIND9</span> démont az elsődleges mesteren:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo service bind9 restart</span>
</pre></div>
<p class="para">Ezután a másodlagos mesteren telepítse a <span class="app application">bind9</span> csomagot. Szerkessze az <span class="file filename">/etc/bind/named.conf.local</span> fájlt, és vegye fel a következő deklarációkat a közvetlen és fordított zónákhoz:</p>
<div class="code"><pre class="contents ">zone "példa.hu" {
	type slave;
        file "db.példa.hu";
        masters { 192.168.1.10; };
};        
      
zone "1.168.192.in-addr.arpa" {
	type slave;
        file "db.192";
        masters { 192.168.1.10; };
};
</pre></div>
<div class="note" title="Megjegyzés"><div class="inner"><div class="region"><div class="contents">
	      <p class="para">A <span class="em emphasis">192.168.1.10</span> helyére az elsődleges névkiszolgáló IP-címét írja.</p>
            </div></div></div></div>
<p class="para">Indítsa újra a <span class="app application">BIND9</span> démont a másodlagos mesteren:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo service bind9 restart</span>
</pre></div>
<p class="para">
	    In <span class="file filename">/var/log/syslog</span> you should see something similar to (some lines have been split to fit the format of this document):
	    </p>
<div class="code"><pre class="contents ">client 192.168.1.10#39448: received notify for zone '1.168.192.in-addr.arpa'
zone 1.168.192.in-addr.arpa/IN: Transfer started.
transfer of '100.18.172.in-addr.arpa/IN' from 192.168.1.10#53:
 connected using 192.168.1.11#37531
zone 1.168.192.in-addr.arpa/IN: transferred serial 5
transfer of '100.18.172.in-addr.arpa/IN' from 192.168.1.10#53:
 Transfer completed: 1 messages, 
6 records, 212 bytes, 0.002 secs (106000 bytes/sec)
zone 1.168.192.in-addr.arpa/IN: sending notifies (serial 5)

client 192.168.1.10#20329: received notify for zone 'example.com'
zone example.com/IN: Transfer started.
transfer of 'example.com/IN' from 192.168.1.10#53: connected using 192.168.1.11#38577
zone example.com/IN: transferred serial 5
transfer of 'example.com/IN' from 192.168.1.10#53: Transfer completed: 1 messages, 
8 records, 225 bytes, 0.002 secs (112500 bytes/sec)
</pre></div>
<div class="note" title="Megjegyzés"><div class="inner"><div class="region"><div class="contents">
	      <p class="para">
              Note: A zone is only transferred if the <span class="em emphasis">Serial Number</span> on the Primary is larger than the one on the Secondary. If you want to have your Primary Master DNS notifying Secondary DNS Servers of zone changes, you can add <span class="em emphasis">also-notify { ipaddress; };</span> in to <span class="file filename">/etc/bind/named.conf.local</span> as shown in the example below:
	      </p>
	    </div></div></div></div>
<div class="code"><pre class="contents ">zone "példa.hu" {
	type master;
	file "/etc/bind/db.példa.hu";
	allow-transfer { 192.168.1.11; };
	also-notify { 192.168.1.11; }; 
	};

zone "1.168.192.in-addr.arpa" {
	type master;
	file "/etc/bind/db.192";
	allow-transfer { 192.168.1.11; };
	also-notify { 192.168.1.11; }; 
	};
	</pre></div>
<div class="note" title="Megjegyzés"><div class="inner"><div class="region"><div class="contents">
	      <p class="para">A nem mérvadó zónafájlok alapértelmezett könyvtára a <span class="file filename">/var/cache/bind/</span>. Az <span class="app application">AppArmor</span> engedélyezi az írást ebbe a könyvtárba a <span class="app application">named</span> démon számára. Az AppArmorral kapcsolatos további információkért lásd az <a class="xref" href="apparmor.html" title="AppArmor">AppArmor</a> szakaszt.</p>
	    </div></div></div></div>
</div></div>
</div></div>
</div>
<div class="links nextlinks">
<a class="nextlinks-prev" href="dns-installation.html" title="Telepítés">Előző</a><a class="nextlinks-next" href="dns-troubleshooting.html" title="Hibaelhárítás">Következő</a>
</div>
<div class="clear"></div>
</div>
<div id="pagebottom"></div>
</div></div>
</div>
<div id="footer"><p>The material in this document is available under a free license, see <a href="../../legal.html">Legal</a> for details.<br>
          For information on contributing see the <a href="https://wiki.ubuntu.com/DocumentationTeam">Ubuntu Documentation Team wiki page</a>.
          To report errors in this serverguide documentation, <a href="https://bugs.launchpad.net/serverguide">file a bug report</a>.</p></div>
</div>
</body>
</html>
