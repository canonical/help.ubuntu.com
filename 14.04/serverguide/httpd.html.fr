<!DOCTYPE html>
<html lang=fr>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>HTTPD - serveur web Apache2</title>
<link rel="stylesheet" type="text/css" href="fr.css">
<script type="text/javascript" src="jquery.js"></script><script type="text/javascript" src="jquery.syntax.js"></script><script type="text/javascript" src="yelp.js"></script>
</head>
<body id="home">
<script src="https://ssl.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">
        _uacct = "UA-1018242-8";
        urchinTracker();
      </script><div id="container">
<div id="container-inner">
<div id="mothership"><ul>
<li><a href="http://www.ubuntu.com/partners">Partners</a></li>
<li><a href="http://www.ubuntu.com/support">Support</a></li>
<li><a href="http://www.ubuntu.com/community">Community</a></li>
<li><a href="http://www.ubuntu.com">Ubuntu.com</a></li>
</ul></div>
<div id="header">
<h1 id="ubuntu-header"><a href="https://help.ubuntu.com/">Ubuntu Documentation</a></h1>
<ul id="main-menu">
<li><a class="main-menu-item current" href="../../">Official Documentation</a></li>
<li><a href="https://help.ubuntu.com/community/CommunityHelpWiki">Community Help Wiki</a></li>
<li><a href="http://community.ubuntu.com/contribute/documentation/">Contribute</a></li>
</ul>
</div>
<div id="menu-search"><div id="search-box">
<noscript><form action="https://www.google.com/cse" id="cse-search-box"><div>
<input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq"><input type="hidden" name="ie" value="UTF-8"><input type="text" name="q" size="21"><input type="submit" name="sa" value="Search">
</div></form></noscript>
<script>
                document.write('<form action="../../search.html" id="cse-search-box">');
                document.write('  <div>');
                document.write('    <input type="hidden" name="cof" value="FORID:9">');
                document.write('    <input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq">');
                document.write('    <input type="hidden" name="ie" value="UTF-8">');
                document.write('    <input type="text" name="q" size="21">');
                document.write('    <input type="submit" name="sa" value="Search">');
                document.write('  </div>');
                document.write('</form>');
              </script>
</div></div>
<div class="trails"><div class="trail">
<a href="../../14.04" class="trail">Ubuntu 14.04</a> » <a class="trail" href="index.html" title="Guide du serveur Ubuntu">Guide du serveur Ubuntu</a> » <a class="trail" href="web-servers.html" title="Serveurs web">Serveurs web</a> » </div></div>
<div id="cwt-content" class="clearfix content-area"><div id="page">
<div id="content">
<div class="links nextlinks">
<a class="nextlinks-prev" href="web-servers.html" title="Serveurs web">Précédent</a><a class="nextlinks-next" href="php5.html" title="PHP5 - Langage de script">Suivant</a>
</div>
<div class="hgroup"><h1 class="title">HTTPD - serveur web Apache2</h1></div>
<div class="region">
<div class="contents">
<p class="para">Apache is the most commonly used Web server on Linux systems. Web servers are used
          to serve Web pages requested by client computers. Clients typically request and view
          Web pages using Web browser applications such as <span class="app application">Firefox</span>,
              <span class="app application">Opera</span>, <span class="app application">Chromium</span>,
              or <span class="app application">Internet Explorer</span>.</p>
<p class="para">Les utilisateurs saisissent une URL (adresse internet) pour pointer vers un serveur web au moyen de son nom de domaine complet (FQDN) et un chemin d'accès à la ressource requise. Par exemple, pour afficher la page d'accueil du <a href="http://www.ubuntu.com" class="ulink" title="http://www.ubuntu.com">site web Ubuntu</a> un utilisateur entrera seulement le nom de domaine complet :</p>
<div class="screen"><pre class="contents "><span class="input userinput">www.ubuntu.com</span>
</pre></div>
<p class="para">Pour voir la sous-page sur <a href="http://www.ubuntu.com/community" class="ulink" title="http://www.ubuntu.com/community">la communauté</a>, un utilisateur entrera le nom complet suivi d'un chemin :</p>
<div class="screen"><pre class="contents "><span class="input userinput">www.ubuntu.com/community</span>
</pre></div>
<p class="para">La méthode la plus communément utilisée pour le transfert de pages web est le protocole de transfert hypertexte (dont l'acronyme anglais est HTTP). Le protocole de transfert hypertexte sur sockets sécurisées (HTTPS) et le protocole de transfert de fichiers (FTP), qui permet d'envoyer et de télécharger des fichiers, sont également pris en charge.</p>
<p class="para">Les serveurs web Apache sont fréquemment utilisés en combinaison avec le moteur de base de données <span class="app application">MySQL</span>, le langage de script de pré-traitement hypertexte (<span class="app application">PHP</span>), et d'autres langages de scripts prisés tels que <span class="app application">Python</span> et <span class="app application">Perl</span>. Cette configuration, connue sous le nom de LAMP (Linux, Apache, MySQL et Perl/Python/PHP), constitue une puissante et robuste plate-forme de développement et de déploiement d'applications web.</p>
</div>
<div class="links sectionlinks" role="navigation"><ul>
<li class="links"><a class="xref" href="httpd.html#http-installation" title="Installation">Installation</a></li>
<li class="links"><a class="xref" href="httpd.html#http-configuration" title="Configuration">Configuration</a></li>
<li class="links"><a class="xref" href="httpd.html#https-configuration" title="Configuration HTTPS">Configuration HTTPS</a></li>
<li class="links"><a class="xref" href="httpd.html#http-directory-permissions" title="Permission d'écriture sur le partage">Permission d'écriture sur le partage</a></li>
<li class="links"><a class="xref" href="httpd.html#http-references" title="Références">Références</a></li>
</ul></div>
<div class="sect2 sect" id="http-installation"><div class="inner">
<div class="hgroup"><h2 class="title">Installation</h2></div>
<div class="region"><div class="contents">
<p class="para">Le serveur web <span class="app application">Apache2</span> est disponible dans Ubuntu Linux. Pour installer Apache2 :</p>
<div class="steps"><div class="inner"><ul class="steps"><li class="steps">
        <p class="para">Saisissez la commande suivante dans un terminal :</p>

<div class="screen"><pre class="contents "><span class="cmd command">sudo apt-get install apache2</span>
</pre></div>
             		 
      </li></ul></div></div>
</div></div>
</div></div>
<div class="sect2 sect" id="http-configuration"><div class="inner">
<div class="hgroup"><h2 class="title">Configuration</h2></div>
<div class="region">
<div class="contents">
<p class="para">Apache2 doit être configuré à l'aide de <span class="em emphasis">directives</span> décrites dans des fichiers texte de configuration. Ces <span class="em emphasis">directives</span> sont réparties entre les fichiers et dossiers suivants :</p>
<div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
            <p class="para">Le fichier de configuration principal est <span class="em emphasis">apache2.conf</span>. Il contient les paramètres <span class="em emphasis">globaux</span> d'Apache2.</p>
          </li>
<li class="list itemizedlist">
            <p class="para"><span class="em emphasis">httpd.conf:</span> historiquement le principal fichier de configuration Apache2, nommé d'après le démon <span class="app application">httpd</span>. Maintenant, le fichier n'existe plus. Dans les anciennes versions d'Ubuntu, le fichier peut être présent mais vide, toutes les options de configurations ayant été déplacées dans le répertoire référencé ci-dessous.</p>
          </li>
<li class="list itemizedlist">
            <p class="para"><span class="em emphasis">conf-available :</span> ce répertoire contient les fichiers de configuration disponibles. Tous les fichiers qui étaient auparavant dans <span class="file filename">/etc/apache2/conf.d</span> peuvent être déplacés dans <span class="file filename">/etc/apache2/conf-available</span>.</p>
          </li>
<li class="list itemizedlist">
            <p class="para"><span class="em emphasis">conf-enabled :</span> conserve les <span class="em emphasis">liens symboliques</span> dans <span class="file filename">/etc/apache2/conf-available</span>. Quand un fichier de configuration est pointé, il sera activé au prochain démarrage de <span class="app application">apache2</span>.</p>
          </li>
<li class="list itemizedlist">
            <p class="para"><span class="em emphasis">envvars :</span> fichier où les variables d'<span class="em emphasis">environnement</span> d'Apache2 sont définies.</p>
          </li>
<li class="list itemizedlist">
            <p class="para"><span class="em emphasis">mods-available :</span> ce répertoire contient les fichiers de configuration qui permettent de charger les <span class="em emphasis">modules</span> et de les paramétrer. Certains modules peuvent ne pas avoir de fichier de configuration.</p>
          </li>
<li class="list itemizedlist">
            <p class="para"><span class="em emphasis">mods-enabled :</span> contient <span class="em emphasis">les liens symboliques (symlinks)</span> vers les fichiers de <span class="file filename">/etc/apache2/mods-available</span>. Lorsqu'un lien symbolique vers un module de configuration est créé, il sera activé au prochain redémarrage d'<span class="app application">Apache2</span>.</p>
          </li>
<li class="list itemizedlist">
            <p class="para"><span class="em emphasis">ports.conf :</span> héberge les directives déterminant les ports TCP sur lesquels Apache2 est en écoute.</p>
          </li>
<li class="list itemizedlist">
            <p class="para"><span class="em emphasis">sites-available :</span> ce dossier contient des fichiers de configuration pour les <span class="em emphasis">serveurs virtuels</span> d'Apache2. Les serveurs virtuels permettent de configurer Apache2 pour plusieurs sites ayant différentes configurations.</p>
          </li>
<li class="list itemizedlist">
            <p class="para"><span class="em emphasis">sites-enabled :</span> comme mods-enabled, <span class="file filename">sites-enabled</span> contient des liens symboliques vers le dossier <span class="file filename">/etc/apache2/sites-available</span>. De la même manière que lorsqu'un lien symbolique vers un fichier de configuration de sites-available est créé, le site ainsi configuré sera activé au prochain redémarrage d'Apache2.</p>
          </li>
<li class="list itemizedlist">
            <p class="para"><span class="em emphasis">magic :</span> instructions pour déterminer le type MIME à partir des premiers octets d'un fichier.</p>
          </li>
</ul></div>
<p class="para">Enfin, d'autres paramétrages peuvent être ajoutés en utilisant la directive <span class="em emphasis">Include</span> et des caractères jokers peuvent être utilisés pour inclure de multiples fichiers de configuration. Ces directives peuvent être placées dans n'importe lequel de ces fichiers de configuration. Les changements effectués dans les fichiers de configuration principaux ne sont pris en compte qu'au (re-)démarrage d'Apache2.</p>
<p class="para">Le serveur lit également un fichier contenant les documents de type MIME, le nom du fichier est défini par la commande <span class="em emphasis">TypesConfig</span>, généralement par l’intermédiaire de <span class="file filename">/etc/apache2/mods-available/mime.conf</span>, qui peut également inclure des ajouts ou des remplacements, et est <span class="file filename">/etc/mime.types</span> par défaut.</p>
</div>
<div class="sect3 sect" id="http-basic-settings"><div class="inner">
<div class="hgroup"><h3 class="title">Réglages de base</h3></div>
<div class="region"><div class="contents">
<p class="para">Cette section explique les paramètres de configuration essentiels pour Apache2. Referez vous à la <a href="http://httpd.apache.org/docs/2.4/" class="ulink" title="http://httpd.apache.org/docs/2.4/">documentation Apache2</a> pour plus de détails.</p>
<div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
                 <p class="para">
                 Apache2 ships with a virtual-host-friendly default configuration.
	         That is, it is configured with a single default virtual host (using
		 the <span class="em emphasis">VirtualHost</span> directive) which can be modified or used as-is if you
		 have a single site, or used as a template for additional virtual hosts
		 if you have multiple sites.  If left alone, the default virtual host
		 will serve as your default site, or the site users will see if the
		 URL they enter does not match the <span class="em emphasis">ServerName</span> directive of any of your 
		 custom sites.  To modify the default virtual host, edit the file
		 <span class="file filename">/etc/apache2/sites-available/000-default.conf</span>.
                 </p>

                 <div class="note" title="Note"><div class="inner"><div class="region"><div class="contents">
                   <p class="para">Le jeu de directives pour un hôte virtuel ne s'applique qu'à cet hôte virtuel en particulier. Si une directive est définie globalement pour le serveur et n'est pas définie dans les paramètres de l'hôte virtuel, les paramètres par défaut s'appliquent. Par exemple, vous pouvez définir l'adresse électronique du webmaster globalement, et ne pas définir d'adresses individuelles pour chaque hôte virtuel.</p>
                 </div></div></div></div>

                 <p class="para">Si vous souhaitez configurer un nouvel hôte virtuel ou site, copiez ce fichier dans le même répertoire avec un nom de votre choix. Par exemple :</p>

<div class="screen"><pre class="contents "><span class="cmd command">sudo cp /etc/apache2/sites-available/000-default.conf /etc/apache2/sites-available/mynewsite.conf</span>
</pre></div>

                 <p class="para">Modifiez le nouveau fichier pour configurer le nouveau site en utilisant certaines des commandes décrites ci-dessous.</p>

               </li>
<li class="list itemizedlist">
                 <p class="para">La directive <span class="em emphasis">ServerAdmin</span> spécifie l'adresse électronique qui figurera comme adresse de l'administrateur du serveur. La valeur par défaut est webmaster@localhost. Cette valeur devrait être remplacée par une adresse dont vous êtes destinataire (dans le cas où vous êtes l'administrateur du serveur). Si votre site rencontre un problème, Apache2 affichera un message d'erreur contenant cette adresse mail afin de signaler le problème. Cette directive est à placer dans les fichiers de configuration de vos sites situés dans /etc/apache2/sites-available.</p>
               </li>
<li class="list itemizedlist">
                 <p class="para">La directive <span class="em emphasis">Listen</span> précise le port, et de manière optionnelle l'adresse IP, sur lesquels Apache2 écoute. Si l'adresse IP n'est pas spécifiée, Apache écoutera sur toutes les adresses IP assignées à la machine. La valeur par défaut de la directive Listen est 80. Modifiez la en 127.0.0.1:80 afin qu'Apache2 n'écoute que sur l'interface locale et ne soit pas accessible depuis l'Internet, en 81 (par exemple) afin de modifier le port sur lequel Apache2 écoute, ou laissez la valeur par défaut dans la majorité des cas. Cette directive se situe dans le fichier <span class="file filename">/etc/apache2/ports.conf</span></p>
               </li>
<li class="list itemizedlist">
                 <p class="para">
	         The <span class="em emphasis">ServerName</span> directive is optional and specifies what FQDN your
		 site should answer to.  The default virtual host has no ServerName
		 directive specified, so it will respond to all requests that do not
		 match a ServerName directive in another virtual host.  If you have
		 just acquired the domain name ubunturocks.com and wish to host it on
		 your Ubuntu server, the value of the ServerName directive in your
		 virtual host configuration file should be ubunturocks.com.  Add this
		 directive to the new virtual host file you created earlier 
		 (<span class="file filename">/etc/apache2/sites-available/mynewsite.conf</span>).
		 </p>
			 
                 <p class="para">Comme beaucoup de visiteurs pensent que le préfixe www est utile, il est souhaitable que vous configuriez votre hôte virtuel pour qu'il réponde à ce nom. Utilisez la directive <span class="em emphasis">ServerAlias</span>. Il est possible d'utiliser des caractères jokers dans la directive ServerAlias.</p>

                 <p class="para">Par exemple, votre site répondra à n'importe quelle requête de domaine finissant par <span class="em emphasis">.ubunturocks.com</span> en utilisant la configuration suivante :</p>                 

<div class="code"><pre class="contents ">ServerAlias *.ubunturocks.com
</pre></div>

               </li>
<li class="list itemizedlist">
                 <p class="para">
		 The <span class="em emphasis">DocumentRoot</span> directive specifies where Apache2 should look for the
		 files that make up the site.  The default value is /var/www/html, as specified in
		 <span class="file filename">/etc/apache2/sites-available/000-default.conf</span>. If desired, change this value
		 in your site's virtual host file, and remember to create that directory if necessary!
		 </p>
              </li>
</ul></div>
<p class="para">Activer le nouveau <span class="em emphasis">VirtualHost</span> grâce à l'utilitaire <span class="app application">a2ensite</span> puis redémarrez Apache2 :</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo a2ensite mon_nouveau_site</span>
<span class="cmd command">sudo service apache2 restart</span>
</pre></div>
<div class="note" title="Note"><div class="inner"><div class="region"><div class="contents">
              <p class="para">Il est préférable d'utiliser un nom plus explicite que <span class="em emphasis">mon_nouveau_site</span>. Par exemple nommez le fichier en utilisant la valeur de la directive <span class="em emphasis">ServerName</span> de l'hôte virtuel.</p>
            </div></div></div></div>
<p class="para">De manière analogue l'utilitaire <span class="app application">a2dissite</span> permet de désactiver les sites. Cela peut être utile lors du dépannage de problèmes de configuration avec plusieurs hôtes virtuels :</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo a2dissite mon_nouveau_site</span>
<span class="cmd command">sudo service apache2 restart</span>
</pre></div>
</div></div>
</div></div>
<div class="sect3 sect" id="default-settings"><div class="inner">
<div class="hgroup"><h3 class="title">Réglages par défaut</h3></div>
<div class="region"><div class="contents">
<p class="para">Cette section explique la configuration par défaut du serveur Apache2. Par exemple, si vous ajoutez un hôte virtuel, les paramètres que vous définissez pour celui-ci deviennent prioritaires. Pour une directive qui n'est pas définie à l'intérieur de l'hôte virtuel, la valeur par défaut est utilisée.</p>
<div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">

              <p class="para">La directive <span class="em emphasis">DirectoryIndex</span> stipule la page par défaut qui doit être servie lorsqu'un utilisateur demande l'index d'un répertoire en spécifiant une barre oblique (/) à la fin du nom d'un répertoire.</p>

              <p class="para">Par exemple, lorsqu'un utilisateur demande la page http://www.exemple.com/ce_repertoire/, il obtiendra soit la page DirectoryIndex si elle existe, soit un listing du répertoire généré par le serveur si Option Indexes est spécifiée, soit encore une page « Autorisation refusée » si aucune de ces deux conditions n'est remplie. Le serveur essaiera de trouver un fichier parmi ceux listés dans la directive DirectoryIndex et renverra le premier d'entre eux. S'il ne trouve aucun des fichiers stipulés et si <span class="em emphasis">Options Indexes</span> est configurée pour ce répertoire, le serveur en renverra alors la liste des sous-répertoires et fichiers, au format HTML. La valeur par défaut, spécifiée dans <span class="file filename">/etc/apache2/mods-available/dir.conf</span>, est « index.html index.cgi index.pl index.php index.xhtml index.htm ». Ainsi, si Apache2 trouve un fichier portant l'un de ces noms, il l'affichera.</p>
            </li>
<li class="list itemizedlist">

              <p class="para">
              The <span class="em emphasis">ErrorDocument</span> directive allows you to specify a file
       	      for Apache2 to use for specific error events.  For example,
	      if a user requests a resource that does not exist, a 404
	      error will occur. By default, Apache2 will simply return a HTTP 404 Return code.
              Read <span class="file filename">/etc/apache2/conf-available/localized-error-pages.conf</span> for detailed
              instructions for using ErrorDocument, including locations of example files.
              </p>
            </li>
<li class="list itemizedlist">
              <p class="para">
              By default, the server writes the transfer log to the file
              <span class="file filename">/var/log/apache2/access.log</span>. You can change this on a per-site
	      basis in your virtual host configuration files with the <span class="em emphasis">CustomLog</span>
              directive, or omit it to accept the default, specified in <span class="file filename">
	      /etc/apache2/conf-available/other-vhosts-access-log.conf</span>.  You may also specify the file
	      to which errors are logged, via the <span class="em emphasis">ErrorLog</span> directive, whose default
	      is <span class="file filename">/var/log/apache2/error.log</span>.  These are kept
	      separate from the transfer logs to aid in troubleshooting problems
	      with your Apache2 server.  You may also specify the <span class="em emphasis">LogLevel</span> (the
	      default value is "warn") and the <span class="em emphasis">LogFormat</span> (see <span class="file filename">
	      /etc/apache2/apache2.conf</span> for the default value).
	      </p>
            </li>
<li class="list itemizedlist">
              <p class="para">Certaines options sont définies par répertoire plutôt que par serveur. <span class="em emphasis">Options</span> est l'une de ces directives. Une déclaration Directory est entourée d'étiquettes de type XML :</p>

<div class="code"><pre class="contents ">&lt;Directory /var/www/html/mynewsite&gt;
...
&lt;/Directory&gt;
</pre></div>

	    <p class="para">La directive <span class="em emphasis">Options</span> à l'intérieur d'une déclaration Directory peut avoir avoir une ou plusieurs valeurs séparées par des espaces :</p>

            <div class="list itemizedlist"><ul class="list itemizedlist compact">
<li class="list itemizedlist">
                <p class="para"><span class="em em-bold emphasis">ExecCGI</span> - Autorise l'exécution des scripts CGI. Les scripts CGI ne sont pas exécutés si cette option n'est pas choisie. <div class="note note-tip" title="Astuce"><div class="inner"><div class="region"><div class="contents">
                  <p class="para">La plupart des fichiers ne devraient pas être exécutés comme des scripts CGI. Ce serait très dangereux. Les scripts CGI doivent être dans un répertoire distinct et en dehors de votre dossier racine de serveur, et seul ce répertoire aura l'option ExecCGI active. Le répertoire par défaut où se trouvent les scripts CGI est <span class="file filename">/usr/lib/cgi-bin</span>.</p>
                </div></div></div></div></p>
                </li>
<li class="list itemizedlist">
                  <p class="para"><span class="em em-bold emphasis">Includes</span> - Autorise les inclusions côté serveur. Les inclusions côté serveur permettent à un fichier HTML d'<span class="em emphasis"> inclure</span> d'autres fichiers. Voir <a href="https://help.ubuntu.com/community/ServerSideIncludes" class="ulink" title="https://help.ubuntu.com/community/ServerSideIncludes">Apache SSI documentation (Ubuntu community)</a> pour plus d'informations.</p>
                </li>
<li class="list itemizedlist">
                  <p class="para"><span class="em em-bold emphasis">IncludesNOEXEC</span> - Autorise les inclusions côté serveur, mais désactive les commandes <span class="em emphasis">#exec</span> et <span class="em emphasis">#include</span> dans les scripts CGI.</p>
                </li>
<li class="list itemizedlist">
                  <p class="para"><span class="em em-bold emphasis">Indexes</span> - affiche une liste des fichiers et dossiers du répertoire s'il n'existe aucun « <span class="em emphasis">DirectoryIndex</span> » (tel que index.html) dans le répertoire demandé. <div class="note note-warning" title="Avertissement"><div class="inner"><div class="region"><div class="contents">
                    <p class="para">Pour des raisons de sécurité, ceci ne devrait habituellement pas être activé, et cela ne devrait certainement pas être activé dans votre répertoire racine de documents (DocumentRoot). Si vous êtes certain de vouloir que les utilisateurs voient le contenu complet d'un répertoire, activez cette option avec prudence dans une section pour ce répertoire.</p>
                  </div></div></div></div></p>
                </li>
<li class="list itemizedlist">
                  <p class="para">
                  <span class="em em-bold emphasis">Multiview</span> - Support content-negotiated multiviews;
                  this option is disabled by default for security reasons.  See the <a href="http://httpd.apache.org/docs/2.4/mod/mod_negotiation.html#multiviews" class="ulink" title="http://httpd.apache.org/docs/2.4/mod/mod_negotiation.html#multiviews">Apache2
		  documentation on this option</a>.
                  </p>
                </li>
<li class="list itemizedlist">
                  <p class="para"><span class="em em-bold emphasis">SymLinksIfOwnerMatch</span> - Ne suit les liens symboliques que si le fichier ou répertoire cible a le même propriétaire que le lien.</p>
                </li>
</ul></div>
            </li>
</ul></div>
</div></div>
</div></div>
<div class="sect3 sect" id="httpd-settings"><div class="inner">
<div class="hgroup"><h3 class="title">Paramètres httpd</h3></div>
<div class="region"><div class="contents">
<p class="para">Cette section explique certains paramétrages basiques du démon <span class="app application">httpd</span>.</p>
<p class="para"><span class="em em-bold emphasis">LockFile</span> - La directive LockFile définit le chemin vers le fichier lockfile utilisé lorsque le serveur est compilé soit avec USE_FCNTL_SERIALIZED_ACCEPT, soit USE_FLOCK_SERIALIZED_ACCEPT. Ce fichier doit être enregistré sur le disque local. On doit laisser la valeur par défaut à moins que le répertoire des journaux se situe sur un partage NFS. Dans ce cas, la valeur par défaut doit être modifiée pour un emplacement, sur le disque local, lisible uniquement par le super-utilisateur (root).</p>
<p class="para"><span class="em em-bold emphasis">PidFile</span> - La directive PidFile définit le fichier dans lequel le serveur enregistre son ID de processus (pid : process ID). Ce fichier ne doit être accessible en lecture que par le super-utilisateur (root). Dans la plupart des cas, la valeur par défaut peut être conservée.</p>
<p class="para"><span class="em em-bold emphasis">User</span> - La commande User définit l'identité de l'utilisateur utilisée par le serveur pour répondre aux demandes. Ce paramètre détermine l'accès au serveur. Tous les fichiers inaccessibles à cet utilisateur seront également inaccessibles aux visiteurs de votre site web. La valeur par défaut pour l'utilisateur est "www-data".</p>
<div class="note note-warning" title="Avertissement"><div class="inner"><div class="region"><div class="contents">
            <p class="para">À moins que vous ne sachiez exactement ce que vous faites, ne définissez jamais la directive User à root. Utiliser root (super-utilisateur) comme valeur pour User créera des failles de sécurité béantes dans votre serveur Web.</p>
          </div></div></div></div>
<p class="para"><span class="em em-bold emphasis">Group</span> - La commande Group est similaire à la commande User. Group définit le groupe sous lequel le serveur répond aux requêtes. Le groupe par défaut est également "www-data".</p>
</div></div>
</div></div>
<div class="sect3 sect" id="apache-modules"><div class="inner">
<div class="hgroup"><h3 class="title">Modules Apache2</h3></div>
<div class="region"><div class="contents">
<p class="para">Apache2 est un serveur modulaire. Cela signifie que seules les fonctionnalités les plus basiques sont incluses dans le cœur même du serveur. Les fonctionnalités étendues sont disponibles grâce aux modules qui peuvent être chargés dans Apache2. Par défaut, un ensemble de modules de base est inclus dans le serveur au moment de la compilation. Si le serveur est compilé pour utiliser les modules chargés dynamiquement, alors ces derniers peuvent être compilés séparément et ajouté à tout moment en utilisant la directive LoadModule. Sinon, Apache2 doit être recompilé pour ajouter ou supprimer des modules.</p>
<p class="para">Ubuntu compile Apache2 pour permettre le chargement dynamique de modules. Les directives de configuration peuvent être incluses dans un module particulier en les délimitant par un bloc <span class="em emphasis">&lt;IfModule&gt;</span>.</p>
<p class="para">Vous pouvez installer des modules additionnels d'Apache2 et les utiliser avec votre serveur Web. Par exemple, exécutez la commande suivante dans un terminal pour installer le module <span class="em emphasis">Authentification MySQL</span> :</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo apt-get install libapache2-mod-auth-mysql</span>
</pre></div>
<p class="para">Consultez le répertoire <span class="file filename">/etc/apache2/mods-available</span> pour voir les modules supplémentaires.</p>
<p class="para">L'utilitaire <span class="app application">a2enmod</span> permet d'activer un module :</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo a2enmod auth_mysql</span>
<span class="cmd command">sudo service apache2 restart</span>
</pre></div>
<p class="para">Inversement, <span class="app application">a2dismod</span> désactivera un module :</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo a2dismod auth_mysql</span>
<span class="cmd command">sudo service apache2 restart</span>
</pre></div>
</div></div>
</div></div>
</div>
</div></div>
<div class="sect2 sect" id="https-configuration"><div class="inner">
<div class="hgroup"><h2 class="title">Configuration HTTPS</h2></div>
<div class="region"><div class="contents">
<p class="para">Le module <span class="app application">mod_ssl</span> ajoute d'importantes caractéristiques au serveur Apache2 - la capacité de chiffrer les communications. De plus, lorsque votre navigateur Web communique en utilisant SSL, le préfixe https:// est utilisé au début de l'adresse Web (URL) dans la barre d'adresse du navigateur.</p>
<p class="para">Le module <span class="app application">mod_ssl</span> est disponible dans le paquet <span class="app application">apache2-common</span>. Saisissez la ligne de commande suivante pour activer le module <span class="app application">mod_ssl</span> :</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo a2enmod ssl</span>
</pre></div>
<p class="para">
          There is a default HTTPS configuration file in <span class="file filename">/etc/apache2/sites-available/default-ssl.conf</span>.
          In order for <span class="app application">Apache2</span> to provide HTTPS, 
          a <span class="em emphasis">certificate</span> and <span class="em emphasis">key</span> file are also needed.  The default HTTPS 
          configuration will use a certificate and key generated by the <span class="app application">ssl-cert</span> package.  They 
          are good for testing, but the auto-generated certificate and key should be replaced by a certificate specific
          to the site or server. For information on generating a key and obtaining a certificate see 
          <a class="xref" href="certificates-and-security.html" title="Certificats">Certificats</a>
          </p>
<p class="para">Pour configurer <span class="app application">Apache2</span> pour HTTPS, saisissez les informations suivantes :</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo a2ensite default-ssl</span>
</pre></div>
<div class="note" title="Note"><div class="inner"><div class="region"><div class="contents">
              <p class="para">Les répertoires par défaut sont <span class="file filename">/etc/ssl/certs</span> et <span class="file filename">/etc/ssl/private</span>. Si vous installez le certificat et la clé dans un autre répertoire, assurez-vous de modifier <span class="em emphasis">SSLCertificateFile</span> et <span class="em emphasis">SSLCertificateKeyFile</span> en conséquence.</p>
            </div></div></div></div>
<p class="para">Avec Apache2 maintenant configuré pour HTTPS, redémarrez le service pour activer les nouveaux paramètres :</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo service apache2 restart</span>
</pre></div>
<div class="note" title="Note"><div class="inner"><div class="region"><div class="contents">
              <p class="para">Selon comment vous avez obtenu votre certificat, vous devrez entrer un mot de passe lors du redémarrage d'<span class="app application">Apache2</span>.</p>
            </div></div></div></div>
<p class="para">Vous pouvez accéder aux pages du serveur sécurisé en tapant https://votre_nomdhote/url/ dans la barre d'adresse de votre navigateur.</p>
</div></div>
</div></div>
<div class="sect2 sect" id="http-directory-permissions"><div class="inner">
<div class="hgroup"><h2 class="title">Permission d'écriture sur le partage</h2></div>
<div class="region"><div class="contents">
<p class="para">Pour que plusieurs utilisateurs soient en mesure d'écrire dans le même répertoire, il sera nécessaire d'accorder la permission d'écriture à un groupe qu'ils partagent en commun. Les exemples suivants accordent l'autorisation partagée d'écriture dans  <span class="file filename">/var/www/html</span> pour le groupe «webmasters».</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo chgrp -R webmasters /var/www/html</span>
<span class="cmd command">sudo find /var/www/html -type d -exec chmod g=rwxs "{}" \;</span>
<span class="cmd command">sudo find /var/www/html -type f -exec chmod g=rw "{}" \;</span>
</pre></div>
<p class="para">
    These commands recursively set the group permission on all files and
    directories in /var/www/html to read write and set user id. This has the
    effect of having the files and directories inherit their group and permission
    from their parrent. Many admins find this useful for allowing multiple users
    to edit files in a directory tree.
</p>
<div class="note" title="Note"><div class="inner"><div class="region"><div class="contents">
          <p class="para">Si l'accès doit être accordé à plus d'un groupe par répertoire, activez Access Control Lists (ACL).</p>
        </div></div></div></div>
</div></div>
</div></div>
<div class="sect2 sect" id="http-references"><div class="inner">
<div class="hgroup"><h2 class="title">Références</h2></div>
<div class="region"><div class="contents"><div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
            <p class="para"><a href="http://httpd.apache.org/docs/2.4/" class="ulink" title="http://httpd.apache.org/docs/2.4/">La documentation Apache2</a> contient des informations détaillées sur les directives de configuration. Également, allez voir <span class="app application">apache2-doc</span>; le paquet pour les documents officiels Apache2.</p>
          </li>
<li class="list itemizedlist">
            <p class="para">Consultez le site <a href="http://www.modssl.org/docs/" class="ulink" title="http://www.modssl.org/docs/">Mod SSL Documentation</a> (en anglais) pour plus d'informations concernant SSL.</p>
          </li>
<li class="list itemizedlist">
            <p class="para">O'Reilly's <a href="http://oreilly.com/catalog/9780596001919/" class="ulink" title="http://oreilly.com/catalog/9780596001919/">Apache Cookbook</a> (en anglais) est une bonne ressource pour réaliser des configurations spécifiques d'Apache2.</p>
          </li>
<li class="list itemizedlist">
            <p class="para">Pour les questions concernant Apache2 mais spécifiques à Ubuntu, consultez le <span class="em emphasis">#ubuntu-server</span> canal anglophone IRC sur <a href="http://freenode.net/" class="ulink" title="http://freenode.net/">freenode.net</a>, ou le canal généraliste francophone <span class="em emphasis">#ubuntu-fr</span>.</p>
          </li>
<li class="list itemizedlist">
            <p class="para">Apache étant habituellement couplé avec PHP et MySQL, la page du <a href="https://help.ubuntu.com/community/ApacheMySQLPHP" class="ulink" title="https://help.ubuntu.com/community/ApacheMySQLPHP">Wiki Ubuntu consacrée à Apache MySQL PHP</a> est également une très bonne source d'information.</p>
          </li>
</ul></div></div></div>
</div></div>
</div>
<div class="links nextlinks">
<a class="nextlinks-prev" href="web-servers.html" title="Serveurs web">Précédent</a><a class="nextlinks-next" href="php5.html" title="PHP5 - Langage de script">Suivant</a>
</div>
<div class="clear"></div>
</div>
<div id="pagebottom"></div>
</div></div>
</div>
<div id="footer"><p>The material in this document is available under a free license, see <a href="../../legal.html">Legal</a> for details.<br>
          For information on contributing see the <a href="https://wiki.ubuntu.com/DocumentationTeam">Ubuntu Documentation Team wiki page</a>.
          To report errors in this serverguide documentation, <a href="https://bugs.launchpad.net/serverguide">file a bug report</a>.</p></div>
</div>
</body>
</html>
