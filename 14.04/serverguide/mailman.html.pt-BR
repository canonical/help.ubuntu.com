<!DOCTYPE html>
<html lang=pt-BR>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Mailman</title>
<link rel="stylesheet" type="text/css" href="pt_BR.css">
<script type="text/javascript" src="jquery.js"></script><script type="text/javascript" src="jquery.syntax.js"></script><script type="text/javascript" src="yelp.js"></script>
</head>
<body id="home">
<script src="https://ssl.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">
        _uacct = "UA-1018242-8";
        urchinTracker();
      </script><div id="container">
<div id="container-inner">
<div id="mothership"><ul>
<li><a href="http://www.ubuntu.com/partners">Partners</a></li>
<li><a href="http://www.ubuntu.com/support">Support</a></li>
<li><a href="http://www.ubuntu.com/community">Community</a></li>
<li><a href="http://www.ubuntu.com">Ubuntu.com</a></li>
</ul></div>
<div id="header">
<h1 id="ubuntu-header"><a href="https://help.ubuntu.com/">Ubuntu Documentation</a></h1>
<ul id="main-menu">
<li><a class="main-menu-item current" href="../../">Official Documentation</a></li>
<li><a href="https://help.ubuntu.com/community/CommunityHelpWiki">Community Help Wiki</a></li>
<li><a href="http://community.ubuntu.com/contribute/documentation/">Contribute</a></li>
</ul>
</div>
<div id="menu-search"><div id="search-box">
<noscript><form action="https://www.google.com/cse" id="cse-search-box"><div>
<input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq"><input type="hidden" name="ie" value="UTF-8"><input type="text" name="q" size="21"><input type="submit" name="sa" value="Search">
</div></form></noscript>
<script>
                document.write('<form action="../../search.html" id="cse-search-box">');
                document.write('  <div>');
                document.write('    <input type="hidden" name="cof" value="FORID:9">');
                document.write('    <input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq">');
                document.write('    <input type="hidden" name="ie" value="UTF-8">');
                document.write('    <input type="text" name="q" size="21">');
                document.write('    <input type="submit" name="sa" value="Search">');
                document.write('  </div>');
                document.write('</form>');
              </script>
</div></div>
<div class="trails"><div class="trail">
<a href="../../14.04" class="trail">Ubuntu 14.04</a> » <a class="trail" href="index.html" title="Guia para servidores Ubuntu">Guia para servidores Ubuntu</a> » <a class="trail" href="email-services.html" title="Serviços de Email">Serviços de Email</a> » </div></div>
<div id="cwt-content" class="clearfix content-area"><div id="page">
<div id="content">
<div class="links nextlinks">
<a class="nextlinks-prev" href="dovecot-server.html" title="Servidor Dovecot">Anterior</a><a class="nextlinks-next" href="mail-filtering.html" title="Filtro de Correio">Próximo</a>
</div>
<div class="hgroup"><h1 class="title">Mailman</h1></div>
<div class="region">
<div class="contents"><p class="para">O Mailman é um programa open source para administração de discussões por listas de e-mail e newsletter. Muitas das listas de e-mail open source (incluindo todas as <a href="http://lists.ubuntu.com" class="ulink" title="http://lists.ubuntu.com">listas de e-mail Ubuntu</a>) utilizam o Mailman. Ele é poderoso e fácil de instalar e manter.</p></div>
<div class="links sectionlinks" role="navigation"><ul>
<li class="links"><a class="xref" href="mailman.html#mailman-installation" title="Instalação">Instalação</a></li>
<li class="links"><a class="xref" href="mailman.html#mailman-configuration" title="Configuração">Configuração</a></li>
<li class="links"><a class="xref" href="mailman.html#mailman-admin" title="Administração">Administração</a></li>
<li class="links"><a class="xref" href="mailman.html#mailman-users" title="Usuários">Usuários</a></li>
<li class="links"><a class="xref" href="mailman.html#mailman-references" title="Referências">Referências</a></li>
</ul></div>
<div class="sect2 sect" id="mailman-installation"><div class="inner">
<div class="hgroup"><h2 class="title">Instalação</h2></div>
<div class="region">
<div class="contents">
<p class="para">Mailman fornece uma interface web para administradores e usuários, usando um servidor de e-mail externo para enviar e receber e-mails. Funciona perfeitamente com o seguintes servidores de e-mail:</p>
<p class="para">
            <div class="list itemizedlist"><ul class="list itemizedlist compact">
<li class="list itemizedlist">
                    <p class="para"><span class="app application">Postfix</span></p>
                </li>
<li class="list itemizedlist">
                    <p class="para"><span class="app application">Exim</span></p>
                </li>
<li class="list itemizedlist">
                    <p class="para"><span class="app application">Sendmail</span></p>
                </li>
<li class="list itemizedlist">
                    <p class="para"><span class="app application">Qmail</span></p>
                </li>
</ul></div>
            </p>
<p class="para">Nós veremos como instalar e configurar o Mailman com, o servidor web Apache, e também com os servidores de correio Postfix ou Exim. Se você deseja instalar o Mailman com um servidor de correio diferente, por favor consulte a seção de referências.</p>
<div class="note" title="Nota"><div class="inner"><div class="region"><div class="contents">
	       <p class="para">Você precisa instalar apenas um servidor de correio e o <span class="app application">Postfix</span> é o Agente de Transferência de Correio padrão do Ubuntu.</p>
	     </div></div></div></div>
</div>
<div class="sect3 sect" id="mailman-apache2"><div class="inner">
<div class="hgroup"><h3 class="title">Apache2</h3></div>
<div class="region"><div class="contents"><p class="para">
                To install apache2 you refer to <a class="xref" href="httpd.html#http-installation" title="Instalação">Instalação</a> for details.
              </p></div></div>
</div></div>
<div class="sect3 sect" id="mailman-postfix"><div class="inner">
<div class="hgroup"><h3 class="title">Postfix</h3></div>
<div class="region"><div class="contents"><p class="para">Para instruções sobre como instalar e configurar o Postifix consulte <a class="xref" href="postfix.html" title="Postfix">Postfix</a></p></div></div>
</div></div>
<div class="sect3 sect" id="mailman-exim4"><div class="inner">
<div class="hgroup"><h3 class="title">Exim4</h3></div>
<div class="region"><div class="contents">
<p class="para">Para instalar o Exim4 consulte <a class="xref" href="exim4.html" title="Exim4">Exim4</a>.</p>
<p class="para">
	      Once exim4 is installed, the configuration files are stored in
	      the <span class="file filename">/etc/exim4</span> directory. In Ubuntu, by default, the exim4 configuration files are
	      split across different files. You can change this behavior by changing
	      the following variable in the <span class="file filename">/etc/exim4/update-exim4.conf</span> file:
          </p>
<div class="code"><pre class="contents ">dc_use_split_config='true'
</pre></div>
</div></div>
</div></div>
<div class="sect3 sect" id="mailman-mailman"><div class="inner">
<div class="hgroup"><h3 class="title">Mailman</h3></div>
<div class="region"><div class="contents">
<p class="para">Para instalar o <span class="app application">Mailman</span>, execute o seguinte comando no terminal:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo apt-get install mailman</span> 
</pre></div>
<p class="para">Ele copia os arquivos de instalação no diretório <span class="app application">/var/lib/mailman</span>. Instala os scripts CGI no diretório <span class="app application">/usr/lib/cgi-bin/mailman</span>. Cria o usuário linux <span class="em emphasis">list</span>. Cria o grupo linux <span class="em emphasis">list</span>. O processo do Mailman irá pertencer a este usuário.</p>
</div></div>
</div></div>
</div>
</div></div>
<div class="sect2 sect" id="mailman-configuration"><div class="inner">
<div class="hgroup"><h2 class="title">Configuração</h2></div>
<div class="region">
<div class="contents"><p class="para">Esta seção assume que você tenha instalado o <span class="app application">mailman</span> com sucesso, <span class="app application">apache2</span>, e <span class="app application">postfix</span> ou <span class="app application">exim4</span>. Agora você precia apenas configurá-los.</p></div>
<div class="sect3 sect" id="mailman-conf-apache2"><div class="inner">
<div class="hgroup"><h3 class="title">Apache2</h3></div>
<div class="region"><div class="contents">
<p class="para">Um exemplo de arquivo de configuração do Apache é fornecido pelo <span class="app application">Mailman</span> e está localizado no <span class="file filename">/etc/mailman/apache.conf</span>. Para o Apache utilizar este arquivo de configuração ele precisa ser copiado para <span class="file filename">/etc/apache2/sites-available</span>:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo cp /etc/mailman/apache.conf /etc/apache2/sites-available/mailman.conf</span>
</pre></div>
<p class="para">Isto irá configurar um novo <span class="em emphasis">VirtualHost</span> do Apache para o site de administração do Mailman. Agora habilite a configuração e reinicie o Apache:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo a2ensite mailman.conf</span>
<span class="cmd command">sudo service apache2 restart</span>
</pre></div>
<p class="para">O Mailman utiliza o apache2 para renderizar seus scripts CGI. Os scripts CGI do mailman são instalados no diretório <span class="app application">/usr/lib/cgi-bin/mailman</span>. Então, a url do mailman será http://hostname/cgi-bin/mailman/. Você pode fazer mudanças no arquivo <span class="file filename">/etc/apache2/sites-available/mailman.conf</span> se você desejar mudar este comportamento.</p>
</div></div>
</div></div>
<div class="sect3 sect" id="mailman-conf-postfix"><div class="inner">
<div class="hgroup"><h3 class="title">Postfix</h3></div>
<div class="region"><div class="contents">
<p class="para">Para integração do <span class="app application">Postfix</span>, nós vamos associar o domínio lists.example.com com a lista de correios. Por favor substitua <span class="em emphasis">lists.example.com</span> pelo domínio que você escolheu.</p>
<p class="para">Você pode usar o comando postconf para adicionar configurações adicionais no <span class="file filename">/etc/postfix/main.cf</span>:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo postconf -e 'relay_domains = lists.example.com'</span>
<span class="cmd command">sudo postconf -e 'transport_maps = hash:/etc/postfix/transport'</span>
<span class="cmd command">sudo postconf -e 'mailman_destination_recipient_limit = 1'</span>
</pre></div>
<p class="para">No <span class="file filename">/etc/postfix/master.cf</span> cheque duas vezes se você possui o seguinte transporte:</p>
<div class="code"><pre class="contents ">mailman   unix  -       n       n       -       -       pipe
  flags=FR user=list argv=/usr/lib/mailman/bin/postfix-to-mailman.py
  ${nexthop} ${user}
</pre></div>
<p class="para">chama o script <span class="em emphasis">postfix-to-mailman.py</span> quando um email é entregue para a lista.</p>
<p class="para">Associa o domínio lists.example.com para o transporte do Mailman com o mapa de transporte. Edite o arquivo <span class="file filename">/etc/postfix/transport</span>:</p>
<div class="code"><pre class="contents ">lists.example.com      mailman:
</pre></div>
<p class="para">Agora crie o mapa de transporte do <span class="app application">Postfix</span> digitando o seguinte no terminal:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo postmap -v /etc/postfix/transport</span>
</pre></div>
<p class="para">Então reinicie o Postfix para habilitar as novas configurações:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo service postfix restart</span>
</pre></div>
</div></div>
</div></div>
<div class="sect3 sect" id="mailman-conf-exim4"><div class="inner">
<div class="hgroup"><h3 class="title">Exim4</h3></div>
<div class="region"><div class="contents">
<p class="para">Um vez que o Exim4 esteja instalado, você pode iniciar o servidor Exim usando o seguinte comando em um terminal:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo service exim4 start</span>
</pre></div>
<p class="para">Para que o mailman funcione em conjunto com o Exim4, você precisa configurar o Exim4. Como mencionado anteriormente, por padrão, o Exim4 usa múltiplos arquivos de configuração, de diferentes tipos. Para detalhes, por favor examine o site do <a href="http://www.exim.org" class="ulink" title="http://www.exim.org">Exim</a>. Para executar o mailman, devemos adicionar um novo arquivo de configuração para os seguintes tipos de configuração: <div class="list itemizedlist"><ul class="list itemizedlist compact">
<li class="list itemizedlist">
                <p class="para">Principal</p>
              </li>
<li class="list itemizedlist">
                <p class="para">Transporte</p>
              </li>
<li class="list itemizedlist">
                <p class="para">Roteador</p>
              </li>
</ul></div> O Exim cria um arquivo mestre de configuração através da ordenação de todos esses pequenos arquivos de configuração. Logo, a ordem destes arquivos de configuração é muito importante.</p>
</div></div>
</div></div>
<div class="sect3 sect" id="mailman-conf-main"><div class="inner">
<div class="hgroup"><h3 class="title">Principal</h3></div>
<div class="region"><div class="contents"><p class="para">Todos os arquivos que pertençam ao tipo principal são armazenados no diretório <span class="file filename">/etc/exim4/conf.d/main/</span>. Você pode adicionar o seguinte conteúdo a um novo arquivo, chamado <span class="file filename">04_exim4-config_mailman</span>: <div class="code"><pre class="contents "># início
# Diretório inicial para sua instalação do mailman -- tambem conhecido
# como diretório prefixo do Mailman directory.
# No Ubuntu isso deve ser "/var/lib/mailman"
# É geralmente o mesmo que ~mailman
MM_HOME=/var/lib/mailman
#
# Usuário e grupo para o Mailman, deve equivaler ao seu parâmetro 
# --with-mail-gid ao script "configura" do Mailman. O valor é normalmente
# "mailman"
MM_UID=list
MM_GID=list
#
# Domínios onde estão suas listas - lista separada por vírgulas
# você pode querer adicioná-los também ao local_domains
domainlist mm_domains=hostname.com
#
# -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

#
# Estes valores são derivados daqueles acima e você não deverá 
# precisar editá-los a não ser que você tenha bagunçado a sua instalação
# do mailman
#
# O caminho do script wrapper de email do Mailman
MM_WRAP=MM_HOME/mail/mailman
#
# O arquivo do arquivo de configuração da lista (usado como um arquivo
# requerido quando se verifica endereços de listas)
MM_LISTCHK=MM_HOME/lists/${lc::$local_part}/config.pck
# fim
</pre></div></p></div></div>
</div></div>
<div class="sect3 sect" id="mailman-conf-transport"><div class="inner">
<div class="hgroup"><h3 class="title">Transporte</h3></div>
<div class="region"><div class="contents"><p class="para">Todos os arquivos que pertençam ao tipo de transporte são armazenados no diretório <span class="file filename">/etc/exim4/conf.d/transport/</span>. Você pode adicionar o seguinte conteúdo a um novo arquivo chamado <span class="file filename"> 40_exim4-config_mailman</span>: <div class="code"><pre class="contents ">  mailman_transport:
   driver = pipe
   command = MM_WRAP \
               '${if def:local_part_suffix \
                     {${sg{$local_part_suffix}{-(\\w+)(\\+.*)?}{\$1}}} \
                     {post}}' \
               $local_part
    current_directory = MM_HOME
    home_directory = MM_HOME
    user = MM_UID
    group = MM_GID
</pre></div></p></div></div>
</div></div>
<div class="sect3 sect" id="mailman-conf-router"><div class="inner">
<div class="hgroup"><h3 class="title">Roteador</h3></div>
<div class="region"><div class="contents">
<p class="para">Todos os arquivos de configuração pertencentes ao tipo de roteamento são armazenados no diretório <span class="file filename">/etc/exim4/conf.d/router/</span>. Você pode adicionar o seguinte contéudo em um novo arquivo chamado <span class="file filename">101_exim4-config_mailman</span>: <div class="code"><pre class="contents ">  mailman_router:
   driver = accept
   require_files = MM_HOME/lists/$local_part/config.pck
   local_part_suffix_optional
   local_part_suffix = -bounces : -bounces+* : \
                       -confirm+* : -join : -leave : \
                       -owner : -request : -admin
   transport = mailman_transport
</pre></div></p>
<div class="note note-warning" title="Aviso"><div class="inner"><div class="region"><div class="contents">
<p class="para">A ordem dos arquivos de configuração principais e de transporte podem estar em qualquer ordem. Mas, a ordem dos arquivos de configuração de roteamento deve a mesma. Este arquivo particular deve aparecer antes do arquivo <span class="app application">200_exim4-config_primary</span>. Estes dois arquivos de configuração contêm o mesmo tipo de informação. O primeiro arquivo toma a precedência. Para mais detalhes, consulte, por favor, a seção das referências.</p>
</div></div></div></div>
</div></div>
</div></div>
<div class="sect3 sect" id="mailman-conf-mailman"><div class="inner">
<div class="hgroup"><h3 class="title">Mailman</h3></div>
<div class="region"><div class="contents">
<p class="para">Um vez que o mailman estiver instalado, você pode executa-lo utilizando o seguinte comando:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo service mailman start</span>
</pre></div>
<p class="para">Um vez que o mailman estiver instalado, você deve criar a lista de correio padrão. Execute o seguinte comando para criar a lista de correio:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo /usr/sbin/newlist mailman</span>
</pre></div>
<div class="code"><pre class="contents ">  Informe o endereço de e-mail da pessoa que administra a lista: bhuvan at ubuntu.com
  Senha inicial do mailman:
  Para finalizar a criação de sua lista de e-mail, você deve editar o arquivo <span class="file filename">/etc/aliases</span> (ou
  equivalente) adicionando as seguintes linhas, e possivelmente executando o
  programa `newaliases':

  ## lista de e-mail mailman
  mailman: "|/var/lib/mailman/mail/mailman post mailman"
  mailman-admin: "|/var/lib/mailman/mail/mailman admin mailman"
  mailman-bounces: "|/var/lib/mailman/mail/mailman bounces mailman"
  mailman-confirm: "|/var/lib/mailman/mail/mailman confirm mailman"
  mailman-join: "|/var/lib/mailman/mail/mailman join mailman"
  mailman-leave: "|/var/lib/mailman/mail/mailman leave mailman"
  mailman-owner: "|/var/lib/mailman/mail/mailman owner mailman"
  mailman-request: "|/var/lib/mailman/mail/mailman request mailman"
  mailman-subscribe: "|/var/lib/mailman/mail/mailman subscribe mailman"
  mailman-unsubscribe: "|/var/lib/mailman/mail/mailman unsubscribe mailman"

  Aperte enter para notificar o proprietário mailman...

  # 
</pre></div>
<p class="para">Nós configuramos o Postfix ou o Exim4 para reconhecer todos os emails do mailman. Então, não é obrigatório fazer alguma entrada nova no <span class="file filename">/etc/aliases</span>.Se você fez alguma alteração nos arquivos de configuração. por favor assegure-se de reiniciar esses serviços antes de continuar para próxima seção.</p>
<div class="note" title="Nota"><div class="inner"><div class="region"><div class="contents">
         <p class="para">O Exim4 não utiliza os apelidos acima para encaminhar mensagens para o Mailman, por utilizar uma abordagem <span class="em emphasis">discover</span>. Para suprimir os apelidos na criação da lista, você pode adicionar a linha <span class="em emphasis">MTA=None</span> no arquivo de configuração do Mailman, <span class="file filename">/etc/mailman/mm_cfg.py</span>.</p>
         </div></div></div></div>
</div></div>
</div></div>
</div>
</div></div>
<div class="sect2 sect" id="mailman-admin"><div class="inner">
<div class="hgroup"><h2 class="title">Administração</h2></div>
<div class="region"><div class="contents">
<p class="para">Nós assumimos que você tem uma instalação padrão. Os scripts cgi do mailman estão no diretório <span class="app application">/usr/lib/cgi-bin/mailman/</span>. Mailman provê a facilidade de administração baseada em web. Para acessar essa página, aponte seu navegador para  a seguinte url:</p>
<p class="para">http://hostname/cgi-bin/mailman/admin</p>
<p class="para">A lista de e-mail padrão, <span class="em emphasis">mailman</span>, irá aparecer nessa tela. Se você clicar no nome da lista de e-mail, isso irá solicitar a você a senha e autenticação. Se você entrar com a senha correta, você será capaz de alterar as configurações administrativas da lista de e-mail. Você pode criar uma nova lista de email usando a linha de comando (<span class="cmd command">/usr/sbin/newlist</span>). Alternativamente, você pode criar uma nova lista de email usando a interface web.</p>
</div></div>
</div></div>
<div class="sect2 sect" id="mailman-users"><div class="inner">
<div class="hgroup"><h2 class="title">Usuários</h2></div>
<div class="region"><div class="contents">
<p class="para">O Mailman fornece uma interface web aos usuários. Para acessar essa página, aponte seu navegador para a seguinte URL:</p>
<p class="para">http://hostname/cgi-bin/mailman/listinfo</p>
<p class="para">A lista de e-mail padrão, <span class="em emphasis">mailman</span>, aparecerá nesta tela. Se você clicar no nome da lista, será apresentado o formulário para inscrição. Você pode informar se endereço de e-mail, nome (opcional), e senha para se inscrever. Um convite será enviado a você por e-mail. Você pode seguir as instruções no e-mail para se inscrever.</p>
</div></div>
</div></div>
<div class="sect2 sect" id="mailman-references"><div class="inner">
<div class="hgroup"><h2 class="title">Referências</h2></div>
<div class="region"><div class="contents">
<p class="para">
<a href="http://www.list.org/mailman-install/index.html" class="ulink" title="http://www.list.org/mailman-install/index.html">GNU Mailman - Instalação Manual</a>
</p>
<p class="para">
<a href="http://www.exim.org/howto/mailman21.html" class="ulink" title="http://www.exim.org/howto/mailman21.html">HOWTO - Usando o Exim 4 e oMailman 2.1 juntos</a>
</p>
<p class="para">Também, veja a página <a href="https://help.ubuntu.com/community/Mailman" class="ulink" title="https://help.ubuntu.com/community/Mailman">Mailman Ubuntu Wiki</a>.</p>
</div></div>
</div></div>
</div>
<div class="links nextlinks">
<a class="nextlinks-prev" href="dovecot-server.html" title="Servidor Dovecot">Anterior</a><a class="nextlinks-next" href="mail-filtering.html" title="Filtro de Correio">Próximo</a>
</div>
<div class="clear"></div>
</div>
<div id="pagebottom"></div>
</div></div>
</div>
<div id="footer"><p>The material in this document is available under a free license, see <a href="../../legal.html">Legal</a> for details.<br>
          For information on contributing see the <a href="https://wiki.ubuntu.com/DocumentationTeam">Ubuntu Documentation Team wiki page</a>.
          To report errors in this serverguide documentation, <a href="https://bugs.launchpad.net/serverguide">file a bug report</a>.</p></div>
</div>
</body>
</html>
