<!DOCTYPE html>
<html lang=it>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>MySQL</title>
<link rel="stylesheet" type="text/css" href="it.css">
<script type="text/javascript" src="jquery.js"></script><script type="text/javascript" src="jquery.syntax.js"></script><script type="text/javascript" src="yelp.js"></script>
</head>
<body id="home">
<script src="https://ssl.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">
        _uacct = "UA-1018242-8";
        urchinTracker();
      </script><div id="container">
<div id="container-inner">
<div id="mothership"><ul>
<li><a href="http://www.ubuntu.com/partners">Partners</a></li>
<li><a href="http://www.ubuntu.com/support">Support</a></li>
<li><a href="http://www.ubuntu.com/community">Community</a></li>
<li><a href="http://www.ubuntu.com">Ubuntu.com</a></li>
</ul></div>
<div id="header">
<h1 id="ubuntu-header"><a href="https://help.ubuntu.com/">Ubuntu Documentation</a></h1>
<ul id="main-menu">
<li><a class="main-menu-item current" href="../../">Official Documentation</a></li>
<li><a href="https://help.ubuntu.com/community/CommunityHelpWiki">Community Help Wiki</a></li>
<li><a href="http://community.ubuntu.com/contribute/documentation/">Contribute</a></li>
</ul>
</div>
<div id="menu-search"><div id="search-box">
<noscript><form action="https://www.google.com/cse" id="cse-search-box"><div>
<input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq"><input type="hidden" name="ie" value="UTF-8"><input type="text" name="q" size="21"><input type="submit" name="sa" value="Search">
</div></form></noscript>
<script>
                document.write('<form action="../../search.html" id="cse-search-box">');
                document.write('  <div>');
                document.write('    <input type="hidden" name="cof" value="FORID:9">');
                document.write('    <input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq">');
                document.write('    <input type="hidden" name="ie" value="UTF-8">');
                document.write('    <input type="text" name="q" size="21">');
                document.write('    <input type="submit" name="sa" value="Search">');
                document.write('  </div>');
                document.write('</form>');
              </script>
</div></div>
<div class="trails"><div class="trail">
<a href="../../14.04" class="trail">Ubuntu 14.04</a> » <a class="trail" href="index.html" title="Guida a Ubuntu Server">Guida a Ubuntu Server</a> » <a class="trail" href="databases.html" title="Database">Database</a> » </div></div>
<div id="cwt-content" class="clearfix content-area"><div id="page">
<div id="content">
<div class="links nextlinks">
<a class="nextlinks-prev" href="databases.html" title="Database">Indietro</a><a class="nextlinks-next" href="postgresql.html" title="PostgreSQL">Avanti</a>
</div>
<div class="hgroup"><h1 class="title">MySQL</h1></div>
<div class="region">
<div class="contents"><p class="para"><span class="app application">MySQL</span> è un veloce e robusto database SQL multi-thread e multi-utente. È concepito per funzionare in situazioni critiche, sistemi di produzione a elevato carico e anche per essere inserito in software destinato alla distribuzione di massa.</p></div>
<div class="links sectionlinks" role="navigation"><ul>
<li class="links"><a class="xref" href="mysql.html#mysql-installation" title="Installazione">Installazione</a></li>
<li class="links"><a class="xref" href="mysql.html#mysql-configuration" title="Configurazione">Configurazione</a></li>
<li class="links"><a class="xref" href="mysql.html#mysql-engines" title="Macchine per database">Macchine per database</a></li>
<li class="links"><a class="xref" href="mysql.html#mysql-advanced" title="Configurazione avanzata">Configurazione avanzata</a></li>
<li class="links"><a class="xref" href="mysql.html#mysql-resources" title="Risorse">Risorse</a></li>
</ul></div>
<div class="sect2 sect" id="mysql-installation"><div class="inner">
<div class="hgroup"><h2 class="title">Installazione</h2></div>
<div class="region"><div class="contents">
<p class="para">Per installare MySQL, eseguire il seguente comando dal terminale:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo apt-get install mysql-server</span>
</pre></div>
<p class="para">Durante l'installazione viene chiesto di inserire una password per l'utente root di MySQL.</p>
<p class="para">Una volta completata l'installazione, il server MySQL dovrebbe avviarsi automaticamente. È possibile digitare i seguenti comandi in un terminale per controllare se il server è in esecuzione:</p>
<p class="para">
<div class="screen"><pre class="contents "><span class="cmd command">sudo netstat -tap | grep mysql</span>
</pre></div>
                            </p>
<p class="para">L'output del comando precedente dovrebbe essere:</p>
<div class="code"><pre class="contents ">tcp 0 0 localhost:mysql *:* LISTEN 2556/mysqld
</pre></div>
<p class="para">Se il server non funziona correttamente, è possibile digitare il seguente comando per avviarlo:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo service mysql restart</span>
</pre></div>
</div></div>
</div></div>
<div class="sect2 sect" id="mysql-configuration"><div class="inner">
<div class="hgroup"><h2 class="title">Configurazione</h2></div>
<div class="region"><div class="contents">
<p class="para">Per configurare le impostazioni di base (file di registrazione, numero porta, ecc...), è possibile modificare il file <span class="file filename">/etc/mysql/my.cnf</span>. Per esempio, per configurare MySQL affinché ascolti le connessioni dagli host nella rete, modificare la direttiva <span class="em emphasis">bind-address</span> con l'indirizzo IP del server:</p>
<div class="code"><pre class="contents ">bind-address            = 192.168.0.5
</pre></div>
<div class="note" title="Annotazione"><div class="inner"><div class="region"><div class="contents">
                                <p class="para">Sostituire 192.168.0.5 con l'indirizzo appropriato.</p>
	                         </div></div></div></div>
<p class="para">Dopo aver modificato <span class="file filename">/etc/mysql/my.cnf</span>, è necessario riavviare il demone MySQL:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo service mysql restart</span>
</pre></div>
<p class="para">Per modificare la password <span class="em emphasis">root</span> di MySQL, in un terminale digitare:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo dpkg-reconfigure mysql-server-5.5</span>
</pre></div>
<p class="para">Il demone MySQL viene arrestato, e viene chiesto di inserire una nuova password.</p>
</div></div>
</div></div>
<div class="sect2 sect" id="mysql-engines"><div class="inner">
<div class="hgroup"><h2 class="title">Macchine per database</h2></div>
<div class="region"><div class="contents">
<p class="para">Nonostante la configurazione predefinita di MySQL fornita dai pacchetti Ubuntu sia perfettamente funzionante e fornisca buone prestazioni, sono necessarie alcune considerazioni prima di proseguire.</p>
<p class="para">MySQL è progettato per memorizzare i dati in modi diversi: questi metodi sono riferiti sia al database che alle macchine di salvataggio dei dati; ci sono principalmente due macchine che possono risultare interessanti: InnoDB e MyISAM. Le macchine di memorizzazione sono trasparenti per l'utente finale: MySQL funzionerà diversamente sotto la superficie ma, indipendentemente da quale macchina stia usando, l'interazione con il database sarà la stessa.</p>
<p class="para">Ogni macchina ha vantaggi e svantaggi.</p>
<p class="para">È possibile, e potrebbe portare a dei vantaggi, combinare e confrontare le macchine per database a livello di tabella, ma questo riduce l'effettività dell'ottimizzazione delle prestazioni, in quanto si divideranno le risorse tra due macchine, invece di dedicarsi a solo una di esse.</p>
<div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
                                    <p class="para">MyISAM è il più vecchio dei due, in certe circostanze può essere più veloce di InnoDB e preferisce un carico di lavoro in sola lettura. Alcune applicazioni web sono state calibrate su MyISAM (sebbene ciò non implica che sarebbero più lente con InnoDB). MyISAM supporta anche il tipo di dati FULLTEXT, che consente di effetture veloci ricerche in grandi quantità di dati testuali. Tuttavia MyISAM può effettuare il lock di scrittura solo a livello dell'intera tabella: ciò significa che solo un processo per volta può aggiornare una tabella e quando le applicazioni che usano la tabella aumentano, ciò può costituire un ostacolo. Manca anche della funzione di journaling, il che rende più difficile il recupero dei dati dopo un crash. Il seguente link fornisce alcune considerazioni sull'uso di <a href="http://www.mysqlperformanceblog.com/2006/06/17/using-myisam-in-production/" class="ulink" title="http://www.mysqlperformanceblog.com/2006/06/17/using-myisam-in-production/">MyISAM su un database in ambiente di produzione</a>.</p>
                                </li>
<li class="list itemizedlist">
                                    <p class="para">InnoDB è una macchina per database più moderna, progettata per essere <a href="http://en.wikipedia.org/wiki/ACID" class="ulink" title="http://en.wikipedia.org/wiki/ACID">conforme «ACID»</a> e ciò garantisce che le transazioni del database siano processate in modo affidabile. Il lock di scrittura può essere gestito a livello di riga entro una tabella e questo significa che possono essere effettuati contemporaneamente aggiornamenti multipli su una singola tabella. La cache dei dati è anche gestita in memoria all'interno della macchina, consentendo la stessa a un più efficiente livello di riga piuttosto che per blocco di file. Per conformarsi alle proprietà «ACID», il journaling di tutte le transazioni per le principali tabelle è effettuato in maniera indipendente. Questo consente un recupero dei dati più affidabile, in quanto può essere controllata la consistenza dei dati.</p>
                                </li>
</ul></div>
<p class="para">MySQL 5.5 è la macchina predefinita e si suggerisce di usare questa anzichè MyISAM, a meno che non ci sia uno specifico bisogno delle caratteristiche proprie di quest'ultima macchina.</p>
</div></div>
</div></div>
<div class="sect2 sect" id="mysql-advanced"><div class="inner">
<div class="hgroup"><h2 class="title">Configurazione avanzata</h2></div>
<div class="region">
<div class="contents"></div>
<div class="sect3 sect" id="mysql-tuned-mycnf"><div class="inner">
<div class="hgroup"><h3 class="title">Creare un file my.cnf calibrato</h3></div>
<div class="region"><div class="contents">
<p class="para">È possibile regolare diversi parametri nel file di configurazione di MySQL, per migliorare le prestazioni del server. Per un'impostazione iniziale, può essere utile lo <a href="http://tools.percona.com/members/wizard" class="ulink" title="http://tools.percona.com/members/wizard">strumento di generazione del file my.cnf di Percona</a>. Questo strumento sarà di ausilio nella creazione di un file my.cnf ottimizzato per le caratteristiche specifiche del server in uso e le necessità dell'utente.</p>
<p class="para"><span class="em emphasis">Non</span> sostituire il file my.cnf esistente con quello di Percona se sono stati già caricati dati nel database. Alcuni dei cambiamenti apportati al file saranno incompatibili, in quanto alterano la maniera in cui i dati vengono memorizzati sul disco fisso e quindi non sarà possibile avviare MySQL. Se è necessario usarlo, e nel database sono già presenti dei dati, è necessario effettuare un mysqldump e ricaricare: <div class="screen"><pre class="contents ">mysqldump --all-databases --routines -u root -p &gt; ~/fulldump.sql
</pre></div> Viene richiesta la password di amministratore prima di creare una copia dei dati. Assicurarsi che nessun altro utente o processo stiano usando il database durante questa operazione. A seconda della quantità di dati presenti nel database, l'operazione potrebbe richiedere un certo periodo di tempo; durante il procedimento sullo schermo non si vedrà nulla.</p>
<p class="para">Una volta completato lo scarico, chiudere MySQL: <div class="screen"><pre class="contents "><span class="cmd command">sudo service mysql stop</span>
</pre></div> Effettuare un backup del file my.cnf originale e sostituirlo con quello nuovo: <div class="screen"><pre class="contents "><span class="cmd command">sudo cp /etc/mysql/my.cnf /etc/mysql/my.cnf.backup</span>
<span class="cmd command">sudo cp /path/to/new/my.cnf /etc/mysql/my.cnf</span>
</pre></div> Quindi cancellare e reinizializzare il database, assicurandosi che i diritti di proprietà siano corretti prima di riavviare MySQL: <div class="screen"><pre class="contents "><span class="cmd command">sudo rm -rf /var/lib/mysql/*</span>
<span class="cmd command">sudo mysql_install_db</span>
<span class="cmd command">sudo chown -R mysql: /var/lib/mysql</span>
<span class="cmd command">sudo service mysql start</span>
</pre></div> Rimane solo da reimportare i dati; per avere un'idea dello stato di avanzamento del processo può essere usata l'utilità «pv», la pipe di visualizzazione. Quanto segue illustra come installare e usare «pv» in questo caso, ma se si preferisce non usarlo, è possibile sostituire «pv» con «cat» nel seguente comando. Ignorare gli orari ETA prodotti da «pv», perché sono basati sulla media dei tempi necessari per gestire ogni riga del file, ma la velocità d'inserimento può variare i maniera considerevole da riga a riga con mysqldump: <div class="screen"><pre class="contents "><span class="cmd command">sudo apt-get install pv</span>
<span class="cmd command">pv ~/fulldump.sql | mysql</span>
</pre></div> Una volta completato, è tutto pronto a partire!</p>
<div class="note" title="Annotazione"><div class="inner"><div class="region"><div class="contents">
                                        <p class="para">Questo non è necessario per tutte le modifiche di my.cnf; molte delle variabili da modificare per migliorare le prestazioni sono regolabili anche durante il funzionamento del server. Come sempre, assicurarsi di avere una buona copia di backup dei file di configurazione e dei dati, prima di apportare modifiche.</p>
                                    </div></div></div></div>
</div></div>
</div></div>
<div class="sect3 sect" id="mysql-tuner"><div class="inner">
<div class="hgroup"><h3 class="title">MySQL Tuner</h3></div>
<div class="region"><div class="contents">
<p class="para"><span class="app application">MySQL Tuner</span> è un utile strumento che si connette a un'istanza MySQL in esecuzione e offre suggerimenti su come ottimizzarne la configurazione per l'attuale carico di lavoro. Quanto più esteso è il periodo di funzionamento del server, tanto migliori risulteranno i suggerimenti di mysqltuner: in un ambiente di produzione, far trascorrere almeno 24 ore prima di avviare lo strumento. È possibile scaricare e installare mysqltuner dai repository Ubuntu: <div class="screen"><pre class="contents "><span class="cmd command">sudo apt-get install mysqltuner</span>
</pre></div> Dopo averlo installato, lanciarlo: <div class="screen"><pre class="contents "><span class="cmd command">mysqltuner</span>
</pre></div> e aspettare il rapporto finale. La sezione superiore fornisce infomrazioni generali sul server di database, e la parte conclusiva i suggerimenti sulle regolazioni del file my.cnf, molte delle quali possono essere effettuate durante il funzionamento del server, senza necessità di riavvio; consultare la documentazione ufficiale di MySQL (link nella sezione Risorse) per informazioni sulle variabili rilevanti da modificare in produzione. Quanto segue è parte di un rapporto di esempio in un database di produzione che evidenzia benefici derivanti da un aumento della cache per le query: <div class="screen"><pre class="contents ">-------- Recommendations -----------------------------------------------------
General recommendations:
    Run OPTIMIZE TABLE to defragment tables for better performance
    Increase table_cache gradually to avoid file descriptor limits
Variables to adjust:
    key_buffer_size (&gt; 1.4G)
    query_cache_size (&gt; 32M)
    table_cache (&gt; 64)
    innodb_buffer_pool_size (&gt;= 22G)
</pre></div></p>
<p class="para">Un commento finale sulla regolazione dei database: nonostante si possa generalmente affermare che determinate impostazioni siano le migliori, le prestazioni possono variare da un'applicazione all'altra. Per esempio, ciò che funziona meglio per Wordpress potrebbe non esserlo per Drupla, Joomla o software proprietario. Le prestazioni dipendono dai tipi di query, dall'uso di indici, dall'efficienza della progettazione del database e così via; può essere utile cercare suggerimenti sulla regolazione del database basati sulle applicazioni in uso. Raggiunto un determinato livello, qualunque regolazione effettuata può solo condurre a miglioramenti minimi e sarebbe meglio migliorare l'applicazione o cercare di potenziare l'ambiente del database, sia usando hardware più potente che aggiungendo server secondari.</p>
</div></div>
</div></div>
</div>
</div></div>
<div class="sect2 sect" id="mysql-resources"><div class="inner">
<div class="hgroup"><h2 class="title">Risorse</h2></div>
<div class="region"><div class="contents"><div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
                                <p class="para">Per maggiori informazioni, consultare <a href="http://www.mysql.com/" class="ulink" title="http://www.mysql.com/">il sito web di MySQL</a>.</p>
                            </li>
<li class="list itemizedlist">
                                <p class="para">Documentazione completa è disponibile sia online che in formati offline nel portale degli <a href="http://dev.mysql.com/doc/" class="ulink" title="http://dev.mysql.com/doc/"> Sviluppatori di MySQL</a>.</p>
                           </li>
<li class="list itemizedlist">
                               <p class="para">Per informazioni generali su SQL, consultare <a href="http://www.informit.com/store/product.aspx?isbn=0768664128" class="ulink" title="http://www.informit.com/store/product.aspx?isbn=0768664128"> Using SQL Special Edition</a> di Rafe Colburn.</p>
                           </li>
<li class="list itemizedlist">
                               <p class="para">Ulteriori informazioni sono disponibili nella <a href="https://help.ubuntu.com/community/ApacheMySQLPHP" class="ulink" title="https://help.ubuntu.com/community/ApacheMySQLPHP">documentazione online</a>.</p>
                           </li>
</ul></div></div></div>
</div></div>
</div>
<div class="links nextlinks">
<a class="nextlinks-prev" href="databases.html" title="Database">Indietro</a><a class="nextlinks-next" href="postgresql.html" title="PostgreSQL">Avanti</a>
</div>
<div class="clear"></div>
</div>
<div id="pagebottom"></div>
</div></div>
</div>
<div id="footer"><p>The material in this document is available under a free license, see <a href="../../legal.html">Legal</a> for details.<br>
          For information on contributing see the <a href="https://wiki.ubuntu.com/DocumentationTeam">Ubuntu Documentation Team wiki page</a>.
          To report errors in this serverguide documentation, <a href="https://bugs.launchpad.net/serverguide">file a bug report</a>.</p></div>
</div>
</body>
</html>
