<!DOCTYPE html>
<html lang=pt>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Gestão de utilizadores</title>
<link rel="stylesheet" type="text/css" href="pt.css">
<script type="text/javascript" src="jquery.js"></script><script type="text/javascript" src="jquery.syntax.js"></script><script type="text/javascript" src="yelp.js"></script>
</head>
<body id="home">
<script src="https://ssl.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">
        _uacct = "UA-1018242-8";
        urchinTracker();
      </script><div id="container">
<div id="container-inner">
<div id="mothership"><ul>
<li><a href="http://www.ubuntu.com/partners">Partners</a></li>
<li><a href="http://www.ubuntu.com/support">Support</a></li>
<li><a href="http://www.ubuntu.com/community">Community</a></li>
<li><a href="http://www.ubuntu.com">Ubuntu.com</a></li>
</ul></div>
<div id="header">
<h1 id="ubuntu-header"><a href="https://help.ubuntu.com/">Ubuntu Documentation</a></h1>
<ul id="main-menu">
<li><a class="main-menu-item current" href="../../">Official Documentation</a></li>
<li><a href="https://help.ubuntu.com/community/CommunityHelpWiki">Community Help Wiki</a></li>
<li><a href="http://community.ubuntu.com/contribute/documentation/">Contribute</a></li>
</ul>
</div>
<div id="menu-search"><div id="search-box">
<noscript><form action="https://www.google.com/cse" id="cse-search-box"><div>
<input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq"><input type="hidden" name="ie" value="UTF-8"><input type="text" name="q" size="21"><input type="submit" name="sa" value="Search">
</div></form></noscript>
<script>
                document.write('<form action="../../search.html" id="cse-search-box">');
                document.write('  <div>');
                document.write('    <input type="hidden" name="cof" value="FORID:9">');
                document.write('    <input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq">');
                document.write('    <input type="hidden" name="ie" value="UTF-8">');
                document.write('    <input type="text" name="q" size="21">');
                document.write('    <input type="submit" name="sa" value="Search">');
                document.write('  </div>');
                document.write('</form>');
              </script>
</div></div>
<div class="trails"><div class="trail">
<a href="../../14.04" class="trail">Ubuntu 14.04</a> » <a class="trail" href="index.html" title="Guia do Servidor Ubuntu">Guia do Servidor Ubuntu</a> » <a class="trail" href="security.html" title="Segurança">Segurança</a> » </div></div>
<div id="cwt-content" class="clearfix content-area"><div id="page">
<div id="content">
<div class="links nextlinks">
<a class="nextlinks-prev" href="security.html" title="Segurança">Anterior</a><a class="nextlinks-next" href="console-security.html" title="Segurança da consola">Seguinte</a>
</div>
<div class="hgroup"><h1 class="title">Gestão de utilizadores</h1></div>
<div class="region">
<div class="contents"><p class="para">A gestão de utilizadores é um elemento chave de um sistema seguro. Geralmente, a gestão ineficaz de utilizadores e privilégios leva a que os sistemas sejam comprometidos. Consequentemente, é importante que perceba como pode proteger o seu servidor usando técnicas simples e eficazes de gestão de utilizadores.</p></div>
<div class="links sectionlinks" role="navigation"><ul>
<li class="links"><a class="xref" href="user-management.html#where-is-root" title="Onde está o root?">Onde está o root?</a></li>
<li class="links"><a class="xref" href="user-management.html#adding-deleting-users" title="Adicionar e remover utilizadores">Adicionar e remover utilizadores</a></li>
<li class="links"><a class="xref" href="user-management.html#user-profile-security" title="Segurança do perfil de utilizador">Segurança do perfil de utilizador</a></li>
<li class="links"><a class="xref" href="user-management.html#password-policy" title="Password Policy">Password Policy</a></li>
<li class="links"><a class="xref" href="user-management.html#other-security-considerations" title="Outras considerações de segurança">Outras considerações de segurança</a></li>
</ul></div>
<div class="sect2 sect" id="where-is-root"><div class="inner">
<div class="hgroup"><h2 class="title">Onde está o root?</h2></div>
<div class="region"><div class="contents">
<p class="para">
	Ubuntu developers made a conscientious decision to disable the administrative root account by default in all Ubuntu installations. This does not mean that the root account has been deleted or that it may not be accessed. It merely has been given a password which matches no possible encrypted value, therefore may not log in directly by itself.
	</p>
<p class="para">
	Instead, users are encouraged to make use of a tool by the name of <span class="app application">sudo</span> to carry out system administrative duties.  <span class="app application">Sudo</span> allows an authorized user to  temporarily elevate their privileges using their own password instead of having to know the password belonging to the root account. This simple yet effective methodology provides accountability for all user actions, and gives the administrator granular control over which actions a user can perform with said privileges.   
	</p>
<div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
		<p class="para">Se, por alguma razão, desejar activar a conta root, bastará atribuir-lhe uma senha:</p>
		<div class="note" title="Nota"><div class="inner"><div class="region"><div class="contents">
		<p class="para">
		Configurations with root passwords are not supported.
		</p>
		</div></div></div></div>
<div class="screen"><pre class="contents "><span class="cmd command">sudo passwd</span>
</pre></div>
		<p class="para">O sudo irá primeiro pedir a sua senha e depois irá pedir que apresente uma nova senha para a conta root, conforme podemos ver abaixo:</p>
<div class="screen"><pre class="contents "><span class="output computeroutput">[sudo] password for username:</span> <span class="input userinput">(digite a sua senha)</span>
<span class="output computeroutput">Enter new UNIX password:</span> <span class="input userinput">(digite uma nova senha para root)</span>
<span class="output computeroutput">Retype new UNIX password:</span> <span class="input userinput">(repita a nova senha para root)</span>
<span class="output computeroutput">passwd: password updated successfully</span>
</pre></div>
		</li>
<li class="list itemizedlist">
		<p class="para">
		To disable the root account password, use the following passwd syntax:
		</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo passwd -l root</span>
</pre></div>
		<p class="para">
        However, to disable the root account itself, use the following command:
		</p>
<div class="screen"><pre class="contents "><span class="cmd command">usermod --expiredate 1</span>
</pre></div>
		</li>
<li class="list itemizedlist">
		<p class="para">
		You should read more on <span class="app application">Sudo</span> by reading the man page:
		</p>
<div class="screen"><pre class="contents "><span class="cmd command">man sudo</span>
</pre></div>
		</li>
</ul></div>
<p class="para">
			By default, the initial user created by the Ubuntu installer is a member of the group "<span class="em emphasis">sudo</span>" which is added to the file <span class="file filename">/etc/sudoers</span> as an authorized sudo user. If you wish to give any other account full root access through <span class="app application">sudo</span>, simply add them to the <span class="em emphasis">sudo</span> group.
		</p>
</div></div>
</div></div>
<div class="sect2 sect" id="adding-deleting-users"><div class="inner">
<div class="hgroup"><h2 class="title">Adicionar e remover utilizadores</h2></div>
<div class="region"><div class="contents">
<p class="para">
	The process for managing local users and groups is straightforward and differs very little from most other GNU/Linux operating systems. Ubuntu and other Debian based distributions encourage the use of the "adduser" package for account management.
	</p>
<div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
		<p class="para">
		To add a user account, use the following syntax, and follow the prompts to give the account a password and identifiable characteristics, such as a full name, phone number, etc.
		</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo adduser nomedoutilizador</span>
</pre></div>
		</li>
<li class="list itemizedlist">
		<p class="para">Para remover uma conta de utilizador e o seu grupo primário, use a seguinte sintaxe:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo deluser nomedoutilizador</span>
</pre></div>
		<p class="para">A remoção de uma conta de utilizador não remove a respectiva pasta pessoal. Cabe-lhe a si remover a pasta manualmente ou não, consoante as políticas de retenção de dados aplicáveis.</p>
		<p class="para">Lembre-se que qualquer utilizador que seja adicionado mais tarde e que tenha o mesmo UID/GID do utilizador anterior poderá aceder a estas pasta se você não tomar as precauções necessárias.</p>
		<p class="para">Pode mudar estes valores UID/GID para algo mais apropriado, como a conta root, e talvez mover a pasta para evitar conflitos futuros:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo chown -R root:root /home/nomedoutilizador/</span>
<span class="cmd command">sudo mkdir /home/utilizadores_arquivados/</span>
<span class="cmd command">sudo mv /home/nomedoutilizador /home/utilizadores_arquivados/</span>
</pre></div>
		</li>
<li class="list itemizedlist">
		<p class="para">Para bloquear ou desbloquear temporariamente uma conta de utilizador use, respectivamente, a seguinte sintaxe:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo passwd -l nomedoutilizador</span>
<span class="cmd command">sudo passwd -u nomedoutilizador</span>
</pre></div>
		</li>
<li class="list itemizedlist">
		<p class="para">Para adicionar ou remover um grupo personalizado use, respectivamente, a seguinte sintaxe:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo addgroup nomedogrupo</span>
<span class="cmd command">sudo delgroup nomedogrupo</span>
</pre></div>
		</li>
<li class="list itemizedlist">
		<p class="para">Para adicionar um utilizador ao grupo, use a seguinte sintaxe:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo adduser nomedoutilizador nomedogrupo</span>
</pre></div>
		</li>
</ul></div>
</div></div>
</div></div>
<div class="sect2 sect" id="user-profile-security"><div class="inner">
<div class="hgroup"><h2 class="title">Segurança do perfil de utilizador</h2></div>
<div class="region"><div class="contents">
<p class="para">
	When a new user is created, the adduser utility creates a brand new home directory named <span class="file filename">/home/username</span>. The default profile is modeled after the contents found in the directory of <span class="file filename">/etc/skel</span>, which includes all profile basics.  
	</p>
<p class="para">Se o seu servidor possuir diversos utilizadores, deverá avaliar com cuidado as permissões das pastas pessoais para garantir a confidencialidade. Por defeito, no Ubuntu as pastas pessoais são criadas com permissões de leitura e execução 'todos'. Isto significa que todos os utilizadores podem navegar e aceder aos conteúdos das pastas pessoais dos outros utilizadores. Isto pode não ser adequado no seu caso.</p>
<div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
		<p class="para">
		To verify your current user home directory permissions, use the following syntax:
		</p>
<div class="screen"><pre class="contents "><span class="cmd command">ls -ld /home/nomedoutilizador</span>
</pre></div>
		<p class="para">The following output shows that the directory <span class="file filename">/home/username</span> has world-readable permissions:
		</p>
<div class="screen"><pre class="contents "><span class="output computeroutput">drwxr-xr-x 2 nomedoutilizador nomedoutilizador 4096 2007-10-02 20:03 nomedoutilizador</span>
</pre></div>
		</li>
<li class="list itemizedlist">
		<p class="para">
		You can remove the world readable-permissions using the following syntax:
		</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo chmod 0750 /home/nomedoutilizador</span>
</pre></div>
		<div class="note" title="Nota"><div class="inner"><div class="region"><div class="contents">
		<p class="para">Algumas pessoas tendem a usar a opção recursiva (-R) indiscriminadamente, a qual modifica todas as sub-pasta e ficheiros, mas tal não é necessário e pode criar resultados indesejados. A protecção da pasta principal é suficiente para evitar o acesso não autorizada a tudo o que esteja dentro dessa pasta.</p>
		</div></div></div></div>
		<p class="para">Uma opção muito mais eficiente consiste em modificar as permissões globais por omissão do <span class="app application">adduser</span> relativamente à criação de pastas pessoais. Para que todas as novas pastas pessoais recebam as permissões correctas, basta editar o ficheiro <span class="file filename">/etc/adduser.conf</span> e modificar a variável <span class="code varname">DIR_MODE</span> para o valor apropriado.</p>
<div class="code"><pre class="contents ">DIR_MODE=0750
</pre></div>
		</li>
<li class="list itemizedlist">
		<p class="para">Depois de corrigir as permissões de pasta usando um dos métodos descritos acima, verifique os resultados usando a seguinte sintaxe:</p>
<div class="screen"><pre class="contents "><span class="cmd command">ls -ld /home/nomedoutilizador</span>
</pre></div>
		<p class="para">The results below show that world-readable permissions have been removed:
		</p>
<div class="screen"><pre class="contents "><span class="output computeroutput">drwxr-x--- 2 nomedoutilizador nomedoutilizador 4096 2007-10-02 20:03 nomedoutilizador</span>
</pre></div>
		</li>
</ul></div>
</div></div>
</div></div>
<div class="sect2 sect" id="password-policy"><div class="inner">
<div class="hgroup"><h2 class="title">Password Policy</h2></div>
<div class="region">
<div class="contents"><p class="para">Um política de senha forte é um dos aspectos mais importantes da sua postura de segurança. Muitos acessos não autorizados resulta de simples ataques de força bruta e dicionário contra senhas fracas. Se pretende oferecer qualquer forma de acesso remoto baseado no seu sistema de senhas local, defina adequadamente os requisitos mínimos de complexidade da senha, o tempo máximo de vida das senhas e a frequência das auditorias aos seus sistemas de autenticação.</p></div>
<div class="sect3 sect" id="minimum-password-length"><div class="inner">
<div class="hgroup"><h3 class="title">Tamanho mínimo da senha</h3></div>
<div class="region"><div class="contents">
<p class="para">
	By default, Ubuntu requires a minimum password length of 6 characters, as well as some basic entropy checks. These values are controlled in the file <span class="file filename">/etc/pam.d/common-password</span>, which is outlined below.
	</p>
<div class="code"><pre class="contents ">password        [success=1 default=ignore]      pam_unix.so obscure sha512
</pre></div>
<p class="para">
If you would like to adjust the minimum length to 8 characters, change the appropriate variable to min=8. The modification is outlined below.
	</p>
<div class="code"><pre class="contents ">password        [success=1 default=ignore]      pam_unix.so obscure sha512 minlen=8
</pre></div>
<div class="note" title="Nota"><div class="inner"><div class="region"><div class="contents">
                <p class="para">
                Basic password entropy checks and minimum length rules do not apply to the administrator using sudo level commands to setup a new user.
                </p>
                </div></div></div></div>
</div></div>
</div></div>
<div class="sect3 sect" id="password-expiration"><div class="inner">
<div class="hgroup"><h3 class="title">Duração da senha</h3></div>
<div class="region"><div class="contents">
<p class="para">Quando cria uma conta de utilizador, deve estabelecer a duração mínima e máxima da senha, para forçar os utilizadores a mudar a senha quando esta atinge a duração máxima.</p>
<div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
		<p class="para">Pode verificar facilmente o estado actual de uma conta de utilizador, usando a seguinte sintaxe:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo chage -l username</span>
</pre></div>
		<p class="para">O resultado abaixo apresenta alguns elementos interessantes sobre a conta de utilizador, nomeadamente a inexistência de políticas de segurança de senha:</p>
<div class="screen"><pre class="contents "><span class="output computeroutput">Last password change                                    : Jan 20, 2015
Password expires                                        : never
Password inactive                                       : never
Account expires                                         : never
Minimum number of days between password change          : 0
Maximum number of days between password change          : 99999
Number of days of warning before password expires       : 7</span>
</pre></div>
		</li>
<li class="list itemizedlist">
		<p class="para">Para definir qualquer um destes valores, use a seguinte sintaxe e responda às perguntas colocadas:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo chage nomedoutilizador</span>
</pre></div>
		<p class="para">
		The following is also an example of how you can manually change the explicit expiration date (-E) to 01/31/2015, minimum password age (-m) of 5 days, maximum password  age (-M) of 90 days, inactivity period (-I) of 5 days after password expiration, and a warning time period (-W) of 14 days before password expiration:
		</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo chage -E 01/31/2015 -m 5 -M 90 -I 30 -W 14 username</span>
</pre></div>
		</li>
<li class="list itemizedlist">
		<p class="para">Para verificar as alterações, use a sintaxe mencionada anteriormente:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo chage -l username</span>
</pre></div>
		<p class="para">O resultado abaixo indica que foram estabelecidas novas políticas de segurança de senha para a conta:</p>
<div class="screen"><pre class="contents "><span class="output computeroutput">Last password change                                    : Jan 20, 2015
Password expires                                        : Apr 19, 2015
Password inactive                                       : May 19, 2015
Account expires                                         : Jan 31, 2015
Minimum number of days between password change          : 5
Maximum number of days between password change          : 90
Number of days of warning before password expires       : 14</span>
</pre></div>
		</li>
</ul></div>
</div></div>
</div></div>
</div>
</div></div>
<div class="sect2 sect" id="other-security-considerations"><div class="inner">
<div class="hgroup"><h2 class="title">Outras considerações de segurança</h2></div>
<div class="region">
<div class="contents"><p class="para">Muitas aplicações usam mecanismos de autenticação alternativos, que podem passar despercebidos até aos administradores de sistema mais experientes. Consequentemente, é importante compreender e controlar a forma como os utilizadores se autenticam e ganham acesso aos serviços e aplicações disponíveis no seu servidor.</p></div>
<div class="sect3 sect" id="ssh-access-by-disabled-users"><div class="inner">
<div class="hgroup"><h3 class="title">Acesso SSH por utilizadores desactivados</h3></div>
<div class="region"><div class="contents">
<p class="para">
	Simply disabling/locking a user account will not prevent a user from logging into your server remotely if they have previously set up RSA public key authentication. They will still be able to gain shell access to the server, without the need for any password. Remember to check the users home directory for files that will allow for this type of authenticated SSH access, e.g. <span class="file filename">/home/username/.ssh/authorized_keys</span>.
	</p>
<p class="para">
	Remove or rename the directory <span class="file filename">.ssh/</span> in the user's home folder to prevent further SSH authentication capabilities.
	</p>
<p class="para">
	Be sure to check for any established SSH connections by the disabled user, as it is possible they may have existing inbound or outbound connections. Kill any that are found.
	</p>
<div class="screen"><pre class="contents "><span class="cmd command">who | grep username</span>  (to get the pts/# terminal)
<span class="cmd command">sudo pkill -f pts/#</span>
</pre></div>
<p class="para">
	Restrict SSH access to only user accounts that should have it. For example, you may create a group called "sshlogin" and add the group name as the value associated with the <span class="code varname">AllowGroups</span> variable located in the file <span class="file filename">/etc/ssh/sshd_config</span>.
	</p>
<div class="code"><pre class="contents ">AllowGroups sshlogin
</pre></div>
<p class="para">Depois adicione os utilizadores que podem usar o SSH ao grupo "sshlogin" e reinicie o serviço SSH.</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo adduser nomedoutilizador sshlogin</span>
<span class="cmd command">sudo service ssh restart</span>
</pre></div>
</div></div>
</div></div>
<div class="sect3 sect" id="external-db-auth"><div class="inner">
<div class="hgroup"><h3 class="title">Autenticação de utilizadores a partir de uma base de dados externa</h3></div>
<div class="region"><div class="contents"><p class="para">
	Most enterprise networks require centralized authentication and access controls for all system resources. If you have configured your server to authenticate users against external databases, be sure to disable the user accounts both externally and locally. This way you ensure that local fallback authentication is not possible.
	</p></div></div>
</div></div>
</div>
</div></div>
</div>
<div class="links nextlinks">
<a class="nextlinks-prev" href="security.html" title="Segurança">Anterior</a><a class="nextlinks-next" href="console-security.html" title="Segurança da consola">Seguinte</a>
</div>
<div class="clear"></div>
</div>
<div id="pagebottom"></div>
</div></div>
</div>
<div id="footer"><p>The material in this document is available under a free license, see <a href="../../legal.html">Legal</a> for details.<br>
          For information on contributing see the <a href="https://wiki.ubuntu.com/DocumentationTeam">Ubuntu Documentation Team wiki page</a>.
          To report errors in this serverguide documentation, <a href="https://bugs.launchpad.net/serverguide">file a bug report</a>.</p></div>
</div>
</body>
</html>
