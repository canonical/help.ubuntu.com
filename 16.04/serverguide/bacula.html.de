<!DOCTYPE html>
<html lang=de>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Bacula</title>
<link rel="stylesheet" type="text/css" href="de.css">
<script type="text/javascript" src="jquery.js"></script><script type="text/javascript" src="jquery.syntax.js"></script><script type="text/javascript" src="yelp.js"></script>
</head>
<body id="home">
<script src="https://ssl.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">
        _uacct = "UA-1018242-8";
        urchinTracker();
      </script><div id="container">
<div id="container-inner">
<div id="mothership"><ul>
<li><a href="https://partners.ubuntu.com">Partners</a></li>
<li><a href="https://www.ubuntu.com/support/community-support">Support</a></li>
<li><a href="https://community.ubuntu.com">Community</a></li>
<li><a href="https://www.ubuntu.com">Ubuntu.com</a></li>
</ul></div>
<div id="header">
<h1 id="ubuntu-header"><a href="https://help.ubuntu.com/">Ubuntu Documentation</a></h1>
<ul id="main-menu">
<li><a class="main-menu-item current" href="../../">Official Documentation</a></li>
<li><a href="https://help.ubuntu.com/community/CommunityHelpWiki">Community Help Wiki</a></li>
<li><a href="https://community.ubuntu.com/t/contribute/26">Contribute</a></li>
</ul>
</div>
<div id="menu-search"><div id="search-box">
<noscript><form action="https://www.google.com/cse" id="cse-search-box"><div>
<input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq"><input type="hidden" name="ie" value="UTF-8"><input type="text" name="q" size="21"><input type="submit" name="sa" value="Search">
</div></form></noscript>
<script>
                document.write('<form action="../../search.html" id="cse-search-box">');
                document.write('  <div>');
                document.write('    <input type="hidden" name="cof" value="FORID:9">');
                document.write('    <input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq">');
                document.write('    <input type="hidden" name="ie" value="UTF-8">');
                document.write('    <input type="text" name="q" size="21">');
                document.write('    <input type="submit" name="sa" value="Search">');
                document.write('  </div>');
                document.write('</form>');
              </script>
</div></div>
<div class="trails"><div class="trail">
<a href="../../16.04" class="trail">Ubuntu 16.04</a> » <a class="trail" href="index.html" title="Ubuntu–Server-Leitfaden">Ubuntu–Server-Leitfaden</a> » <a class="trail" href="backups.html" title="Datensicherungen">Datensicherungen</a> » </div></div>
<div id="cwt-content" class="clearfix content-area"><div id="page">
<div id="content">
<div class="links nextlinks">
<a class="nextlinks-prev" href="backups-shellscripts-rotation.html" title="Archiv-Rotation">Zurück</a><a class="nextlinks-next" href="virtualization.html" title="Virtualisierung">Weiter</a>
</div>
<div class="hgroup"><h1 class="title">Bacula</h1></div>
<div class="region">
<div class="contents"><p class="para">
    <span class="app application">Bacula</span> is a backup program enabling you to backup, restore, and verify data across your network. There are Bacula 
    clients for Linux, Windows, and Mac OS X - making it a cross-platform network wide solution.
    </p></div>
<div class="links sectionlinks" role="navigation"><ul>
<li class="links"><a class="xref" href="bacula.html#bacula-overview" title="Überblick">Überblick</a></li>
<li class="links"><a class="xref" href="bacula.html#bacula-installation" title="Installation">Installation</a></li>
<li class="links"><a class="xref" href="bacula.html#bacula-configuration" title="Konfiguration">Konfiguration</a></li>
<li class="links"><a class="xref" href="bacula.html#bacula-localhost-backup" title="Localhost-Datensicherung">Localhost-Datensicherung</a></li>
<li class="links"><a class="xref" href="bacula.html#bacula-resources" title="Quellen">Quellen</a></li>
</ul></div>
<div class="sect2 sect" id="bacula-overview"><div class="inner">
<div class="hgroup"><h2 class="title">Überblick</h2></div>
<div class="region"><div class="contents">
<p class="para">
      <span class="app application">Bacula</span> is made up of several components and services used to manage which files to backup and backup locations:
      </p>
<div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
          <p class="para"><span class="app application">Bacula Director:</span> Ein Dienst der alle Datensicherungs-, -wiederherstellungs-, -überprüfungs- und -archivierungs-Operationen kontrolliert.</p>
        </li>
<li class="list itemizedlist">
          <p class="para"><span class="app application">Bacula Console:</span> Eine Anwendung die die Kommunikation mit dem Director erlaubt. Es gibt drei Versionen von Console:</p>
	  <div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist"><p class="para">Die textbasierte Befehlszeilenversion.</p></li>
<li class="list itemizedlist"><p class="para">Die Gnome-basierte GTK+ Graphical User Interface (GUI) Schnittstelle.</p></li>
<li class="list itemizedlist"><p class="para">Die wxWidgets GUI Schnittstelle.</p></li>
</ul></div>
        </li>
<li class="list itemizedlist">
          <p class="para"><span class="app application">Bacula File:</span> Auch als das <span class="app application">Bacula Client</span>-Programm bekannt. Diese Anwendung wird auf den Maschinen installiert, von welchen gesichert werden soll und ist für die Bereitstellung der von dem Director angeforderten Daten verantwortlich.</p>
        </li>
<li class="list itemizedlist">
          <p class="para"><span class="app application">Bacula Storage:</span> Das Programm, welches die Sicherung und Wiederherstellung der Daten auf das physische Medium durchführt.</p>
        </li>
<li class="list itemizedlist">
          <p class="para"><span class="app application">Bacula Catalog:</span> ist verantwortlich für die Bereitstellung der Datei-Indexe und Datenträger-Datenbanken für alle gesicherten Dateien, wodurch schnelles Auffinden und Wiederherstellen archivierter Dateien ermöglicht wird. Der »Catalog« unterstützt drei verschiedene Datenbanken: MySQL, PostgreSQL und SQLite.</p>
        </li>
<li class="list itemizedlist">
          <p class="para"><span class="app application">Bacula Monitor:</span> Erlaubt die Überwachung des Directors, der Datei-Dienste und Sicherungs-Dienste. Momentan ist der Monitor nur als GKT+-GUI-Anwendung verfügbar.</p>
        </li>
</ul></div>
<p class="para">Diese Dienste und Anwendungen können auf verschiedenen Servern und Clients betrieben werden, oder Sie können auf einer Maschine installiert werden, wenn nur eine einzige Platte oder ein einziges Laufwerk gesichert werden soll.</p>
</div></div>
</div></div>
<div class="sect2 sect" id="bacula-installation"><div class="inner">
<div class="hgroup"><h2 class="title">Installation</h2></div>
<div class="region"><div class="contents">
<div class="note" title="Anmerkung"><div class="inner"><div class="region"><div class="contents">
        <p class="para">
        If using MySQL or PostgreSQL as your database, you should already have the services available.
        <span class="app application">Bacula</span> will not install them for you.
        </p>
      </div></div></div></div>
<p class="para">Es gibt mehrere Pakete, welche die verschiedenen <span class="app application">Bacula</span>-Komponenten beinhalten. Um Bacula zu installieren, geben Sie folgendes in eine Befehlszeile ein:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo apt install bacula</span>
</pre></div>
<p class="para">Die Standardinstallation des <span class="app application">bacula</span>-Pakets benutzt eine <span class="app application">MySQL</span>-Datenbank für den Katalog. Wenn Sie SQLite oder PostgreSQL für den Katalog benutzen wollen, installieren Sie <span class="app application">bacula-director-sqlite3</span> oder <span class="app application">bacula-director-pgsql</span>.</p>
<p class="para">Während des Installationsprozesses werden Sie angefragt, die Berechtigungen für den Datenbank-<span class="em emphasis">Administrator</span> und den <span class="em emphasis">Besitzer</span> der Datenbank <span class="em emphasis">bacula</span> bereitzustellen. Der Datenbank-Administrator benötigt die entsprechenden Rechte, um eine Datenbank zu erstellen. Weitere Informationen finden Sie unter <a class="xref" href="mysql.html" title="MySQL">MySQL</a>.</p>
</div></div>
</div></div>
<div class="sect2 sect" id="bacula-configuration"><div class="inner">
<div class="hgroup"><h2 class="title">Konfiguration</h2></div>
<div class="region"><div class="contents">
<p class="para">Die <span class="app application">Bacula</span>-Konfigurationsdateien  werden auf der Grundlage von <span class="em emphasis">Quellen</span> einschließlich <span class="em emphasis">Anweisungen</span> umrandet von <span class="quote">»{}«</span>-Klammern formatiert. Jede Bacula-Komponente hat ihre eigene Datei in dem Ordner <span class="file filename">/etc/bacula</span>.</p>
<p class="para">Die verschiedenen <span class="app application">Bacula</span>-Komponenten müssen sich gegenseitig berechtigen. Das wird durch die <span class="em emphasis">password</span>-Anweisung bewerkstelligt. Zum Beispiel muss das <span class="em emphasis">Storage</span>-Quellenpasswort in der Datei <span class="file filename">/etc/bacula/bacula-dir.conf</span> dem <span class="em emphasis">Director</span>-Quellenpasswort in <span class="file filename">/etc/bacula/bacula-sd.conf</span> entsprechen.</p>
<p class="para">Standardmäßig ist der Datensicherungsauftrag namens <span class="em emphasis">Client1</span> so eingerichtet, dass er den <span class="em emphasis">Bacula</span>-Katalog archiviert. Wenn Sie vorhaben, den Server für die Datensicherung mehrerer Clients zu benutzen, sollten Sie den Namen des Auftrages auf einen aussagekräftigeren ändern. Um den Namen zu ändern, bearbeiten Sie die Datei <span class="file filename">/etc/bacula/bacula-dir.conf</span>:</p>
<div class="code"><pre class="contents ">#
# Legt den nächtlichen Hauptdatensicherungsauftrag fest
#   standardmäßig sichert der Auftrag auf das Laufwerk in 
Job {
  Name = "BackupServer"
  JobDefs = "DefaultJob"
  Write Bootstrap = "/var/lib/bacula/Client1.bsr"
}
</pre></div>
<div class="note" title="Anmerkung"><div class="inner"><div class="region"><div class="contents">
        <p class="para">Das obige Beispiel ändert den Namen des Auftrags zu <span class="em emphasis">BackupServer</span>, entsprechend dem Hostname der Maschine. Ersetzen Sie <span class="quote">»BackupServer«</span> mit Ihrem entsprechendem Hostnamen, oder einem anderen aussagekräftigem Namen.</p>
      </div></div></div></div>
<p class="para">Die <span class="em emphasis">Console</span> kann benutzt werden, um den <span class="em emphasis">Director</span> nach Aufträgen zu befragen, aber damit Console von einem <span class="em emphasis">nicht-root</span>-Benutzer benutzt werden kann, muss der Benutzer in der Gruppe <span class="em emphasis">bacula</span> sein. Um den Benutzer der Gruppe bacula hinzuzufügen, geben Sie folgendes in ein Terminal ein:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo adduser $benutzername bacula</span>
</pre></div>
<div class="note" title="Anmerkung"><div class="inner"><div class="region"><div class="contents">
        <p class="para">Ersetzen Sie <span class="em emphasis">$benutzername</span> mit dem entsprechenden Benutzernamen. Wenn Sie den aktuellen Benutzer der Gruppe hinzugefügt haben, sollten Sie sich aus- und wieder einloggen, damit die neuen Rechte gültig sind.</p>
      </div></div></div></div>
</div></div>
</div></div>
<div class="sect2 sect" id="bacula-localhost-backup"><div class="inner">
<div class="hgroup"><h2 class="title">Localhost-Datensicherung</h2></div>
<div class="region"><div class="contents">
<p class="para">Dieser Abschnitt beschreibt, wie bestimmte Ordner auf einem einzigen Host auf ein lokales Bandlaufwerk gesichert werden.</p>
<div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
          <p class="para">Zuerst muss das <span class="em emphasis">Speicher</span>-Gerät eingerichtet werden. Bearbeiten Sie die Datei <span class="file filename">/etc/bacula/bacula-sd.conf</span> indem Sie folgendes hinzufügen:</p>
<div class="code"><pre class="contents ">Device {
  Name = "Bandlaufwerk"
  Device Type = tape
  Media Type = DDS-4
  Archive Device = /dev/st0
  Hardware end of medium = No;
  AutomaticMount = yes;               # Lese das Gerät, sobald es geöffnet wird
  AlwaysOpen = Yes;
  RemovableMedia = yes;
  RandomAccess = no;
  Alert Command = "sh -c 'tapeinfo -f %c | grep TapeAlert'"
}
</pre></div>
          <p class="para">
          The example is for a <span class="em emphasis">DDS-4</span> tape drive.  Adjust the <span class="quote">»Media Type«</span> and <span class="quote">»Archive Device«</span> to match your hardware.
          </p>
          <p class="para">Sie können ebenso eines der anderen Beispiele in der Datei auskommentieren.</p>
        </li>
<li class="list itemizedlist">
          <p class="para">Nachdem Sie die Datei <span class="file filename">/etc/bacula/bacula-sd.conf</span> bearbeitet haben, muss der <span class="app application">Storage</span>-Dienst neu gestartet werden:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo systemctl restart bacula-sd.service</span>
</pre></div>
        </li>
<li class="list itemizedlist">
          <p class="para">Fügen Sie jetzt eine <span class="app application">Storage</span>-Quelle in der Datei <span class="file filename">/etc/bacula/bacula-dir.conf</span> hinzu, damit das neue Gerät verwendet werden kann:</p>
<div class="code"><pre class="contents "># Definition of "Tape Drive" storage device
Storage {
  Name = TapeDrive
  # Do not use "localhost" here    
  Address = backupserver               # N.B. Use a fully qualified name here
  SDPort = 9103
  Password = "Cv70F6pf1t6pBopT4vQOnigDrR0v3LT3Cgkiyjc"
  Device = "Tape Drive"
  Media Type = tape
}
</pre></div>
          <p class="para">Die <span class="em emphasis">Adress</span>-Anweisung muss der voll qualifizierte Domänen-Name (FQDN Fully Qualified Domain Name) des Servers sein. Ändern Sie den <span class="em emphasis">Datensicherungsserver</span> auf den aktuellen Host-Namen.</p>
          <p class="para">Stellen Sie zudem sicher, dass die <span class="em emphasis">Password</span>-Anweisung der Passwortzeile in der Datei <span class="file filename">/etc/bacula/bacula-sd.conf</span> entspricht.</p>
        </li>
<li class="list itemizedlist">
          <p class="para">Erstellen Sie ein neues <span class="em emphasis">FileSet</span>, welches festlegt, welche Ordner gesichert werden sollen, indem Sie folgendes hinzufügen:</p>
<div class="code"><pre class="contents "># Localhost-Datensicherungs-FileSet.
FileSet {
  Name = "Localhost-Dateien"
  Include {
    Options {
      signature = MD5
      compression=GZIP
    }
    File = /etc
    File = /home
  }
}
</pre></div>
          <p class="para">
          This <span class="em emphasis">FileSet</span> will backup the <span class="file filename">/etc</span> and 
          <span class="file filename">/home</span> directories.  The <span class="em emphasis">Options</span> resource directives 
          configure the FileSet to create an MD5 signature for each file backed up, and to compress the files using GZIP.
          </p>
        </li>
<li class="list itemizedlist">
          <p class="para">Anschließend, erstellen Sie einen neuen <span class="em emphasis">Ablaufplan</span> für den Datensicherungsauftrag:</p>
<div class="code"><pre class="contents "># Localhost-Datensicherungsablaufplan -- täglich.
Schedule {
  Name = "LocalhostTäglich"
  Run = Full daily at 00:01
}
</pre></div>
          <p class="para">Der Auftrag wird täglich um 00:01 oder 12:01 mittags ausgeführt. Es sind noch viele weitere Ablaufplanoptionen verfügbar.</p>
        </li>
<li class="list itemizedlist">
          <p class="para">Erstellen Sie abschließend den <span class="em emphasis">Auftrag</span>:</p>
<div class="code"><pre class="contents "># Localhost-Datensicherung.
Job {
  Name = "Localhost-Datensicherung"
  JobDefs = "Standard-Auftrag"
  Enabled = yes
  Level = Full
  FileSet = "Localhost-Dateien"
  Schedule = "LocalhostTäglich"
  Storage = TapeDrive
  Write Bootstrap = "/var/lib/bacula/LocalhostBackup.bsr"
}  
</pre></div>
          <p class="para">Der Auftrag führt jeden Tag eine <span class="em emphasis">volle</span> Datensicherung auf das Bandlaufwerk durch.</p>
        </li>
<li class="list itemizedlist">
          <p class="para">Jedes Band benötigt ein <span class="em emphasis">Label</span>. Wenn das aktuelle Band kein Label hat, sendet <span class="app application">Bacula</span> Ihnen eine E-Mail, um Ihnen das mitzuteilen. Um ein Band über die <span class="app application">Console</span> zu labeln, geben Sie folgenden Befehl in eine Befehlszeile ein:</p>
<div class="screen"><pre class="contents "><span class="cmd command">bconsole</span>
</pre></div>
        </li>
<li class="list itemizedlist">
          <p class="para">Geben Sie in der Bacula-Console folgendes ein:</p>
<div class="screen"><pre class="contents "><span class="cmd command">label</span>
</pre></div>
        </li>
<li class="list itemizedlist">
          <p class="para">Sie werden dann nach der <span class="em emphasis">Storage</span>-Quelle gefragt:</p>
<div class="screen"><pre class="contents "><span class="output computeroutput">
Automatisch gewählter Katalog: MyCatalog
Benutze Katalog "MyCatalog"
Die festgelegten Storage-Quellen sind:
     1: Datei
     2: Bandlaufwerk
Wählen Sie die Storage-Quelle (1-2):<span class="input userinput">2</span>
</span>
</pre></div>
        </li>
<li class="list itemizedlist">
          <p class="para">Geben Sie den neuen <span class="em emphasis">Laufwerks</span>namen ein:</p>
<div class="screen"><pre class="contents "><span class="output computeroutput">
Geben Sie den neuen Laufwerksnamen ein:: <span class="input userinput">Sonntag</span>
Festgelegte Pools:
     1: Vorgabe
     2: Scratch</span>
</pre></div>
          <p class="para">Ersetzen Sie <span class="em emphasis">Sonntag</span> mit dem entsprechendem Label.</p>
        </li>
<li class="list itemizedlist">
          <p class="para">Wählen Sie jetzt den <span class="em emphasis">Pool</span> aus:</p>
<div class="screen"><pre class="contents "><span class="output computeroutput">
Wählen Sie den Pool aus (1-2): <span class="input userinput">1</span>
Verbinde zu dem Storage-Dienst Bandlaufwerk auf Datensicherungsserver:9103 ...
Sende Label für Laufwerk "Sonntag" Slot 0 ...
</span>
</pre></div>
        </li>
</ul></div>
<p class="para">Herzlichen Glückwunsch, Sie haben gerade eben <span class="em emphasis">Bacula</span> so eingerichtet, dass es den Localhost auf ein eingelegtes Bandlaufwerk sichert.</p>
</div></div>
</div></div>
<div class="sect2 sect" id="bacula-resources"><div class="inner">
<div class="hgroup"><h2 class="title">Quellen</h2></div>
<div class="region"><div class="contents"><div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
          <p class="para">
	  For more <span class="em emphasis">Bacula</span> configuration options, refer to 
          <a href="http://blog.bacula.org/documentation/documentation/" class="ulink" title="http://blog.bacula.org/documentation/documentation/">Bacula's
          Documentation</a>.
          </p>
        </li>
<li class="list itemizedlist">
          <p class="para">Die <a href="http://www.bacula.org/" class="ulink" title="http://www.bacula.org/">Bacula-Homepage</a> enthält die neuesten Bacula Nachrichten und Entwicklungen.</p>
        </li>
<li class="list itemizedlist">
          <p class="para">Siehe außerdem die <a href="https://help.ubuntu.com/community/Bacula" class="ulink" title="https://help.ubuntu.com/community/Bacula">Bacula-Seite</a> im Ubuntu-Wiki.</p>
        </li>
</ul></div></div></div>
</div></div>
</div>
<div class="links nextlinks">
<a class="nextlinks-prev" href="backups-shellscripts-rotation.html" title="Archiv-Rotation">Zurück</a><a class="nextlinks-next" href="virtualization.html" title="Virtualisierung">Weiter</a>
</div>
<div class="clear"></div>
</div>
<div id="pagebottom"></div>
</div></div>
</div>
<div id="footer"><p>The material in this document is available under a free license, see <a href="../../legal.html">Legal</a> for details.<br>
          For information on contributing see the <a href="https://wiki.ubuntu.com/DocumentationTeam">Ubuntu Documentation Team wiki page</a>.
          To report errors in this serverguide documentation, <a href="https://bugs.launchpad.net/serverguide">file a bug report</a>.</p></div>
</div>
</body>
</html>
