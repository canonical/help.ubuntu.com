<!DOCTYPE html>
<html lang=de>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Zertifikate</title>
<link rel="stylesheet" type="text/css" href="de.css">
<script type="text/javascript" src="jquery.js"></script><script type="text/javascript" src="jquery.syntax.js"></script><script type="text/javascript" src="yelp.js"></script>
</head>
<body id="home">
<script src="https://ssl.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">
        _uacct = "UA-1018242-8";
        urchinTracker();
      </script><div id="container">
<div id="container-inner">
<div id="mothership"><ul>
<li><a href="https://partners.ubuntu.com">Partners</a></li>
<li><a href="https://www.ubuntu.com/support/community-support">Support</a></li>
<li><a href="https://community.ubuntu.com">Community</a></li>
<li><a href="https://www.ubuntu.com">Ubuntu.com</a></li>
</ul></div>
<div id="header">
<h1 id="ubuntu-header"><a href="https://help.ubuntu.com/">Ubuntu Documentation</a></h1>
<ul id="main-menu">
<li><a class="main-menu-item current" href="../../">Official Documentation</a></li>
<li><a href="https://help.ubuntu.com/community/CommunityHelpWiki">Community Help Wiki</a></li>
<li><a href="https://community.ubuntu.com/t/contribute/26">Contribute</a></li>
</ul>
</div>
<div id="menu-search"><div id="search-box">
<noscript><form action="https://www.google.com/cse" id="cse-search-box"><div>
<input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq"><input type="hidden" name="ie" value="UTF-8"><input type="text" name="q" size="21"><input type="submit" name="sa" value="Search">
</div></form></noscript>
<script>
                document.write('<form action="../../search.html" id="cse-search-box">');
                document.write('  <div>');
                document.write('    <input type="hidden" name="cof" value="FORID:9">');
                document.write('    <input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq">');
                document.write('    <input type="hidden" name="ie" value="UTF-8">');
                document.write('    <input type="text" name="q" size="21">');
                document.write('    <input type="submit" name="sa" value="Search">');
                document.write('  </div>');
                document.write('</form>');
              </script>
</div></div>
<div class="trails"><div class="trail">
<a href="../../16.04" class="trail">Ubuntu 16.04</a> » <a class="trail" href="index.html" title="Ubuntu–Server-Leitfaden">Ubuntu–Server-Leitfaden</a> » <a class="trail" href="security.html" title="Sicherheit">Sicherheit</a> » </div></div>
<div id="cwt-content" class="clearfix content-area"><div id="page">
<div id="content">
<div class="links nextlinks">
<a class="nextlinks-prev" href="apparmor.html" title="AppArmor">Zurück</a><a class="nextlinks-next" href="ecryptfs.html" title="eCryptfs">Weiter</a>
</div>
<div class="hgroup"><h1 class="title">Zertifikate</h1></div>
<div class="region">
<div class="contents">
<p class="para">Eine der gebräuchlichsten Formen der Kryptographie ist <span class="em emphasis">Public-Key</span>–Kryptographie. Public-Key–Kryptographie benutzt einen <span class="em emphasis">öffentlichen Schlüssel</span> und einen <span class="em emphasis">privaten Schlüssel.</span>. Das System funktioniert, indem Informationen mit dem öffentlichen Schlüssel <span class="em emphasis">verschlüsselt</span> werden. Die Information kann dann nur mit dem privaten Schlüssel wieder <span class="em emphasis">entschlüsselt</span> werden.</p>
<p class="para">
            A common use for public-key cryptography is encrypting application traffic using a Secure Socket Layer (SSL) or 
            Transport Layer Security (TLS) connection. One example: configuring Apache to provide <span class="em emphasis">HTTPS</span>, the
            HTTP protocol over SSL. This allows a way to encrypt traffic using a protocol that does not itself provide encryption.
            </p>
<p class="para">
            A <span class="em emphasis">Certificate</span> is a method used to distribute a <span class="em emphasis">public key</span> and other information
            about a server and the organization who is responsible for it. Certificates can be digitally signed by a 
            <span class="em emphasis">Certification Authority</span>, or CA. A CA is a trusted third party that has confirmed that the information
            contained in the certificate is accurate.
            </p>
</div>
<div class="links sectionlinks" role="navigation"><ul>
<li class="links"><a class="xref" href="certificates-and-security.html#types-of-certificates" title="Arten von Zertifikaten">Arten von Zertifikaten</a></li>
<li class="links"><a class="xref" href="certificates-and-security.html#generating-a-csr" title="Erstellen eines Antrags zur Signierung eines Zertifikats (CSR)">Erstellen eines Antrags zur Signierung eines Zertifikats (CSR)</a></li>
<li class="links"><a class="xref" href="certificates-and-security.html#creating-a-self-signed-certificate" title="Erstellen eines selbst-signierten Zertifikats">Erstellen eines selbst-signierten Zertifikats</a></li>
<li class="links"><a class="xref" href="certificates-and-security.html#installing-the-certificate" title="Installation des Zertifikats">Installation des Zertifikats</a></li>
<li class="links"><a class="xref" href="certificates-and-security.html#certificate-authority" title="Zertifizierungsstelle">Zertifizierungsstelle</a></li>
<li class="links"><a class="xref" href="certificates-and-security.html#certificate-references" title="Referenzen">Referenzen</a></li>
</ul></div>
<div class="sect2 sect" id="types-of-certificates"><div class="inner">
<div class="hgroup"><h2 class="title">Arten von Zertifikaten</h2></div>
<div class="region"><div class="contents">
<p class="para">Um einen sicheren Server aufzusetzen, der »Public-Key«–Verschlüsselung benutzt, senden Sie in den meisten Fällen Ihren Zertifizierungsantrag (der Ihren öffentlichen Schlüssel enthält), den Nachweis über die Identität Ihres Unternehmens und die Bezahlung an die Zertifizierungsstelle. Die Zertifizierungsstelle bestätigt den Zertifizierungsantrag und Ihre Identität und sendet ein Zertifikat für Ihren sicheren Server zurück. Alternativ können Sie auch Ihr eigenes <span class="em emphasis">selbst-signiertes</span> Zertifikat erstellen.</p>
<div class="note" title="Anmerkung"><div class="inner"><div class="region"><div class="contents">
              <p class="para">
              Note that self-signed certificates should not be used in most production environments.
              </p>
            </div></div></div></div>
<p class="para">Um beim HTTPS-Beispiel zu bleiben: ein von einer Zertifizierungsstelle signiertes Zertifikat liefert zwei wichtige Möglichkeiten, die ein selbst-signiertes Zertifikat nicht liefert:</p>
<div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
            <p class="para">Browser erkennen normalerweise das Zertifikat automatisch und erlauben eine sichere Verbindung ohne Aufforderung an den Benutzer.</p>
            </li>
<li class="list itemizedlist">
            <p class="para">Wenn eine Zertifizierungsstelle ein Zertifikat heraus gibt, garantiert sie die Identität der Organisation, die die Webseite an den Browser liefert.</p>
            </li>
</ul></div>
<p class="para">
             Most Web browsers, and computers, that support SSL have a list of CAs whose
             certificates they automatically accept. If a browser
             encounters a certificate whose authorizing CA is not in the
             list, the browser asks the user to either accept or decline
             the connection. Also, other applications may generate an error message when using
             a self-signed certificate.
            </p>
<p class="para">Der Prozess ein Zertifikat von einer Zertifizierungsstelle zu bekommen, ist relativ einfach. Im Folgenden ein schneller Überblick:</p>
<div class="list orderedlist"><ol class="list orderedlist">
<li class="list orderedlist">
               <p class="para">Erstellen Sie einen privates und ein öffentliches Schlüsselpaar.</p>
            </li>
<li class="list orderedlist">
                 <p class="para">Erstellen Sie einen Zertifizierungsantrag, basierend auf dem öffentlichen Schlüssel. Der Antrag beinhaltet Informationen über Ihren Server und die Firma, die ihn anbietet.</p>
            </li>
<li class="list orderedlist">
                 <p class="para">Senden Sie den Antrag zusammen mit Dokumenten, die Ihre Identität belegen, zu einer Zertifizierungsstelle. Wir können Ihnen nicht sagen, welche Zertifizierungsstelle zu bevorzugen ist. Ihre Entscheidung könnte auf Erfahrung aus der Vergangenheit basieren, oder auf Erfahrungen Ihrer Freunde oder Kollegen, ebenso wie auf finanziellen Faktoren.</p>

                    <p class="para">Wenn Sie sich für eine Zertifizierungsstelle entschieden haben, müssen Sie den von dort gelieferten Anweisungen folgen, wie ein Zertifikat zu erhalten ist.</p>
            </li>
<li class="list orderedlist">
               <p class="para">Wenn die Zertifizierungsstelle festgestellt hat, dass Sie wirklich derjenige sind, für den Sie sich ausgeben, wird sie das Zertifikat an Sie senden.</p>
            </li>
<li class="list orderedlist">
              <p class="para">Installieren Sie dieses Zertifikat auf Ihren sicheren Server und konfigurieren Sie die entsprechenden Anwendungen so, dass sie das Zertifikat nutzen.</p>
            </li>
</ol></div>
</div></div>
</div></div>
<div class="sect2 sect" id="generating-a-csr"><div class="inner">
<div class="hgroup"><h2 class="title">Erstellen eines Antrags zur Signierung eines Zertifikats (CSR)</h2></div>
<div class="region"><div class="contents">
<p class="para">Egal, ob Sie ein Zertifikat von einer Zertifizierungsstelle bekommen oder Ihr eigenes, selbst-signiertes Zertifikat erstellen: der erste Schritt ist, einen Schlüssel zu erstellen.</p>
<p class="para">       
          If the certificate will be used by service daemons, such as Apache, Postfix, Dovecot, etc., 
          a key without a passphrase is often appropriate. Not having a passphrase allows the services
          to start without manual intervention, usually the preferred way to start a daemon.
          </p>
<p class="para">Dieser Abschnitt behandelt das Erstellen zweier Schlüssel, davon einer mit und einer ohne Passphrase. Der passwortlose Schlüssel wird dann zur Generierung eines Zertifikats verwendet werden, das mit verschiedenen Dienstprogrammen benutzt werden kann.</p>
<div class="note note-warning" title="Warnung"><div class="inner"><div class="region"><div class="contents">
            <p class="para">Das Dienstprogramm ohne Passwort laufen zu lassen ist bequem, da nicht bei jedem Start des sicheren Dienstes die Passphrase eingegeben werden muss. Allerdings ist diese Methode unsicher, da ein kompromittierter Schlüssel einen kompromittierten Server bedeutet.</p>
          </div></div></div></div>
<p class="para">Um die <span class="em emphasis">Schlüssel</span> für den Antrag zur Signierung eines Zertifikats (CSR) zu erstellen, führen Sie folgenden Befehl in einem Terminal aus:</p>
<div class="screen"><pre class="contents "><span class="cmd command">openssl genrsa -des3 -out server.key 2048</span>
</pre></div>
<div class="code"><pre class="contents ">Generating RSA private key, 2048 bit long modulus
..........................++++++
.......++++++
e is 65537 (0x10001)
Enter pass phrase for server.key:
</pre></div>
<p class="para">Sie können nun Ihr Passwort eingeben. Für bestmögliche Sicherheit sollte es mindestens 8 Zeichen enthalten. Bei der Spezifizierung von -des3 beträgt die minimale Länge 4 Zeichen. Es sollte Zahlen und/ oder Interpunktion enthalten und kein Wort aus einem Wörterbuch sein. Denken Sie auch daran, dass in Ihrem Passwort zwischen Groß- und Kleinschreibung unterschieden wird.</p>
<p class="para">Geben Sie das Passwort zur Überprüfung ein zweites Mal ein. Sobald Sie es nochmals korrekt eingegeben haben, wird der Server-Schlüssel erstellt und in der Datei <span class="file filename">server.key</span> gespeichert.</p>
<p class="para">Erstellen Sie nun den unsicheren Schlüssel, also den ohne Passphrase, und tauschen Sie die Namen der Schlüssel:</p>
<div class="screen"><pre class="contents "><span class="cmd command">openssl rsa -in server.key -out server.key.insecure</span>
<span class="cmd command">mv server.key server.key.secure</span>
<span class="cmd command">mv server.key.insecure server.key</span>
</pre></div>
<p class="para">Der unsichere Schlüssel heißt nun <span class="file filename">server.key</span>, und Sie können diese Datei zur Generierung des CSR ohne Passphrase verwenden.</p>
<p class="para">Um das CSR zu erstellen, führen Sie folgenden Befehl in einem Terminal aus:</p>
<div class="screen"><pre class="contents "><span class="cmd command">openssl req -new -key server.key -out server.csr</span>
</pre></div>
<p class="para">Sie werden aufgefordert das Passwort einzugeben. Wenn Sie das Passwort korrekt eingegeben haben, werden Sie aufgefordert, Firmenname, Webseite, E-Mail-Adresse usw. einzugeben. Nachdem Sie alle diese Informationen eingegeben haben, wird Ihr CSR erstellt und in der Datei <span class="file filename">server.csr</span> gespeichert.</p>
<p class="para">Sie können nun dieses CSR an eine Zertifizierungsstelle senden. Die Zertifizierungsstelle wird dieses CSR benutzen und das Zertifikat herausgeben. Sie können aber auch ein selbst-signiertes Zertifikat mit diesem CSR erstellen.</p>
</div></div>
</div></div>
<div class="sect2 sect" id="creating-a-self-signed-certificate"><div class="inner">
<div class="hgroup"><h2 class="title">Erstellen eines selbst-signierten Zertifikats</h2></div>
<div class="region"><div class="contents">
<p class="para">Um ein selbst-signiertes Zertifikat zu erstellen, führen Sie folgenden Befehl in einem Terminal aus:</p>
<div class="screen"><pre class="contents "><span class="cmd command">openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt</span>
</pre></div>
<p class="para">Sie werden zur Eingabe des Passworts aufgefordert. Sobald Sie das korrekte Passwort eingeben, wird Ihr Zertifikat erstellt und in der Datei <span class="file filename">server.crt</span> abgelegt.</p>
<div class="note note-warning" title="Warnung"><div class="inner"><div class="region"><div class="contents">
        <p class="para">Wenn Ihr sicherer Server in einer Produktivumgebung benutzt wird, benötigen Sie wahrscheinlich ein von einer Zertifizierungsstelle signiertes Zertifikat. Es wird nicht empfohlen, selbst-signierte Zertifikate zu verwenden.</p>
        </div></div></div></div>
</div></div>
</div></div>
<div class="sect2 sect" id="installing-the-certificate"><div class="inner">
<div class="hgroup"><h2 class="title">Installation des Zertifikats</h2></div>
<div class="region"><div class="contents">
<p class="para">Sie können die Schlüsseldatei <span class="file filename">server.key</span> und Zertifikatdatei <span class="file filename">server.crt</span> oder das von Ihrer Zertifizierungsstelle herausgegebene Zertifikat installieren, indem Sie folgende Befehle in einem Terminal ausführen:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo cp server.crt /etc/ssl/certs</span>
<span class="cmd command">sudo cp server.key /etc/ssl/private</span>
</pre></div>
<p class="para">Nun konfigurieren Sie einfach jede Anwendung, die in der Lage ist, Verschlüsselung mit öffentlichen Schlüsseln zu nutzen, so, dass sie die <span class="em emphasis">certificate</span>- und <span class="em emphasis">key</span>-Dateien benutzen. Beispielsweise kann <span class="app application">Apache</span> HTTPS bieten, <span class="app application">Dovecot</span> kann IMAPS und POP3S, etc. bieten.</p>
</div></div>
</div></div>
<div class="sect2 sect" id="certificate-authority"><div class="inner">
<div class="hgroup"><h2 class="title">Zertifizierungsstelle</h2></div>
<div class="region"><div class="contents">
<p class="para">Wenn die Dienste in Ihrem Netzwerk mehr als einige selbst-signierte Zertifikate erfordern, wäre es sinnvoll, Ihre eigene interne <span class="em emphasis">Zertifizierungsstelle</span> einzurichten. Die Nutzung von Zertifikaten, die von Ihrer eigenen Zertifizierungsstelle signiert wurden, erlaubt es verschiedenen Diensten, die diese Zertifikate nutzen, anderen Diensten die diese Zertifikate ebenfalls nutzen, leichter zu vertrauen.</p>
<div class="steps"><div class="inner"><ol class="steps">
<li class="steps">
  
              <p class="para">Erstellen Sie zuerst die Ordner, die alle Dateien rund um die Zertifizierungsstelle beinhalten:</p>    

<div class="screen"><pre class="contents "><span class="cmd command">sudo mkdir /etc/ssl/CA</span>
<span class="cmd command">sudo mkdir /etc/ssl/newcerts</span>
</pre></div>

            </li>
<li class="steps">
  
              <p class="para">Die Zertifizierungsstelle (CA) benötigt einige zusätzliche Dateien um zu arbeiten. Eine, um die von der CA benutzte Seriennummer zu verfolgen (jedes Zertifikat muss eine individuelle Seriennummer besitzen) und eine weitere, um aufzuzeichnen, welche Zertifikate herausgegeben wurden:</p>    

<div class="screen"><pre class="contents "><span class="cmd command">sudo sh -c "echo '01' &gt; /etc/ssl/CA/serial"</span>
<span class="cmd command">sudo touch /etc/ssl/CA/index.txt</span>
</pre></div>

            </li>
<li class="steps">
  
              <p class="para">Die dritte Datei ist eine CA-Konfigurationsdatei. Obwohl sie nicht unbedingt notwendig ist, ist es sehr nützlich bei der Herausgabe mehrerer Zertifikate. Editieren Sie <span class="file filename">/etc/ssl/openssl.cnf</span> und ändern Sie in <span class="em emphasis">[ CA_default ]</span>:</p>    

<div class="code"><pre class="contents ">dir             = /etc/ssl              # Where everything is kept
database        = $dir/CA/index.txt     # database index file.
certificate     = $dir/certs/cacert.pem # The CA certificate
serial          = $dir/CA/serial        # The current serial number
private_key     = $dir/private/cakey.pem# The private key
</pre></div>    

            </li>
<li class="steps">
  
              <p class="para">
              Next, create the self-signed root certificate:
              </p>    

<div class="screen"><pre class="contents "><span class="cmd command">openssl req -new -x509 -extensions v3_ca -keyout cakey.pem -out cacert.pem -days 3650</span>
</pre></div>

              <p class="para">Sie werden dann aufgefordert, die Details über das Zertifikat einzugeben.</p>

            </li>
<li class="steps">
  
              <p class="para">Installieren Sie nun das root-Zertifikat und den Schlüssel:</p>    

<div class="screen"><pre class="contents "><span class="cmd command">sudo mv cakey.pem /etc/ssl/private/</span>
<span class="cmd command">sudo mv cacert.pem /etc/ssl/certs/</span>
</pre></div>

            </li>
<li class="steps">
  
              <p class="para">Sie sind nun in der Lage, Zertifikate zu signieren. Das erste benötigte Element ist ein Antrag zur Signierung eines Zertifikats (CSR), siehe <a class="xref" href="certificates-and-security.html#generating-a-csr" title="Erstellen eines Antrags zur Signierung eines Zertifikats (CSR)">Erstellen eines Antrags zur Signierung eines Zertifikats (CSR)</a> für weitere Details. Sobald Sie den CSR haben, geben Sie folgendes ein, ein von der CA-signiertes Zertifikat zu generieren:</p>    

<div class="screen"><pre class="contents "><span class="cmd command">sudo openssl ca -in server.csr -config /etc/ssl/openssl.cnf</span>
</pre></div>

              <p class="para">Nachdem Sie das Passwort für den CA-Schlüssel eingeben haben, werden Sie aufgefordert, das Zertifikat zu signieren und das neue Zertifikat anzuerkennen. Sie sollten dann eine größere Ausgabe sehen, die mit der Erstellung des Zertifikats zusammenhängt.</p>

            </li>
<li class="steps">   

              <p class="para">Es sollte nun die neue Datei <span class="file filename">/etc/ssl/newcerts/01.pem</span> existieren, welche die gleiche Ausgabe enthält. Kopieren Sie den gesamten Inhalt, beginnend mit der Zeile <span class="em emphasis">-----BEGIN CERTIFICATE-----</span>, über die Zeile <span class="em emphasis">----END CERTIFICATE-----</span> hinaus in eine Datei, die so benannt ist, wie der Rechnername des Servers lautet, auf dem das Zertifikat installiert werden soll. Zum Beispiel wäre <span class="file filename">mail.beispiel.de.crt</span> ein guter und aussagekräftiger Name.</p>

              <p class="para">Nachfolgende Zertifikate werden mit <span class="file filename">02.pem</span>, <span class="file filename">03.pem</span>, etc. benannt.</p>

              <div class="note" title="Anmerkung"><div class="inner"><div class="region"><div class="contents">
                <p class="para">Ersetzen Sie <span class="em emphasis">mail.example.com.crt</span> mit Ihrem eigenen aussagekräftigen Dateinamen.</p>
              </div></div></div></div>

            </li>
<li class="steps">
  
              <p class="para">Kopieren Sie schließlich das neue Zertifikat auf den Host, der es benötigt und konfigurieren Sie die entsprechenden Anwendungen, um es zu benutzen. Der vorgegebene Ort zur Installation von Zertifikaten ist <span class="file filename">/etc/ssl/certs</span>. Dies erlaubt es verschiedenen Diensten, das gleiche Zertifikat ohne zu komplizierte Dateifreigaben zu benutzen.</p>    

              <p class="para">Für Anwendungen, die konfiguriert werden können, ein CA-Zertifikat zu nutzen, sollten Sie auch die Datei <span class="file filename">/etc/ssl/certs/cacert.pem</span> in den Ordner <span class="file filename">/etc/ssl/certs/</span> auf jedem Server kopieren.</p>

            </li>
</ol></div></div>
</div></div>
</div></div>
<div class="sect2 sect" id="certificate-references"><div class="inner">
<div class="hgroup"><h2 class="title">Referenzen</h2></div>
<div class="region"><div class="contents"><div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
              <p class="para">
              For more detailed instructions on using cryptography see the
              <a href="http://tldp.org/HOWTO/SSL-Certificates-HOWTO/index.html" class="ulink" title="http://tldp.org/HOWTO/SSL-Certificates-HOWTO/index.html">SSL Certificates HOWTO</a> by tldp.org:
              </p>
            </li>
<li class="list itemizedlist">
              <p class="para">
              The Wikipedia <a href="http://en.wikipedia.org/wiki/HTTPS" class="ulink" title="http://en.wikipedia.org/wiki/HTTPS">HTTPS</a> page has more information regarding HTTPS.
              </p>
            </li>
<li class="list itemizedlist">
              <p class="para">Weitere Informationen über <span class="em emphasis">OpenSSL</span> finden Sie unter <a href="http://www.openssl.org/" class="ulink" title="http://www.openssl.org/">OpenSSL Home Page</a>.</p>
            </li>
<li class="list itemizedlist">
              <p class="para">
              Also, O'Reilly's <a href="http://oreilly.com/catalog/9780596002701/" class="ulink" title="http://oreilly.com/catalog/9780596002701/">Network Security with OpenSSL</a> is a good
              in-depth reference.
              </p>
            </li>
</ul></div></div></div>
</div></div>
</div>
<div class="links nextlinks">
<a class="nextlinks-prev" href="apparmor.html" title="AppArmor">Zurück</a><a class="nextlinks-next" href="ecryptfs.html" title="eCryptfs">Weiter</a>
</div>
<div class="clear"></div>
</div>
<div id="pagebottom"></div>
</div></div>
</div>
<div id="footer"><p>The material in this document is available under a free license, see <a href="../../legal.html">Legal</a> for details.<br>
          For information on contributing see the <a href="https://wiki.ubuntu.com/DocumentationTeam">Ubuntu Documentation Team wiki page</a>.
          To report errors in this serverguide documentation, <a href="https://bugs.launchpad.net/serverguide">file a bug report</a>.</p></div>
</div>
</body>
</html>
