<!DOCTYPE html>
<html lang=fr>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Certificats</title>
<link rel="stylesheet" type="text/css" href="fr.css">
<script type="text/javascript" src="jquery.js"></script><script type="text/javascript" src="jquery.syntax.js"></script><script type="text/javascript" src="yelp.js"></script>
</head>
<body id="home">
<script src="https://ssl.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">
        _uacct = "UA-1018242-8";
        urchinTracker();
      </script><div id="container">
<div id="container-inner">
<div id="mothership"><ul>
<li><a href="http://www.ubuntu.com/partners">Partners</a></li>
<li><a href="http://www.ubuntu.com/support">Support</a></li>
<li><a href="http://www.ubuntu.com/community">Community</a></li>
<li><a href="http://www.ubuntu.com">Ubuntu.com</a></li>
</ul></div>
<div id="header">
<h1 id="ubuntu-header"><a href="https://help.ubuntu.com/">Ubuntu Documentation</a></h1>
<ul id="main-menu">
<li><a class="main-menu-item current" href="../../">Official Documentation</a></li>
<li><a href="https://help.ubuntu.com/community/CommunityHelpWiki">Community Help Wiki</a></li>
<li><a href="http://community.ubuntu.com/contribute/documentation/">Contribute</a></li>
</ul>
</div>
<div id="menu-search"><div id="search-box">
<noscript><form action="https://www.google.com/cse" id="cse-search-box"><div>
<input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq"><input type="hidden" name="ie" value="UTF-8"><input type="text" name="q" size="21"><input type="submit" name="sa" value="Search">
</div></form></noscript>
<script>
                document.write('<form action="../../search.html" id="cse-search-box">');
                document.write('  <div>');
                document.write('    <input type="hidden" name="cof" value="FORID:9">');
                document.write('    <input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq">');
                document.write('    <input type="hidden" name="ie" value="UTF-8">');
                document.write('    <input type="text" name="q" size="21">');
                document.write('    <input type="submit" name="sa" value="Search">');
                document.write('  </div>');
                document.write('</form>');
              </script>
</div></div>
<div class="trails"><div class="trail">
<a href="../../16.04" class="trail">Ubuntu 16.04</a> » <a class="trail" href="index.html" title="Guide du serveur Ubuntu">Guide du serveur Ubuntu</a> » <a class="trail" href="security.html" title="Sécurité">Sécurité</a> » </div></div>
<div id="cwt-content" class="clearfix content-area"><div id="page">
<div id="content">
<div class="links nextlinks">
<a class="nextlinks-prev" href="apparmor.html" title="AppArmor">Précédent</a><a class="nextlinks-next" href="ecryptfs.html" title="eCryptfs">Suivant</a>
</div>
<div class="hgroup"><h1 class="title">Certificats</h1></div>
<div class="region">
<div class="contents">
<p class="para">L'une des formes de cryptographie les plus répandues de nos jours est la cryptographie par <span class="em emphasis">clé publique</span>. La cryptographie par clé publique utilise une <span class="em emphasis">clé publique</span> et une <span class="em emphasis">clé privée</span>. Ce système <span class="em emphasis">chiffre</span> une information en utilisant une clé publique. L'information ne peut alors être <span class="em emphasis">déchiffrée</span> qu'en utilisant la clé privée.</p>
<p class="para">
            A common use for public-key cryptography is encrypting application traffic using a Secure Socket Layer (SSL) or 
            Transport Layer Security (TLS) connection. One example: configuring Apache to provide <span class="em emphasis">HTTPS</span>, the
            HTTP protocol over SSL. This allows a way to encrypt traffic using a protocol that does not itself provide encryption.
            </p>
<p class="para">
            A <span class="em emphasis">Certificate</span> is a method used to distribute a <span class="em emphasis">public key</span> and other information
            about a server and the organization who is responsible for it. Certificates can be digitally signed by a 
            <span class="em emphasis">Certification Authority</span>, or CA. A CA is a trusted third party that has confirmed that the information
            contained in the certificate is accurate.
            </p>
</div>
<div class="links sectionlinks" role="navigation"><ul>
<li class="links"><a class="xref" href="certificates-and-security.html#types-of-certificates" title="Types de certificats">Types de certificats</a></li>
<li class="links"><a class="xref" href="certificates-and-security.html#generating-a-csr" title="Génération d'une demande de signature de certificat (Certificate Signing Request ou CSR)">Génération d'une demande de signature de certificat (Certificate Signing Request ou CSR)</a></li>
<li class="links"><a class="xref" href="certificates-and-security.html#creating-a-self-signed-certificate" title="Création d'un certificat auto-signé (Self-Signed Certificate ou SSC)">Création d'un certificat auto-signé (Self-Signed Certificate ou SSC)</a></li>
<li class="links"><a class="xref" href="certificates-and-security.html#installing-the-certificate" title="Installation du certificat">Installation du certificat</a></li>
<li class="links"><a class="xref" href="certificates-and-security.html#certificate-authority" title="Autorité de certification">Autorité de certification</a></li>
<li class="links"><a class="xref" href="certificates-and-security.html#certificate-references" title="Références">Références</a></li>
</ul></div>
<div class="sect2 sect" id="types-of-certificates"><div class="inner">
<div class="hgroup"><h2 class="title">Types de certificats</h2></div>
<div class="region"><div class="contents">
<p class="para">Dans la plupart des cas, pour configurer un serveur sécurisé utilisant le chiffrement par clé publique, vous envoyez votre demande de certificat (avec votre clé publique) à l'autorité de certification, accompagné d'une preuve de votre identité et de votre paiement. La CA vérifie votre identité et la demande de certificat, puis vous renvoie un certificat pour votre serveur sécurisé. Une alternative consiste a créer votre propre certificat <span class="em emphasis">auto-signé</span>.</p>
<div class="note" title="Note"><div class="inner"><div class="region"><div class="contents">
              <p class="para">
              Note that self-signed certificates should not be used in most production environments.
              </p>
            </div></div></div></div>
<p class="para">Pour continuer sur l'exemple de HTTPS, un certificat signé par une autorité de certification (CA) fournit deux fonctionnalités importantes absentes dans un certificat auto-signé :</p>
<div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
            <p class="para">Les navigateurs reconnaissent (généralement) automatiquement le certificat et permettent l'établissement d'une connexion sécurisée sans intervention de l'utilisateur.</p>
            </li>
<li class="list itemizedlist">
            <p class="para">Lorsqu'une autorité de certification (CA) émet un certificat, cela garantit l'identité de l'organisation qui fournit les pages Web au navigateur.</p>
            </li>
</ul></div>
<p class="para">La plupart des navigateurs web et des ordinateurs, qui prennent en charge SSL ont une liste d'autorités de certification (CA) qu'ils acceptent automatiquement. Si un navigateur rencontre un certificat dont l'autorité de certification n'est pas dans la liste, le navigateur demande à l'utilisateur d'accepter ou de refuser la connexion. De plus, d'autres applications peuvent générer un message d'erreur lors de l'utilisation d'un certificat auto-signé.</p>
<p class="para">Le processus d'acquisition d'un certificat signé par un CA est relativement simple et facile. En voici un survol rapide :</p>
<div class="list orderedlist"><ol class="list orderedlist">
<li class="list orderedlist">
               <p class="para">Créez une paire de clefs privé et publique.</p>
            </li>
<li class="list orderedlist">
                 <p class="para">Créez une demande de certificat basée sur la clé publique. La demande de certificat contient les informations concernant votre serveur et la société qui l'héberge.</p>
            </li>
<li class="list orderedlist">
                 <p class="para">Envoyez votre demande de certificat, avec les documents prouvant votre identité, à l'autorité de certification (CA). Nous ne pouvons pas vous dire quelle autorité de certification choisir. Votre décision peut être basée sur votre expériences passée, ou sur l'expérience de vos amis ou collègues, ou simplement sur des considérations financières.</p>

                    <p class="para">Une fois l'autorité de certification choisie, vous devez suivre les instructions qu'ils vous ont indiquées pour obtenir un certificat de leur part.</p>
            </li>
<li class="list orderedlist">
               <p class="para">Quand l'autorité de certification est sûre que vous êtes celui que vous prétendez être, elle vous envoie un certificat numérique.</p>
            </li>
<li class="list orderedlist">
              <p class="para">Installez ce certificat sur votre serveur sécurisé, et configurez les applications appropriées pour utiliser le certificat.</p>
            </li>
</ol></div>
</div></div>
</div></div>
<div class="sect2 sect" id="generating-a-csr"><div class="inner">
<div class="hgroup"><h2 class="title">Génération d'une demande de signature de certificat (Certificate Signing Request ou CSR)</h2></div>
<div class="region"><div class="contents">
<p class="para">Que vous ayez obtenu votre certificat d'une autorité de certification, ou qu'il s'agisse d'un certificat auto-signé, la première étape consiste à générer une clé.</p>
<p class="para">       
          If the certificate will be used by service daemons, such as Apache, Postfix, Dovecot, etc., 
          a key without a passphrase is often appropriate. Not having a passphrase allows the services
          to start without manual intervention, usually the preferred way to start a daemon.
          </p>
<p class="para">Cette section décrit la mise en place d'une clé avec et sans phrase de passe. La clé sans phrase de passe sera ensuite utilisée pour générer un certificat pouvant servir pour divers services ou démons.</p>
<div class="note note-warning" title="Avertissement"><div class="inner"><div class="region"><div class="contents">
            <p class="para">L'utilisation de votre service sécurisé sans phrase de passe est utile car ces services peuvent démarrer sans que vous ayez à saisir cette phrase à chaque fois. Mais cela peut constituer une faille de sécurité pouvant mettre en danger tout le serveur.</p>
          </div></div></div></div>
<p class="para">Pour générer les <span class="em emphasis">clés</span> pour une demande de signature de certificat (CSR), exécutez la commande suivante dans un terminal :</p>
<div class="screen"><pre class="contents "><span class="cmd command">openssl genrsa -des3 -out server.key 2048</span>
</pre></div>
<div class="code"><pre class="contents ">Generating RSA private key, 2048 bit long modulus
..........................++++++
.......++++++
e is 65537 (0x10001)
Enter pass phrase for server.key:
</pre></div>
<p class="para">Vous pouvez maintenant saisir votre mot de passe. Pour une meilleure sécurité, il doit contenir au minimum huit caractères. La longueur minimum lorsque vous spécifiez -des3 (algorithme de cryptographie) est de quatre caractères. Il devrait contenir des chiffres et/ou des signes de ponctuation et ne pas se trouver dans un dictionnaire de mots. Rappelez vous également que votre mot de passe est sensible à la casse (NdT : au sens typographique majuscules/minuscules).</p>
<p class="para">Re-saisissez le mot de passe pour vérification. Lorsque vous l'avez retapé correctement, la clé du serveur est générée et stockée dans le fichier <span class="file filename">server.key</span>.</p>
<p class="para">Créez maintenant le clef non sécurisée (celle sans phrase de passe) et échangez le nom des clés :</p>
<div class="screen"><pre class="contents "><span class="cmd command">openssl rsa -in server.key -out server.key.insecure</span>
<span class="cmd command">mv server.key server.key.secure</span>
<span class="cmd command">mv server.key.insecure server.key</span>
</pre></div>
<p class="para">La clé non sécurisée se nomme maintenant <span class="file filename">server.key</span> et vous pouvez utiliser ce fichier pour générer le CSR sans saisir de mot de passe.</p>
<p class="para">Pour créer la CSR, lancer la commande suivante dans un terminal :</p>
<div class="screen"><pre class="contents "><span class="cmd command">openssl req -new -key server.key -out server.csr</span>
</pre></div>
<p class="para">Il vous sera alors demandé d'entrer la phrase de passe. Si elle est correcte, il vous sera alors demandé d'entrer le nom de l'entreprise, le nom du site, courriel, etc. Une fois toutes ces informations renseignées, votre CSR sera créé et conservé dans le fichier <span class="file filename">server.csr</span>.</p>
<p class="para">Vous pouvez maintenant soumettre ce fichier CSR à une autorité de certification (CA) pour traitement. La CA utilisera ce fichier CSR et émettra le certificat. D'un autre côté, vous pouvez créer un certificat auto-signé en utilisant ce CSR.</p>
</div></div>
</div></div>
<div class="sect2 sect" id="creating-a-self-signed-certificate"><div class="inner">
<div class="hgroup"><h2 class="title">Création d'un certificat auto-signé (Self-Signed Certificate ou SSC)</h2></div>
<div class="region"><div class="contents">
<p class="para">Pour créer le certificat auto-signé, utilisez la commande suivante dans un terminal :</p>
<div class="screen"><pre class="contents "><span class="cmd command">openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt</span>
</pre></div>
<p class="para">La commande ci-dessus vous demandera de saisir votre mot de passe. Une fois le mot de passe correct saisi, votre certificat sera créé et stocké dans le fichier <span class="file filename">server.crt</span>.</p>
<div class="note note-warning" title="Avertissement"><div class="inner"><div class="region"><div class="contents">
        <p class="para">Si votre serveur doit être utilisé dans un environnement de production, vous avez probablement besoin d'un certificat signé par une autorité de certification. Il n'est pas recommandé d'utiliser un certificat auto-signé.</p>
        </div></div></div></div>
</div></div>
</div></div>
<div class="sect2 sect" id="installing-the-certificate"><div class="inner">
<div class="hgroup"><h2 class="title">Installation du certificat</h2></div>
<div class="region"><div class="contents">
<p class="para">Vous pouvez installer le fichier de clé <span class="file filename">server.key</span> et le fichier de certificat <span class="file filename">server.crt</span>, ou le fichier de certificat émis par votre autorité de certification, en exécutant les commandes suivantes dans un terminal :</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo cp server.crt /etc/ssl/certs</span>
<span class="cmd command">sudo cp server.key /etc/ssl/private</span>
</pre></div>
<p class="para">Vous devez maintenant simplement configurer les applications ayant la capacité d'utiliser le chiffrement par clé publique, pour qu'elles utilisent les fichiers de <span class="em emphasis">certificat</span> et de <span class="em emphasis">clé</span>. Par exemple, <span class="app application">Apache</span> peut servir les documents en HTTPS, <span class="app application">Dovecot</span> peut servir le courrier en IMAPS et POP3S, etc.</p>
</div></div>
</div></div>
<div class="sect2 sect" id="certificate-authority"><div class="inner">
<div class="hgroup"><h2 class="title">Autorité de certification</h2></div>
<div class="region"><div class="contents">
<p class="para">Si les services de votre réseau nécessitent plusieurs certificats, il peut être intéressant de mettre en place votre propre <span class="em emphasis">autorité de certification (AC)</span> interne. En effet, cela permet aux différents services utilisant des certificats de faire confiance aisément aux autres services utilisant des certificats émis par la même AC.</p>
<div class="steps"><div class="inner"><ol class="steps">
<li class="steps">
  
              <p class="para">Créez d'abord les répertoires qui hébergeront le certificat de l'AC et ses divers fichiers :</p>    

<div class="screen"><pre class="contents "><span class="cmd command">sudo mkdir /etc/ssl/CA</span>
<span class="cmd command">sudo mkdir /etc/ssl/newcerts</span>
</pre></div>

            </li>
<li class="steps">
  
              <p class="para">L'AC a besoin de quelques fichiers supplémentaires pour être opérationnelle. Un pour garder trace du dernier numéro de série utilisé par l'AC (chaque certificat doit avoir un numéro de série distinct) et un autre pour garder trace des certificats générés :</p>    

<div class="screen"><pre class="contents "><span class="cmd command">sudo sh -c "echo '01' &gt; /etc/ssl/CA/serial"</span>
<span class="cmd command">sudo touch /etc/ssl/CA/index.txt</span>
</pre></div>

            </li>
<li class="steps">
  
              <p class="para">Le troisième fichier est celui des paramètres de l'AC. Bien qu'il ne soit pas strictement nécessaire, il est utile lors de la génération de plusieurs certificats. Modifiez <span class="file filename">/etc/ssl/openssl.cnf</span> et changez la déclaration <span class="em emphasis">[ CA_default ]</span> :</p>    

<div class="code"><pre class="contents ">dir             = /etc/ssl              # Where everything is kept
database        = $dir/CA/index.txt     # database index file.
certificate     = $dir/certs/cacert.pem # The CA certificate
serial          = $dir/CA/serial        # The current serial number
private_key     = $dir/private/cakey.pem# The private key
</pre></div>    

            </li>
<li class="steps">
  
              <p class="para">Ensuite, créez le certificat racine auto-signé :</p>    

<div class="screen"><pre class="contents "><span class="cmd command">openssl req -new -x509 -extensions v3_ca -keyout cakey.pem -out cacert.pem -days 3650</span>
</pre></div>

              <p class="para">Il vous sera demandé de donner les renseignements concernant le certificat.</p>

            </li>
<li class="steps">
  
              <p class="para">Installez maintenant le certificat racine et la clef :</p>    

<div class="screen"><pre class="contents "><span class="cmd command">sudo mv cakey.pem /etc/ssl/private/</span>
<span class="cmd command">sudo mv cacert.pem /etc/ssl/certs/</span>
</pre></div>

            </li>
<li class="steps">
  
              <p class="para">Vous êtes maintenant prêts à signer des certificats. Le premier élément nécessaire est un Certificate Signing Request (CSR) (plus de détails sont disponibles sur <a class="xref" href="certificates-and-security.html#generating-a-csr" title="Génération d'une demande de signature de certificat (Certificate Signing Request ou CSR)">Génération d'une demande de signature de certificat (Certificate Signing Request ou CSR)</a>). Une fois que vous avez un CSR, entrez ce qui suit pour générer un certificat signé par le CA:</p>    

<div class="screen"><pre class="contents "><span class="cmd command">sudo openssl ca -in server.csr -config /etc/ssl/openssl.cnf</span>
</pre></div>

              <p class="para">Après avoir saisi un mot de passe pour la clé de l'AC, il vous sera demandé de signer le certificat. Une somme importante de données défileront ensuite à l'écran durant la création du certificat.</p>

            </li>
<li class="steps">   

              <p class="para">Il devrait maintenant y avoir un nouveau fichier, <span class="file filename">/etc/ssl/newcerts/01.pem</span>, contenant la même sortie. Copiez et collez toutes les lignes à partir de : <span class="em emphasis">-----BEGIN CERTIFICATE-----</span> jusqu'à la ligne : <span class="em emphasis">-----END CERTIFICATE-----</span> dans un fichier nommé selon le nom d'hôte du serveur ou le certificat sera installé. Par exemple <span class="file filename">courriel.exemple.com.crt</span> est un nom suffisamment précis.</p>

              <p class="para">Les certificats suivants seront nommés <span class="file filename">02.pem</span>, <span class="file filename">03.pem</span> etc.</p>

              <div class="note" title="Note"><div class="inner"><div class="region"><div class="contents">
                <p class="para">Remplacez <span class="em emphasis">mail.exemple.com.crt</span> par le nom correspondant à votre nom d'hôte.</p>
              </div></div></div></div>

            </li>
<li class="steps">
  
              <p class="para">Pour finir, copier le nouveau certificat vers son hôte et paramétrez les programmes devant l'utiliser. L'endroit par défaut pour installer les certificats est <span class="file filename">/etc/ssl/certs</span>. Cela permet à de multiples services d'utiliser le même certificat sans compliquer de trop la gestion des droits d'accès aux fichiers.</p>    

              <p class="para">Pour les programmes pouvant être paramétrés pour utiliser un certificat issu d'une AC, vous devriez copier aussi le fichier <span class="file filename">/etc/ssl/certs/cacert.pem</span> vers le répertoire <span class="file filename">/etc/ssl/certs/</span> de chaque serveur.</p>

            </li>
</ol></div></div>
</div></div>
</div></div>
<div class="sect2 sect" id="certificate-references"><div class="inner">
<div class="hgroup"><h2 class="title">Références</h2></div>
<div class="region"><div class="contents"><div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
              <p class="para">
              For more detailed instructions on using cryptography see the
              <a href="http://tldp.org/HOWTO/SSL-Certificates-HOWTO/index.html" class="ulink" title="http://tldp.org/HOWTO/SSL-Certificates-HOWTO/index.html">SSL Certificates HOWTO</a> by tldp.org:
              </p>
            </li>
<li class="list itemizedlist">
              <p class="para">
              The Wikipedia <a href="http://en.wikipedia.org/wiki/HTTPS" class="ulink" title="http://en.wikipedia.org/wiki/HTTPS">HTTPS</a> page has more information regarding HTTPS.
              </p>
            </li>
<li class="list itemizedlist">
              <p class="para">Pour plus d'informations sur <span class="em emphasis">OpenSSL</span> consultez le <a href="http://www.openssl.org/" class="ulink" title="http://www.openssl.org/">site Web de OpenSSL</a>.</p>
            </li>
<li class="list itemizedlist">
              <p class="para">
              Also, O'Reilly's <a href="http://oreilly.com/catalog/9780596002701/" class="ulink" title="http://oreilly.com/catalog/9780596002701/">Network Security with OpenSSL</a> is a good
              in-depth reference.
              </p>
            </li>
</ul></div></div></div>
</div></div>
</div>
<div class="links nextlinks">
<a class="nextlinks-prev" href="apparmor.html" title="AppArmor">Précédent</a><a class="nextlinks-next" href="ecryptfs.html" title="eCryptfs">Suivant</a>
</div>
<div class="clear"></div>
</div>
<div id="pagebottom"></div>
</div></div>
</div>
<div id="footer"><p>The material in this document is available under a free license, see <a href="../../legal.html">Legal</a> for details.<br>
          For information on contributing see the <a href="https://wiki.ubuntu.com/DocumentationTeam">Ubuntu Documentation Team wiki page</a>.
          To report errors in this serverguide documentation, <a href="https://bugs.launchpad.net/serverguide">file a bug report</a>.</p></div>
</div>
</body>
</html>
