<!DOCTYPE html>
<html lang=fr>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Serveur FTP</title>
<link rel="stylesheet" type="text/css" href="fr.css">
<script type="text/javascript" src="jquery.js"></script><script type="text/javascript" src="jquery.syntax.js"></script><script type="text/javascript" src="yelp.js"></script>
</head>
<body id="home">
<script src="https://ssl.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">
        _uacct = "UA-1018242-8";
        urchinTracker();
      </script><div id="container">
<div id="container-inner">
<div id="mothership"><ul>
<li><a href="http://www.ubuntu.com/partners">Partners</a></li>
<li><a href="http://www.ubuntu.com/support">Support</a></li>
<li><a href="http://www.ubuntu.com/community">Community</a></li>
<li><a href="http://www.ubuntu.com">Ubuntu.com</a></li>
</ul></div>
<div id="header">
<h1 id="ubuntu-header"><a href="https://help.ubuntu.com/">Ubuntu Documentation</a></h1>
<ul id="main-menu">
<li><a class="main-menu-item current" href="../../">Official Documentation</a></li>
<li><a href="https://help.ubuntu.com/community/CommunityHelpWiki">Community Help Wiki</a></li>
<li><a href="http://community.ubuntu.com/contribute/documentation/">Contribute</a></li>
</ul>
</div>
<div id="menu-search"><div id="search-box">
<noscript><form action="https://www.google.com/cse" id="cse-search-box"><div>
<input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq"><input type="hidden" name="ie" value="UTF-8"><input type="text" name="q" size="21"><input type="submit" name="sa" value="Search">
</div></form></noscript>
<script>
                document.write('<form action="../../search.html" id="cse-search-box">');
                document.write('  <div>');
                document.write('    <input type="hidden" name="cof" value="FORID:9">');
                document.write('    <input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq">');
                document.write('    <input type="hidden" name="ie" value="UTF-8">');
                document.write('    <input type="text" name="q" size="21">');
                document.write('    <input type="submit" name="sa" value="Search">');
                document.write('  </div>');
                document.write('</form>');
              </script>
</div></div>
<div class="trails"><div class="trail">
<a href="../../16.04" class="trail">Ubuntu 16.04</a> » <a class="trail" href="index.html" title="Guide du serveur Ubuntu">Guide du serveur Ubuntu</a> » <a class="trail" href="file-servers.html" title="Serveurs de fichiers">Serveurs de fichiers</a> » </div></div>
<div id="cwt-content" class="clearfix content-area"><div id="page">
<div id="content">
<div class="links nextlinks">
<a class="nextlinks-prev" href="file-servers.html" title="Serveurs de fichiers">Précédent</a><a class="nextlinks-next" href="network-file-system.html" title="Network File System (NFS)">Suivant</a>
</div>
<div class="hgroup"><h1 class="title">Serveur FTP</h1></div>
<div class="region">
<div class="contents">
<p class="para">
          File Transfer Protocol (FTP) is a TCP protocol for
          downloading files between computers.  In the past, it has
          also been used for uploading but, as that method does not
          use encryption, user credentials as well as data transferred
          in the clear and are easily intercepted.  So if you are here
          looking for a way to upload and download files securely, see
          the section on <span class="app application">OpenSSH</span> in <a class="xref" href="remote-administration.html" title="Administration à distance">Administration à distance</a> instead.
          </p>
<p class="para">
          FTP works on a client/server model. The server component is
          called an <span class="em emphasis">FTP daemon</span>. It continuously
          listens for FTP requests from remote clients. When a request
          is received, it manages the login and sets up the
          connection. For the duration of the session it executes any
          of commands sent by the FTP client.
          </p>
<p class="para">L'accès à un serveur FTP peut être pris en charge de deux façons :</p>
<div class="list itemizedlist"><ul class="list itemizedlist compact">
<li class="list itemizedlist">
              <p class="para">Anonyme</p>
            </li>
<li class="list itemizedlist">
              <p class="para">Authentifié</p>
            </li>
</ul></div>
<p class="para">
          In the Anonymous mode, remote clients can access the FTP
          server by using the default user account called
          "anonymous" or "ftp" and sending an
          email address as the password.  In the Authenticated mode a
          user must have an account and a password.  This latter
          choice is very insecure and should not be used except in
          special circumstances.  If you are looking to transfer files
          securely see SFTP in the section on OpenSSH-Server.  User
          access to the FTP server directories and files is dependent
          on the permissions defined for the account used at login. As
          a general rule, the FTP daemon will hide the root directory
          of the FTP server and change it to the FTP Home
          directory. This hides the rest of the file system from
          remote sessions.
          </p>
</div>
<div class="links sectionlinks" role="navigation"><ul>
<li class="links"><a class="xref" href="ftp-server.html#vsftpd-ftp-server-installation" title="vsftpd - Installation du serveur FTP">vsftpd - Installation du serveur FTP</a></li>
<li class="links"><a class="xref" href="ftp-server.html#vsftpd-anonymous-configuration" title="Configuration d'un FTP anonyme">Configuration d'un FTP anonyme</a></li>
<li class="links"><a class="xref" href="ftp-server.html#vsftpd-userauth-configuration" title="Configuration d'un serveur FTP avec authentification des utilisateurs">Configuration d'un serveur FTP avec authentification des utilisateurs</a></li>
<li class="links"><a class="xref" href="ftp-server.html#vsftpd-security" title="Sécuriser le serveur FTP">Sécuriser le serveur FTP</a></li>
<li class="links"><a class="xref" href="ftp-server.html#vsftpd-references" title="Références">Références</a></li>
</ul></div>
<div class="sect2 sect" id="vsftpd-ftp-server-installation"><div class="inner">
<div class="hgroup"><h2 class="title">vsftpd - Installation du serveur FTP</h2></div>
<div class="region"><div class="contents">
<p class="para"><span class="app application">vsftpd</span> est un démon FTP disponible dans Ubuntu. Il est facile à installer, à configurer et à entretenir. Pour installer <span class="app application">vsftpd</span> vous pouvez exécuter la commande suivante :</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo apt install vsftpd</span>
</pre></div>
</div></div>
</div></div>
<div class="sect2 sect" id="vsftpd-anonymous-configuration"><div class="inner">
<div class="hgroup"><h2 class="title">Configuration d'un FTP anonyme</h2></div>
<div class="region"><div class="contents">
<p class="para">Par défaut, <span class="app application">vsftpd</span> n'est <span class="em emphasis">pas</span> configuré pour permettre le téléchargement anonyme. Si vous souhaitez activer le téléchargement anonyme, modifiez le fichier de configuration <span class="file filename">/etc/vsftpd.conf</span> en changeant :</p>
<div class="code"><pre class="contents ">anonymous_enable=Yes
</pre></div>
<p class="para">Lors de l'installation, un utilisateur <span class="em emphasis">ftp</span> est créé avec un répertoire personnel nommé <span class="file filename">/srv/ftp</span>. Il s'agit du répertoire FTP par défaut.</p>
<p class="para">Si vous souhaitez modifier cet emplacement en <span class="file filename">/srv/files/ftp</span> par exemple, il suffit de créer un répertoire dans un autre emplacement et de changer le répertoire personnel de l'utilisateur <span class="file filename">/srv/files/ftp</span> :</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo mkdir /srv/files/ftp</span>
<span class="cmd command">sudo usermod -d /srv/files/ftp ftp</span> 
</pre></div>
<p class="para">Les changements effectués, redémarrez <span class="app application">vsftpd</span> :</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo restart vsftpd</span>
</pre></div>
<p class="para">Enfin, copiez les fichiers et répertoires que vous voulez rendre disponibles via le serveur FTP anonyme dans <span class="file filename">/srv/files/ftp</span>, ou alors <span class="file filename">/srv/ftp</span> si vous souhaitez utiliser le dossier par défaut .</p>
</div></div>
</div></div>
<div class="sect2 sect" id="vsftpd-userauth-configuration"><div class="inner">
<div class="hgroup"><h2 class="title">Configuration d'un serveur FTP avec authentification des utilisateurs</h2></div>
<div class="region"><div class="contents">
<p class="para">Par défaut, <span class="app application">vsftpd</span> est configuré pour authentifier les utilisateurs système et leur permettre de télécharger des fichiers. Si vous voulez que les utilisateurs puissent envoyer des fichiers sur le serveur, modifiez <span class="file filename">/etc/vsftpd.conf</span> :</p>
<div class="code"><pre class="contents ">write_enable=YES
</pre></div>
<p class="para">Redémarrez maintenant <span class="app application">vsftpd</span> :</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo restart vsftpd</span>
</pre></div>
<p class="para">Maintenant lorsque des utilisateurs de votre système se connectent au FTP, leur répertoire racine sera leur répertoire <span class="em emphasis">personnel (/home/utilisateur)</span> dans lequel ils pourront télécharger (download/upload), créer des répertoires etc…</p>
<p class="para">De même, par défaut, les utilisateurs anonymes ne sont pas autorisés à envoyer des fichiers vers le serveur FTP. Pour modifier ce paramètre, vous pouvez supprimer le commentaire de la ligne suivante puis redémarrer <span class="app application">vsftpd</span> :</p>
<div class="code"><pre class="contents ">anon_upload_enable=YES
</pre></div>
<div class="note note-warning" title="Avertissement"><div class="inner"><div class="region"><div class="contents">
                  <p class="para">Autoriser des téléchargements (upload) anonymes d'Internet vers le serveur est une faille de sécurité majeure. Il est préférable de ne pas l'autoriser pour des serveurs branchés directement sur Internet.</p>
                </div></div></div></div>
<p class="para">Le fichier de configuration est composé de plusieurs paramètres de configuration. Les informations à propos de chaque paramètre sont disponibles dans le fichier de configuration. Vous pouvez aussi vous référer à la page du manuel (man page), <span class="cmd command">man 5 vsftpd.conf</span> pour les détails de chaque paramètre.</p>
</div></div>
</div></div>
<div class="sect2 sect" id="vsftpd-security"><div class="inner">
<div class="hgroup"><h2 class="title">Sécuriser le serveur FTP</h2></div>
<div class="region"><div class="contents">
<p class="para">Des options de <span class="file filename">/etc/vsftpd.conf</span> permettent de sécuriser un tant soit peu <span class="app application">vsftpd</span>. Par exemple, les utilisateurs peuvent être confinés dans leur répertoire personnel en dé-commentant :</p>
<div class="code"><pre class="contents ">chroot_local_user=YES
</pre></div>
<p class="para">Vous pouvez aussi définir les utilisateurs qui seront confinés dans leur répertoire personnel (home) :</p>
<div class="code"><pre class="contents ">chroot_list_enable=YES
chroot_list_file=/etc/vsftpd.chroot_list
</pre></div>
<p class="para">Après avoir dé-commenté l'option ci-dessus, créez le fichier <span class="file filename">/etc/vsftpd.chroot_list</span> contenant la liste des utilisateurs à restreindre. Mettez un utilisateur par ligne. Redémarrez ensuite  <span class="app application">vsftpd</span> :</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo restart vsftpd</span>
</pre></div>
<p class="para">De manière similaire, le fichier <span class="file filename">/etc/ftpusers</span> contient les utilisateurs qui ne sont pas autorisés à se connecter au serveur FTP. la liste par défaut inclut root, daemon, nobody, etc. Écrivez dans cette liste les utilisateurs que vous ne souhaitez pas voir connectés au FTP.</p>
<p class="para">
                  FTP can also be encrypted using <span class="em emphasis">FTPS</span>.  Different from <span class="em emphasis">SFTP</span>,
                  <span class="em emphasis">FTPS</span> is FTP over Secure Socket Layer (SSL).  <span class="em emphasis">SFTP</span> is a FTP 
                  like session over an encrypted <span class="em emphasis">SSH</span> connection.  A major difference is that users
                  of SFTP need to have a <span class="em emphasis">shell</span> account on the system, instead of a 
                  <span class="em emphasis">nologin</span> shell.  Providing all users with a shell may not be ideal for some 
                  environments, such as a shared web host. However, it is possible to restrict such accounts to
                  only SFTP and disable shell interaction. See the section on OpenSSH-Server for more.
                  </p>
<p class="para">Pour configurer <span class="em emphasis">FTPS</span>, modifiez <span class="file filename">/etc/vsftpd.conf</span> et ajoutez en fin de fichier :</p>
<div class="code"><pre class="contents ">ssl_enable=Yes
</pre></div>
<p class="para">Prenez garde aux options certificat et clef :</p>
<div class="code"><pre class="contents ">rsa_cert_file=/etc/ssl/certs/ssl-cert-snakeoil.pem
rsa_private_key_file=/etc/ssl/private/ssl-cert-snakeoil.key
</pre></div>
<p class="para">Par défaut, ces options sont définies dans le certificat et la clé fournie par le paquet <span class="app application">ssl-cert</span>. Dans un environnement de production, ceux-ci doivent être remplacés par un certificat et une clé générés pour l'hôte spécifique. Pour plus d'informations sur les certificats, voir <a class="xref" href="certificates-and-security.html" title="Certificats">Certificats</a>.</p>
<p class="para">Redémarrez maintenant <span class="app application">vsftpd</span>, et les utilisateurs non-anonymes seront désormais forcés d'utiliser <span class="em emphasis">FTPS</span> :</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo restart vsftpd</span>
</pre></div>
<p class="para">Pour permettre aux utilisateurs avec un shell <span class="file filename">/usr/sbin/nologin</span> de se connecter au FTP, mais sans accès shell, il est nécessaire d'ajouter le shell <span class="em emphasis">nologin</span> au fichier <span class="file filename">/etc/shells</span> :</p>
<div class="code"><pre class="contents "># /etc/shells: shells de connexion valides
/bin/csh
/bin/sh
/usr/bin/es
/usr/bin/ksh
/bin/ksh
/usr/bin/rc
/usr/bin/tcsh
/bin/tcsh
/usr/bin/esh
/bin/dash
/bin/bash
/bin/rbash
/usr/bin/screen
/usr/sbin/nologin
</pre></div>
<p class="para">En effet, par défaut, <span class="app application">vsftpd</span> utilise PAM pour l'identification et le fichier de configuration <span class="file filename">/etc/pam.d/vsftpd</span> stipule :</p>
<div class="code"><pre class="contents ">auth    required        pam_shells.so
</pre></div>
<p class="para">Le module PAM <span class="em emphasis">shells</span> a pour effet de n'autoriser que les shells listés dans le fichier <span class="file filename">/etc/shells</span>.</p>
<p class="para">Les clients FTP les plus populaires peuvent être configurés pour se connecter en utilisant FTPS. Le client FTP en ligne de commande <span class="app application">lftp</span> a aussi la possibilité d'utiliser FTPS.</p>
</div></div>
</div></div>
<div class="sect2 sect" id="vsftpd-references"><div class="inner">
<div class="hgroup"><h2 class="title">Références</h2></div>
<div class="region"><div class="contents"><div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
                      <p class="para">Consultez le <a href="http://vsftpd.beasts.org/vsftpd_conf.html" class="ulink" title="http://vsftpd.beasts.org/vsftpd_conf.html">site internet de vsftpd</a> pour de plus amples informations.</p>
                    </li>
<li class="list itemizedlist">
                      <p class="para">
                      For detailed <span class="file filename">/etc/vsftpd.conf</span> options see the 
                      <a href="http://manpages.ubuntu.com/manpages/xenial/en/man5/vsftpd.conf.5.html" class="ulink" title="http://manpages.ubuntu.com/manpages/xenial/en/man5/vsftpd.conf.5.html">vsftpd.conf man page</a>.
                      </p>
                    </li>
</ul></div></div></div>
</div></div>
</div>
<div class="links nextlinks">
<a class="nextlinks-prev" href="file-servers.html" title="Serveurs de fichiers">Précédent</a><a class="nextlinks-next" href="network-file-system.html" title="Network File System (NFS)">Suivant</a>
</div>
<div class="clear"></div>
</div>
<div id="pagebottom"></div>
</div></div>
</div>
<div id="footer"><p>The material in this document is available under a free license, see <a href="../../legal.html">Legal</a> for details.<br>
          For information on contributing see the <a href="https://wiki.ubuntu.com/DocumentationTeam">Ubuntu Documentation Team wiki page</a>.
          To report errors in this serverguide documentation, <a href="https://bugs.launchpad.net/serverguide">file a bug report</a>.</p></div>
</div>
</body>
</html>
