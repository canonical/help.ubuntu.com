<!DOCTYPE html>
<html lang=it>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Server FTP</title>
<link rel="stylesheet" type="text/css" href="it.css">
<script type="text/javascript" src="jquery.js"></script><script type="text/javascript" src="jquery.syntax.js"></script><script type="text/javascript" src="yelp.js"></script>
</head>
<body id="home">
<script src="https://ssl.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">
        _uacct = "UA-1018242-8";
        urchinTracker();
      </script><div id="container">
<div id="container-inner">
<div id="mothership"><ul>
<li><a href="https://partners.ubuntu.com">Partners</a></li>
<li><a href="https://www.ubuntu.com/support/community-support">Support</a></li>
<li><a href="https://community.ubuntu.com">Community</a></li>
<li><a href="https://www.ubuntu.com">Ubuntu.com</a></li>
</ul></div>
<div id="header">
<h1 id="ubuntu-header"><a href="https://help.ubuntu.com/">Ubuntu Documentation</a></h1>
<ul id="main-menu">
<li><a class="main-menu-item current" href="../../">Official Documentation</a></li>
<li><a href="https://help.ubuntu.com/community/CommunityHelpWiki">Community Help Wiki</a></li>
<li><a href="https://community.ubuntu.com/t/contribute/26">Contribute</a></li>
</ul>
</div>
<div id="menu-search"><div id="search-box">
<noscript><form action="https://www.google.com/cse" id="cse-search-box"><div>
<input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq"><input type="hidden" name="ie" value="UTF-8"><input type="text" name="q" size="21"><input type="submit" name="sa" value="Search">
</div></form></noscript>
<script>
                document.write('<form action="../../search.html" id="cse-search-box">');
                document.write('  <div>');
                document.write('    <input type="hidden" name="cof" value="FORID:9">');
                document.write('    <input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq">');
                document.write('    <input type="hidden" name="ie" value="UTF-8">');
                document.write('    <input type="text" name="q" size="21">');
                document.write('    <input type="submit" name="sa" value="Search">');
                document.write('  </div>');
                document.write('</form>');
              </script>
</div></div>
<div class="trails"><div class="trail">
<a href="../../16.04" class="trail">Ubuntu 16.04</a> » <a class="trail" href="index.html" title="Guida a Ubuntu Server">Guida a Ubuntu Server</a> » <a class="trail" href="file-servers.html" title="Server di file">Server di file</a> » </div></div>
<div id="cwt-content" class="clearfix content-area"><div id="page">
<div id="content">
<div class="links nextlinks">
<a class="nextlinks-prev" href="file-servers.html" title="Server di file">Indietro</a><a class="nextlinks-next" href="network-file-system.html" title="NFS (Network File System)">Avanti</a>
</div>
<div class="hgroup"><h1 class="title">Server FTP</h1></div>
<div class="region">
<div class="contents">
<p class="para">File Transfer Protocol (FTP) è un protocollo TCP per scaricare file tra computer: in passato è stato usato anche per il caricamento ma, considerato che questo metodo non utilizza la cifratura, sia le credenziali dell'utente che i dati sono trasferiti in chiaro e facilmente intercettati. Se si cerca un modo per caricare e scaricare file in maniera sicura, consultare la sezione <span class="app application">OpenSSH</span> in <a class="xref" href="remote-administration.html" title="Amministrazione remota">Amministrazione remota</a>.</p>
<p class="para">FTP opera con un modello client/server: la componente server è chiamata <span class="em emphasis">demone FTP</span>, che resta in ascolto di richieste FTP da parte di client remoti. Alla ricezione di una richiesta, gestisce l'autenticazione e attiva la connessione; per la durata della connessione esegue i comandi inviati dai client FTP.</p>
<p class="para">L'accesso a un server FTP può essere gestito in due modi:</p>
<div class="list itemizedlist"><ul class="list itemizedlist compact">
<li class="list itemizedlist">
              <p class="para">Anonimo</p>
            </li>
<li class="list itemizedlist">
              <p class="para">Con autenticazione</p>
            </li>
</ul></div>
<p class="para">Nella modalità anonima, i client remoti possono accedere al server FTP usando l'account predefinito «anonymous» o «ftp» e usando come password un indirizzo email; nella modalità autenticata, un utente deve avere un account e una password: quest'ultima scelta è molto poco sicura e non dovrebbe essere usata se non in speciali circostanze. Se è necessario trasferire file in sicurezza, cercare SFTP nella sezione sui server Open-SSH. L'accesso alle directory e ai file nel server FTP dipende dai permessi definiti per l'account usato per l'accesso. Come regola generale, il demone FTP nasconde la directory root del server FTP e la modifica con la directory home di FTP, nascondendo così il resto del file system dalle sessioni remote.</p>
</div>
<div class="links sectionlinks" role="navigation"><ul>
<li class="links"><a class="xref" href="ftp-server.html#vsftpd-ftp-server-installation" title="vsftpd - Installazione del server FTP">vsftpd - Installazione del server FTP</a></li>
<li class="links"><a class="xref" href="ftp-server.html#vsftpd-anonymous-configuration" title="Configurazione anonima di FTP">Configurazione anonima di FTP</a></li>
<li class="links"><a class="xref" href="ftp-server.html#vsftpd-userauth-configuration" title="Configurazione FTP per utenti autenticati">Configurazione FTP per utenti autenticati</a></li>
<li class="links"><a class="xref" href="ftp-server.html#vsftpd-security" title="FTP sicuro">FTP sicuro</a></li>
<li class="links"><a class="xref" href="ftp-server.html#vsftpd-references" title="Riferimenti">Riferimenti</a></li>
</ul></div>
<div class="sect2 sect" id="vsftpd-ftp-server-installation"><div class="inner">
<div class="hgroup"><h2 class="title">vsftpd - Installazione del server FTP</h2></div>
<div class="region"><div class="contents">
<p class="para">Un demone FTP disponibile in Ubuntu è <span class="app application">vsftpd</span>: è semplice da installare, configurare e mantenere. È possibile installare vsftpd eseguendo il seguente comando:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo apt install vsftpd</span>
</pre></div>
</div></div>
</div></div>
<div class="sect2 sect" id="vsftpd-anonymous-configuration"><div class="inner">
<div class="hgroup"><h2 class="title">Configurazione anonima di FTP</h2></div>
<div class="region"><div class="contents">
<p class="para">Per impostazione predefinita, <span class="app application">vsftpd</span> <span class="em emphasis">non</span> è configurato per consentire di scaricare file in maniera anonima: per abilitare lo scaricamento anonimo modificare <span class="file filename">/etc/vsftpd.conf</span> cambiando:</p>
<div class="code"><pre class="contents ">anonymous_enable=Yes
</pre></div>
<p class="para">Durante l'installazione viene creato un utente <span class="em emphasis">ftp</span> con una directory home di <span class="file filename">/srv/ftp</span>; questa è la directory FTP predefinita.</p>
<p class="para">Se è necessario modificare questa posizione, per esempio in <span class="file filename">/srv/files/ftp</span>, creare semplicemente una directory in un'altra posizione e modificare la directory home dell'utente <span class="em emphasis">ftp</span>:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo mkdir /srv/files/ftp</span>
<span class="cmd command">sudo usermod -d /srv/files/ftp ftp</span> 
</pre></div>
<p class="para">Applicate le modifiche, riavviare <span class="app application">vsftpd</span>:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo restart vsftpd</span>
</pre></div>
<p class="para">Infine, copiare i file e le directory da rendere disponibili attraverso FTP anonimo in <span class="file filename">/srv/files/ftp</span> o <span class="file filename">/srv/ftp</span>, per utilizzare l'impostazione predefinita.</p>
</div></div>
</div></div>
<div class="sect2 sect" id="vsftpd-userauth-configuration"><div class="inner">
<div class="hgroup"><h2 class="title">Configurazione FTP per utenti autenticati</h2></div>
<div class="region"><div class="contents">
<p class="para">Per impostazione predefinita <span class="app application">vsftpd</span> è configurato per autenticare gli utenti di sistema e consentire loro di scaricare file: per consentire agli utenti di caricare file, modificare <span class="file filename">/etc/vsftpd.conf</span>:</p>
<div class="code"><pre class="contents ">write_enable=YES
</pre></div>
<p class="para">Riavviare <span class="app application">vsftpd</span>:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo restart vsftpd</span>
</pre></div>
<p class="para">Ora, quando gli utenti accedono via FTP, il loro punto di partenza sarà la propria directory <span class="em emphasis">home</span>, dove potranno scaricare e caricare file e creare directory.</p>
<p class="para">Allo stesso modo, per impostazione predefinita, gli utenti anonimi non possono caricare file nel server FTP: per modificare questa impostazione, occorre togliere il commento alla riga seguente e riavviare <span class="app application">vsftpd</span>:</p>
<div class="code"><pre class="contents ">anon_upload_enable=YES
</pre></div>
<div class="note note-warning" title="Avvertimento"><div class="inner"><div class="region"><div class="contents">
                  <p class="para">Abilitare il caricamento anonimo di file via FTP può compromettere la sicurezza del sistema. È sconsigliato abilitare il caricamento anonimo su server collegati direttamente a Internet.</p>
                </div></div></div></div>
<p class="para">Il file di configurazione è composto da diversi parametri di configurazione, le cui informazioni sono disponibili nel file stesso. In alternativa, è possibile fare riferimento alla pagina man (<span class="cmd command">man 5 vsftpd.conf</span>).</p>
</div></div>
</div></div>
<div class="sect2 sect" id="vsftpd-security"><div class="inner">
<div class="hgroup"><h2 class="title">FTP sicuro</h2></div>
<div class="region"><div class="contents">
<p class="para">All'interno del file di configurazione <span class="file filename">/etc/vsftpd.conf</span> di <span class="app application">vsftpd</span>, sono presenti molte opzioni per rendere il programma più sicuro. Per esempio, togliendo il commento a quanto segue, gli utenti possono essere limitati all'utilizzo solo della propria directory personale:</p>
<div class="code"><pre class="contents ">chroot_local_user=YES
</pre></div>
<p class="para">È anche possibile limitare un particolare gruppo di utenti all'utilizzo delle sole directory personali:</p>
<div class="code"><pre class="contents ">chroot_list_enable=YES
chroot_list_file=/etc/vsftpd.chroot_list
</pre></div>
<p class="para">Tolto il commento alle opzioni precedenti, creare un file <span class="file filename">/etc/vsftpd.chroot_list</span> con l'elenco degli utenti, uno per riga, quindi riavviare <span class="app application">vsftpd</span>:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo restart vsftpd</span>
</pre></div>
<p class="para">Inoltre, il file <span class="file filename">/etc/ftpusers</span> contiene un elenco di utenti a cui è <span class="em emphasis">negato</span> l'accesso FTP. L'elenco comprende gli utenti root, daemon, nobody, ecc... Per disabilitare l'accesso FTP ad altri utenti, aggiungerli semplicemente a questo elenco.</p>
<p class="para">Il protocollo FTP può anche essere cifrato utilizzando  <span class="em emphasis">FTPS</span>: a differenza di <span class="em emphasis">SFTP</span>, <span class="em emphasis">FTPS</span> è FTP su Secure Socket Layer (SSL), mentre <span class="em emphasis">SFTP</span> è una sessione FTP all'interno di una connessione cifrata con <span class="em emphasis">SSH</span>. La principale differenza consiste nel fatto che gli utenti SFTP devono avere un account <span class="em emphasis">shell</span> sul sistema, invece di una shell <span class="em emphasis">nologin</span>. Fornire però una shell a tutti gli utenti potrebbe non essere sempre applicabile in alcuni ambienti, come nei casi di servizio di host web. È tuttavia possibile restringere tali account unicamente a SFTP e disabilitare l'interazione shell: per maggiori particolari, consultare la sezione sui server OpenSSH.</p>
<p class="para">Per configurare <span class="em emphasis">FTPS</span>, modificare il file <span class="file filename">/etc/vsftpd.conf</span> aggiungendo:</p>
<div class="code"><pre class="contents ">ssl_enable=Yes
</pre></div>
<p class="para">Inoltre, notare anche le opzioni relative al certificato e alla chiave:</p>
<div class="code"><pre class="contents ">rsa_cert_file=/etc/ssl/certs/ssl-cert-snakeoil.pem
rsa_private_key_file=/etc/ssl/private/ssl-cert-snakeoil.key
</pre></div>
<p class="para">In modo predefinito queste opzioni sono impostate nel certificato e nella chiave forniti dal pacchetto <span class="app application">ssl-cert</span>: in un ambiente di produzione queste dovrebbero essere sostituite con un certificato e una chiave generati per l'host specifico. Per ulteriori informazioni sui certificati, consultare <a class="xref" href="certificates-and-security.html" title="Certificati">Certificati</a>.</p>
<p class="para">Riavviare <span class="app application">vsftpd</span> e gli utenti non-anonimi utilizzeranno <span class="em emphasis">FTPS</span>:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo restart vsftpd</span>
</pre></div>
<p class="para">Per consentire accesso FTP agli utenti dotati di una shell <span class="file filename">/usr/sbin/nologin</span>, ma non dispongono di accesso shell, modificare il file <span class="file filename">/etc/shells</span> aggiungendo <span class="em emphasis">nologin</span>:</p>
<div class="code"><pre class="contents "># /etc/shells: valid login shells
/bin/csh
/bin/sh
/usr/bin/es
/usr/bin/ksh
/bin/ksh
/usr/bin/rc
/usr/bin/tcsh
/bin/tcsh
/usr/bin/esh
/bin/dash
/bin/bash
/bin/rbash
/usr/bin/screen
/usr/sbin/nologin
</pre></div>
<p class="para">Questo è necessario poiché, in modo predefinito, <span class="app application">vsftpd</span> utilizza PAM per l'autenticazione e i file di configurazione <span class="file filename">/etc/pam.d/vsftpd</span> contiene:</p>
<div class="code"><pre class="contents ">auth    required        pam_shells.so
</pre></div>
<p class="para">Il modulo <span class="em emphasis">shells</span> di PAM limita l'accesso alle shell indicate nel file <span class="file filename">/etc/shells</span>.</p>
<p class="para">Molti popolari client FTP possono essere configurati per utilizzare connessioni FTPS: il client a riga di comando <span class="app application">lftp</span> è in grado di utilizzare FTPS.</p>
</div></div>
</div></div>
<div class="sect2 sect" id="vsftpd-references"><div class="inner">
<div class="hgroup"><h2 class="title">Riferimenti</h2></div>
<div class="region"><div class="contents"><div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
                      <p class="para">Per maggiori informazioni, consultare il <a href="http://vsftpd.beasts.org/vsftpd_conf.html" class="ulink" title="http://vsftpd.beasts.org/vsftpd_conf.html">sito web di vsftpd</a>.</p>
                    </li>
<li class="list itemizedlist">
                      <p class="para">
                      For detailed <span class="file filename">/etc/vsftpd.conf</span> options see the 
                      <a href="http://manpages.ubuntu.com/manpages/xenial/en/man5/vsftpd.conf.5.html" class="ulink" title="http://manpages.ubuntu.com/manpages/xenial/en/man5/vsftpd.conf.5.html">vsftpd.conf man page</a>.
                      </p>
                    </li>
</ul></div></div></div>
</div></div>
</div>
<div class="links nextlinks">
<a class="nextlinks-prev" href="file-servers.html" title="Server di file">Indietro</a><a class="nextlinks-next" href="network-file-system.html" title="NFS (Network File System)">Avanti</a>
</div>
<div class="clear"></div>
</div>
<div id="pagebottom"></div>
</div></div>
</div>
<div id="footer"><p>The material in this document is available under a free license, see <a href="../../legal.html">Legal</a> for details.<br>
          For information on contributing see the <a href="https://wiki.ubuntu.com/DocumentationTeam">Ubuntu Documentation Team wiki page</a>.
          To report errors in this serverguide documentation, <a href="https://bugs.launchpad.net/serverguide">file a bug report</a>.</p></div>
</div>
</body>
</html>
