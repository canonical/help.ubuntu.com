<!DOCTYPE html>
<html lang=fi>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>File Server</title>
<link rel="stylesheet" type="text/css" href="fi.css">
<script type="text/javascript" src="jquery.js"></script><script type="text/javascript" src="jquery.syntax.js"></script><script type="text/javascript" src="yelp.js"></script>
</head>
<body id="home">
<script src="https://ssl.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">
        _uacct = "UA-1018242-8";
        urchinTracker();
      </script><div id="container">
<div id="container-inner">
<div id="mothership"><ul>
<li><a href="https://partners.ubuntu.com">Partners</a></li>
<li><a href="https://www.ubuntu.com/support/community-support">Support</a></li>
<li><a href="https://community.ubuntu.com">Community</a></li>
<li><a href="https://www.ubuntu.com">Ubuntu.com</a></li>
</ul></div>
<div id="header">
<h1 id="ubuntu-header"><a href="https://help.ubuntu.com/">Ubuntu Documentation</a></h1>
<ul id="main-menu">
<li><a class="main-menu-item current" href="../../">Official Documentation</a></li>
<li><a href="https://help.ubuntu.com/community/CommunityHelpWiki">Community Help Wiki</a></li>
<li><a href="https://community.ubuntu.com/t/contribute/26">Contribute</a></li>
</ul>
</div>
<div id="menu-search"><div id="search-box">
<noscript><form action="https://www.google.com/cse" id="cse-search-box"><div>
<input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq"><input type="hidden" name="ie" value="UTF-8"><input type="text" name="q" size="21"><input type="submit" name="sa" value="Search">
</div></form></noscript>
<script>
                document.write('<form action="../../search.html" id="cse-search-box">');
                document.write('  <div>');
                document.write('    <input type="hidden" name="cof" value="FORID:9">');
                document.write('    <input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq">');
                document.write('    <input type="hidden" name="ie" value="UTF-8">');
                document.write('    <input type="text" name="q" size="21">');
                document.write('    <input type="submit" name="sa" value="Search">');
                document.write('  </div>');
                document.write('</form>');
              </script>
</div></div>
<div class="trails"><div class="trail">
<a href="../../16.04" class="trail">Ubuntu 16.04</a> » <a class="trail" href="index.html" title="Ubuntun palvelinopas">Ubuntun palvelinopas</a> » <a class="trail" href="samba.html" title="Samba">Samba</a> » </div></div>
<div id="cwt-content" class="clearfix content-area"><div id="page">
<div id="content">
<div class="links nextlinks">
<a class="nextlinks-prev" href="samba-introduction.html" title="Johdanto">Edellinen</a><a class="nextlinks-next" href="samba-printserver.html" title="Print Server">Seuraava</a>
</div>
<div class="hgroup"><h1 class="title">File Server</h1></div>
<div class="region">
<div class="contents">
<p class="para">Yksi yleisimmistä tavoista verkottaa Ubuntu ja Windows on käyttää Sambaa tiedostopalvelimena. Tämä osa kattaa <span class="app application">Samba</span>-palvelimen käyttöönoton tiedostojen jakamiseen Windows-asiakkaiden kanssa.</p>
<p class="para">
    The server will be configured to share files with any client on the network without prompting for a password.  If
    your environment requires stricter Access Controls see <a class="xref" href="samba-fileprint-security.html" title="Securing File and Print Server">Securing File and Print Server</a>.
    </p>
</div>
<div class="links sectionlinks" role="navigation"><ul>
<li class="links"><a class="xref" href="samba-fileserver.html#samba-fileserver-installation" title="Asennus">Asennus</a></li>
<li class="links"><a class="xref" href="samba-fileserver.html#samba-fileserver-configuration" title="Asetukset">Asetukset</a></li>
<li class="links"><a class="xref" href="samba-fileserver.html#samba-fileserver-resources" title="Resurssit">Resurssit</a></li>
</ul></div>
<div class="sect2 sect" id="samba-fileserver-installation"><div class="inner">
<div class="hgroup"><h2 class="title">Asennus</h2></div>
<div class="region"><div class="contents">
<p class="para">Ensimmäinen askel on asentaa <span class="app application">samba</span> -paketti. Kirjoita terminaaliin:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo apt install samba</span>
</pre></div>
<p class="para">Ja siinä kaikki; olet nyt valmis asettamaan Samban jakamaan tiedostoja.</p>
</div></div>
</div></div>
<div class="sect2 sect" id="samba-fileserver-configuration"><div class="inner">
<div class="hgroup"><h2 class="title">Asetukset</h2></div>
<div class="region"><div class="contents">
<p class="para">
      The main Samba configuration file is located in <span class="file filename">/etc/samba/smb.conf</span>.  The default configuration file
      has a significant number of comments in order to document various configuration directives.  
      </p>
<div class="note" title="Huomautus"><div class="inner"><div class="region"><div class="contents">
        <p class="para">Kaikkia mahdollisia vaihtoehtoja ei olla sisällytetty oletusasetustiedostoon. Katso <span class="file filename">smb.conf</span><span class="app application">man</span> -sivu tai <a href="http://samba.org/samba/docs/man/Samba-HOWTO-Collection/" class="ulink" title="http://samba.org/samba/docs/man/Samba-HOWTO-Collection/">Samba HOWTO Kokoelma</a> tarkempia yksityiskohtia varten.</p>
      </div></div></div></div>
<div class="steps"><div class="inner"><ol class="steps">
<li class="steps">

        <p class="para">Muokkaa ensimmäiseksi <span class="file filename">/etc/samba/smb.conf</span> -tiedoston <span class="em emphasis">[global]</span> -osiosta seuraavat avain/arvo -parit:</p>

<div class="code"><pre class="contents ">   workgroup = EXAMPLE
   ...
   security = user
</pre></div>

        <p class="para"><span class="em emphasis">security</span> -parametri on alempana [global] -osiossa ja on oletusarvoisesti  kommentoituna. Muokkaa myös <span class="em emphasis">EXAMPLE</span> vastaamaan paremmin käyttöympäristöäsi.</p>

        </li>
<li class="steps">
  
        <p class="para">Luo jaettavalle kansiolle uusi osio tiedoston loppuun tai poista kommentointi joistakin esimerkeistä:</p>

<div class="code"><pre class="contents ">[share]
    comment = Ubuntu File Server Share
    path = /srv/samba/share
    browsable = yes
    guest ok = yes
    read only = no
    create mask = 0755
</pre></div>

      <div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
          <p class="para"><span class="em emphasis">comment:</span> lyhyt kuvaus jaolle. Muokkaa tarpeen mukaan.</p>
        </li>
<li class="list itemizedlist">
          <p class="para"><span class="em emphasis">path:</span> polku jaettavaan kansioon.</p>
          <p class="para">Tämä esimerkki käyttää <span class="file filename">/srv/samba/sharename</span>, sillä <span class="em emphasis">Filesystem Hierarchy Standard (FHS)</span> mukaan, <a href="http://www.pathname.com/fhs/pub/fhs-2.3.html#SRVDATAFORSERVICESPROVIDEDBYSYSTEM" class="ulink" title="http://www.pathname.com/fhs/pub/fhs-2.3.html#SRVDATAFORSERVICESPROVIDEDBYSYSTEM">/srv</a> on mistä sijainti-riippuvainen data pitäisi palvella. Käytännössä Samba-jaot voi sijoittaa mihin tahansa tiedostojärjestelmässä, kunhan käyttöoikeudet ovat oikeat, mutta standardeista kiinni pitäminen on suotavaa.</p>
        </li>
<li class="list itemizedlist">
          <p class="para"><span class="em emphasis">browsable:</span> sallii Windows-asiakkaiden selata jaettua kansiota käyttäen<span class="app application">Windows Explorer</span>ia.</p>
        </li>
<li class="list itemizedlist">
          <p class="para">
          <span class="em emphasis">guest ok:</span> allows clients to connect to the share without supplying a password.
          </p>
        </li>
<li class="list itemizedlist">
          <p class="para">
          <span class="em emphasis">read only:</span> determines if the share is read only or if write privileges are granted.  Write privileges are allowed only when the value is <span class="em emphasis">no</span>, as is seen in this example.  If the value is <span class="em emphasis">yes</span>, then access to the share is read only.
          </p>
        </li>
<li class="list itemizedlist">
          <p class="para"><span class="em emphasis">create mask:</span> määrittelee uusien luotujen tiedostojen oikeudet.</p>
        </li>
</ul></div>

      </li>
<li class="steps">
        
        <p class="para"> 
        Now that <span class="app application">Samba</span> is configured, the directory needs to be created and the permissions
        changed.  From a terminal enter:
        </p>

<div class="screen"><pre class="contents "><span class="cmd command">sudo mkdir -p /srv/samba/share</span>
<span class="cmd command">sudo chown nobody:nogroup /srv/samba/share/</span>
</pre></div>

      <div class="note" title="Huomautus"><div class="inner"><div class="region"><div class="contents">
        <p class="para">
        The <span class="em emphasis">-p</span> switch tells mkdir to create the entire directory tree if it doesn't exist.
        </p>
      </div></div></div></div>

      </li>
<li class="steps">
     
      <p class="para">Käynnistä lopuksi <span class="app application">samba</span> uudelleen saadaksesi uudet asetukset voimaan:</p>

<div class="screen"><pre class="contents "><span class="cmd command">sudo systemctl restart smbd.service nmbd.service</span>
</pre></div>

      </li>
</ol></div></div>
<div class="note note-warning" title="Varoitus"><div class="inner"><div class="region"><div class="contents">
        <p class="para">
        Once again, the above configuration gives all access to any client on the local network.  For a more secure
        configuration see <a class="xref" href="samba-fileprint-security.html" title="Securing File and Print Server">Securing File and Print Server</a>.
        </p>
      </div></div></div></div>
<p class="para">
      From a Windows client you should now be able to browse to the Ubuntu file server and see the shared directory. If your client doesn't show your share automatically, try to access your server by its IP address, e.g. \\192.168.1.1, in a Windows Explorer window. To check that everything is working try creating a directory from Windows. 
      </p>
<p class="para">
      To create additional shares simply create new <span class="em emphasis">[dir]</span> sections in 
      <span class="file filename">/etc/samba/smb.conf</span>, and restart <span class="em emphasis">Samba</span>.  Just make sure that the directory
      you want to share actually exists and the permissions are correct.
      </p>
<div class="note" title="Huomautus"><div class="inner"><div class="region"><div class="contents">
        <p class="para">
        The file share named <span class="em emphasis">"[share]"</span> and the path <span class="file filename">/srv/samba/share</span> are just examples.
        Adjust the share and path names to fit your environment.  It is a good idea to name a share after a directory on the 
        file system.  Another example would be a share name of <span class="em emphasis">[qa]</span> with a path of <span class="file filename">/srv/samba/qa</span>.
        </p>
      </div></div></div></div>
</div></div>
</div></div>
<div class="sect2 sect" id="samba-fileserver-resources"><div class="inner">
<div class="hgroup"><h2 class="title">Resurssit</h2></div>
<div class="region"><div class="contents"><div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
          <p class="para">
          For in depth Samba configurations see the 
          <a href="http://samba.org/samba/docs/man/Samba-HOWTO-Collection/" class="ulink" title="http://samba.org/samba/docs/man/Samba-HOWTO-Collection/">Samba HOWTO Collection</a>
          </p>
        </li>
<li class="list itemizedlist">
          <p class="para">Opas on saatavilla myös <a href="http://www.amazon.com/exec/obidos/tg/detail/-/0131882228" class="ulink" title="http://www.amazon.com/exec/obidos/tg/detail/-/0131882228">painettuna versiona</a>.</p>
        </li>
<li class="list itemizedlist">
          <p class="para">
          O'Reilly's <a href="http://www.oreilly.com/catalog/9780596007690/" class="ulink" title="http://www.oreilly.com/catalog/9780596007690/">Using Samba</a> is another good
          reference.
          </p>
        </li>
<li class="list itemizedlist">
          <p class="para">
          The <a href="https://help.ubuntu.com/community/Samba" class="ulink" title="https://help.ubuntu.com/community/Samba">Ubuntu Wiki Samba </a> page.
          </p>
        </li>
</ul></div></div></div>
</div></div>
</div>
<div class="links nextlinks">
<a class="nextlinks-prev" href="samba-introduction.html" title="Johdanto">Edellinen</a><a class="nextlinks-next" href="samba-printserver.html" title="Print Server">Seuraava</a>
</div>
<div class="clear"></div>
</div>
<div id="pagebottom"></div>
</div></div>
</div>
<div id="footer"><p>The material in this document is available under a free license, see <a href="../../legal.html">Legal</a> for details.<br>
          For information on contributing see the <a href="https://wiki.ubuntu.com/DocumentationTeam">Ubuntu Documentation Team wiki page</a>.
          To report errors in this serverguide documentation, <a href="https://bugs.launchpad.net/serverguide">file a bug report</a>.</p></div>
</div>
</body>
</html>
