<!DOCTYPE html>
<html lang=fr>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Subversion</title>
<link rel="stylesheet" type="text/css" href="fr.css">
<script type="text/javascript" src="jquery.js"></script><script type="text/javascript" src="jquery.syntax.js"></script><script type="text/javascript" src="yelp.js"></script>
</head>
<body id="home">
<script src="https://ssl.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">
        _uacct = "UA-1018242-8";
        urchinTracker();
      </script><div id="container">
<div id="container-inner">
<div id="mothership"><ul>
<li><a href="http://www.ubuntu.com/partners">Partners</a></li>
<li><a href="http://www.ubuntu.com/support">Support</a></li>
<li><a href="http://www.ubuntu.com/community">Community</a></li>
<li><a href="http://www.ubuntu.com">Ubuntu.com</a></li>
</ul></div>
<div id="header">
<h1 id="ubuntu-header"><a href="https://help.ubuntu.com/">Ubuntu Documentation</a></h1>
<ul id="main-menu">
<li><a class="main-menu-item current" href="../../">Official Documentation</a></li>
<li><a href="https://help.ubuntu.com/community/CommunityHelpWiki">Community Help Wiki</a></li>
<li><a href="http://community.ubuntu.com/contribute/documentation/">Contribute</a></li>
</ul>
</div>
<div id="menu-search"><div id="search-box">
<noscript><form action="https://www.google.com/cse" id="cse-search-box"><div>
<input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq"><input type="hidden" name="ie" value="UTF-8"><input type="text" name="q" size="21"><input type="submit" name="sa" value="Search">
</div></form></noscript>
<script>
                document.write('<form action="../../search.html" id="cse-search-box">');
                document.write('  <div>');
                document.write('    <input type="hidden" name="cof" value="FORID:9">');
                document.write('    <input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq">');
                document.write('    <input type="hidden" name="ie" value="UTF-8">');
                document.write('    <input type="text" name="q" size="21">');
                document.write('    <input type="submit" name="sa" value="Search">');
                document.write('  </div>');
                document.write('</form>');
              </script>
</div></div>
<div class="trails"><div class="trail">
<a href="../../16.04" class="trail">Ubuntu 16.04</a> » <a class="trail" href="index.html" title="Guide du serveur Ubuntu">Guide du serveur Ubuntu</a> » <a class="trail" href="version-control-system.html" title="Système de contrôle de version">Système de contrôle de version</a> » </div></div>
<div id="cwt-content" class="clearfix content-area"><div id="page">
<div id="content">
<div class="links nextlinks">
<a class="nextlinks-prev" href="git.html" title="Git">Précédent</a><a class="nextlinks-next" href="version-control-ref.html" title="Références">Suivant</a>
</div>
<div class="hgroup"><h1 class="title">Subversion</h1></div>
<div class="region">
<div class="contents"><p class="para">Subversion est un système de contrôle de version libre. En utilisant Subversion, vous pourrez enregistrer l'historique des fichiers sources et des documents. Il gère les fichiers et les répertoires dans le temps. Une arborescence des fichiers est placée dans un dépôt centralisé. Ce dépôt est à peu près identique à un serveur de fichier ordinaire, sauf qu'il conserve une trace de chaque changement effectué sur les fichiers et les répertoires.</p></div>
<div class="links sectionlinks" role="navigation"><ul>
<li class="links"><a class="xref" href="subversion.html#subversion-installation" title="Installation">Installation</a></li>
<li class="links"><a class="xref" href="subversion.html#subversion-configuration" title="Configuration du serveur">Configuration du serveur</a></li>
<li class="links"><a class="xref" href="subversion.html#access-methods" title="Méthodes d'accès">Méthodes d'accès</a></li>
</ul></div>
<div class="sect2 sect" id="subversion-installation"><div class="inner">
<div class="hgroup"><h2 class="title">Installation</h2></div>
<div class="region"><div class="contents">
<p class="para">Pour fournir l'accès à un dépôt Subversion en utilisant le protocole HTTP, vous devez installer et configurer un serveur Web. Il s'avère qu'Apache2 fonctionne avec Subversion. Reportez vous à la section HTTP de la rubrique Apache2 pour installer et configurer Apache2. Pour fournir l'accès à un dépôt Subversion en utilisant le protocole HTTPS, vous devez installer et configurer un certificat numérique sur votre serveur Web Apache2. Reportez vous à la section HTTPS de la rubrique Apache2 pour installer et configurer un certificat numérique.</p>
<p class="para">Pour installer Subversion, utilisez la commande suivante dans un terminal :</p>
<p class="para">
<div class="screen"><pre class="contents "><span class="cmd command">sudo apt install subversion apache2 libapache2-svn</span>
</pre></div>
	    </p>
</div></div>
</div></div>
<div class="sect2 sect" id="subversion-configuration"><div class="inner">
<div class="hgroup"><h2 class="title">Configuration du serveur</h2></div>
<div class="region">
<div class="contents"><p class="para">Ces étapes supposent que vous ayez installé sur votre système les paquets mentionnés ci-dessus. Cette section explique comment créer un dépôt Subversion et accéder au projet.</p></div>
<div class="sect3 sect" id="create-svn-repos"><div class="inner">
<div class="hgroup"><h3 class="title">Créer un dépôt Subversion</h3></div>
<div class="region"><div class="contents">
<p class="para">Le dépôt Subversion peut être créé en utilisant la commande suivante dans un terminal :</p>
<p class="para">
<div class="screen"><pre class="contents "><span class="cmd command">svnadmin create /path/to/repos/project</span>
</pre></div>
        </p>
</div></div>
</div></div>
<div class="sect3 sect" id="import-svn-files"><div class="inner">
<div class="hgroup"><h3 class="title">Importation des fichiers</h3></div>
<div class="region"><div class="contents"><p class="para">Dès que vous avez créé le dépôt vous pouvez <span class="em emphasis">importer</span> des fichiers dans le dépôt. Pour importer un dossier, saisissez dans un terminal : <div class="screen"><pre class="contents "><span class="cmd command">svn import /chemin/vers/dossier/concerné file:///chemin/vers/depot/projet/</span>
</pre></div></p></div></div>
</div></div>
</div>
</div></div>
<div class="sect2 sect" id="access-methods"><div class="inner">
<div class="hgroup"><h2 class="title">Méthodes d'accès</h2></div>
<div class="region">
<div class="contents">
<p class="para">Les dépôts Subversion sont accessibles (vérifiés) via de nombreuses méthodes différentes (sur un disque local ou au travers de protocoles réseaux divers). L'emplacement d'un dépôt est cependant toujours un URL. Le tableau indique comment les différents types d'URL sont reliés aux méthodes d'accès disponibles.</p>
<div class="table">
<div class="title"><h3><span class="title">Méthodes d'accès</span></h3></div>
<table summary="Méthodes d'accès" style="border: solid 1px;">
<thead><tr>
<th class="td-colsep"><p class="para">Schéma</p></th>
<th><p class="para">Méthode d'accès</p></th>
</tr></thead>
<tbody>
<tr>
<td class="td-colsep"><p class="para">file://</p></td>
<td><p class="para">accès direct au dépôt (sur disque local)</p></td>
</tr>
<tr class="shade">
<td class="td-colsep"><p class="para">http://</p></td>
<td><p class="para">Accès via le protocole WebDAV au serveur Web Apache2 fournissant Subversion</p></td>
</tr>
<tr>
<td class="td-colsep"><p class="para">https://</p></td>
<td><p class="para">Identique à http://, mais avec chiffrement SSL</p></td>
</tr>
<tr class="shade">
<td class="td-colsep"><p class="para">svn://</p></td>
<td><p class="para">Accès via un protocole personnalisé à un serveur svnserve</p></td>
</tr>
<tr>
<td class="td-colsep"><p class="para">svn+ssh://</p></td>
<td><p class="para">Identique à svn://, mais au travers d'un tunnel SSH</p></td>
</tr>
</tbody>
</table>
</div>
<p class="para">Dans cette section, nous verrons comment configurer Subversion pour toutes ces méthodes d'accès. Nous voyons ici les bases. Pour une utilisation plus avancée, référez-vous au <a href="http://svnbook.red-bean.com/" class="ulink" title="http://svnbook.red-bean.com/">svn book</a> (NdT : livre non traduit en français pour l'heure).</p>
</div>
<div class="sect3 sect" id="direct-repos-access"><div class="inner">
<div class="hgroup"><h3 class="title">Accès direct au dépôt (file://)</h3></div>
<div class="region"><div class="contents">
<p class="para">C'est la plus simple des méthodes d'accès. Elle ne nécessite aucun serveur Subversion pour être exécutée. Cette méthode d'accès est utilisée lors d'un accès Subversion depuis la même machine. La syntaxe de la commande, saisie dans un terminal, est la suivante :</p>
<p class="para">
<div class="screen"><pre class="contents "><span class="cmd command">svn co file:///chemin/vers/depot/nomduprojet</span>
</pre></div>
        </p>
<p class="para">ou</p>
<p class="para">
<div class="screen"><pre class="contents "><span class="cmd command">svn co file://localhost/chemin/vers/depot/nomduprojet</span>
</pre></div>
        </p>
<div class="note" title="Note"><div class="inner"><div class="region"><div class="contents">
		<p class="para">Si vous ne spécifiez pas le nom d'hôte, il y a trois barres obliques (///), deux pour le protocole (file, dans ce cas) plus la première barre oblique de l'arborescence des fichiers. Si vous spécifiez le nom d'hôte, vous devez utiliser deux barres obliques (//).</p>
	</div></div></div></div>
<p class="para">Les droits d'accès au dépôt dépendent de ceux du système de fichiers. Si l'utilisateur a les droits d'accès en lecture et écriture, alors il peut extraire et déposer des fichiers sur le serveur.</p>
</div></div>
</div></div>
<div class="sect3 sect" id="access-via-webdav"><div class="inner">
<div class="hgroup"><h3 class="title">Accès par le protocole WebDAV (http://)</h3></div>
<div class="region"><div class="contents">
<p class="para">
                          To access the Subversion repository via WebDAV protocol, you must configure your Apache 2 web server. Add the following snippet between the 
                          <span class="em emphasis">&lt;VirtualHost&gt;</span> and <span class="em emphasis">&lt;/VirtualHost&gt;</span> elements in
                          <span class="file filename">/etc/apache2/sites-available/000-default.conf</span>, or another VirtualHost file:
                          </p>
<div class="code"><pre class="contents "> &lt;Location /svn&gt;
  DAV svn
  SVNParentPath /chemin/vers/dépôt
  AuthType Basic
  AuthName "Votre nom de dépôt"
  AuthUserFile /etc/subversion/passwd
  Require valid-user
 &lt;/Location&gt; 
</pre></div>
<div class="note" title="Note"><div class="inner"><div class="region"><div class="contents">
		<p class="para">Le fragment de configuration ci-dessus suppose que les dépôts Subversion sont créés dans le répertoire <span class="file filename">/chemin/vers/dépôt/filename&gt; en utilisant la commande <span class="cmd command">svnadmin</span> et que l'utilisateur HTTP a les droits d’accès à ces fichiers (voir ci-dessous). Ils peuvent être accessibles en utilisant l'url <span class="cmd command">http://hostname/svn/nom_du_dépôt</span>.</span></p>
    </div></div></div></div>
<p class="para">Changer la configuration apache comme ci-dessus nécessite le rechargement du service avec la commande suivante</p>
<div class="screen"><pre class="contents ">    <span class="cmd command">sudo systemctl reload apache2.service</span>
</pre></div>
<p class="para">
         To import or commit files to your Subversion repository over
         HTTP, the repository should be owned by the HTTP user. In
         Ubuntu systems, the HTTP user is
         <span class="cmd command">www-data</span>.  To change the ownership of the
         repository files enter the following command from terminal
         prompt:
         </p>
<div class="screen"><pre class="contents ">    <span class="cmd command">sudo chown -R www-data:www-data /chemin/vers/dépôt</span>
</pre></div>
<div class="note" title="Note"><div class="inner"><div class="region"><div class="contents">
        <p class="para">Si vous modifiez le propriétaire du dépôt en <span class="cmd command">www-data</span> vous ne pourrez plus importer ou renvoyer des fichiers dans le dépôt en exécutant la commande <span class="cmd command">svn import file:///</span> en tant qu'utilisateur différent de <span class="cmd command">www-data</span>.</p>
        </div></div></div></div>
<p class="para">Ensuite, vous devez créer le fichier <span class="file filename">/etc/subversion/passwd</span> qui contiendra les détails d'authentification des utilisateurs. Pour cela, saisissez la commande suivante dans une invite de terminal (ce qui créera le fichier et ajoutera le premier utilisateur) :</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo htpasswd -c /etc/subversion/passwd nom_utilisateur</span>
</pre></div>
<p class="para">Pour ajouter d'autres utilisateurs, omettez l'option <span class="em emphasis">« -c »</span> car celle-ci remplace l'ancien fichier. Utilisez à la place cette formulation :</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo htpasswd /etc/subversion/passwd nom_de_lutilisateur</span>
</pre></div>
<p class="para">Cette commande vous demande de saisir le mot de passe. Une fois le mot de passe saisi, l'utilisateur est ajouté. Dès lors, pour accéder au dépôt, vous pouvez utiliser la commande suivante :</p>
<div class="screen"><pre class="contents "><span class="cmd command">svn co http://nomduserveur/svn</span></pre></div>
<div class="note note-warning" title="Avertissement"><div class="inner"><div class="region"><div class="contents">
		<p class="para">Le mot de passe est transmis en clair, comme texte simple. Si vous craignez que des fouineurs récupèrent votre mot de passe, nous vous conseillons d'utiliser un chiffrement par SSL. Pour plus d'information, veuillez consulter la section suivante.</p>
	</div></div></div></div>
</div></div>
</div></div>
<div class="sect3 sect" id="access-via-webdav-with-ssl"><div class="inner">
<div class="hgroup"><h3 class="title">Accès par le protocole WebDAV avec un chiffrement SSL (https://)</h3></div>
<div class="region"><div class="contents">
<p class="para"> 
					Accessing Subversion repository via WebDAV protocol with SSL 
					encryption (https://) is similar to http:// except that you 
					must install and configure the digital certificate in your 
					Apache2 web server.  To use SSL with Subversion add the above
                                        Apache2 configuration to <span class="file filename">/etc/apache2/sites-available/default-ssl.conf</span>.
                                        For more information on setting up Apache2 with SSL see <a class="xref" href="httpd.html#https-configuration" title="Configuration HTTPS">Configuration HTTPS</a>.
					</p>
<p class="para">Vous pouvez installer un certificat numérique signé par une autoité de certification. Sinon, vous pouvez installer votre propre certificat auto-signé.</p>
<p class="para">Cette étape suppose que vous avez installé et configuré un certificat numérique sur votre serveur Web Apache2. Maintenant, pour accéder au dépôt Subversion, veuillez vous référer à la section ci-dessus ! Les méthodes d'accès sont exactement les mêmes, hormis le protocole. Vous devez utiliser https:// pour accéder au dépôt Subversion.</p>
</div></div>
</div></div>
<div class="sect3 sect" id="access-via-custom-protocol"><div class="inner">
<div class="hgroup"><h3 class="title">Accès via un protocole personnalisé (svn://)</h3></div>
<div class="region"><div class="contents">
<p class="para">Une fois le dépôt Subversion créé, vous pouvez configurer le contrôle d'accès. Vous pouvez modifier le fichier <span class="file filename">/path/to/repos/project/conf/svnserve.conf</span> pour cela. Par exemple, pour activer l'authentification, vous pouvez décommenter les lignes suivantes dans le fichier de configuration :</p>
<div class="code"><pre class="contents "># [general]
# password-db = passwd</pre></div>
<p class="para">Après avoir décommenté ces lignes, vous pouvez gérer la liste des utilisateurs dans le fichier passwd. Modifiez donc le fichier <span class="file filename">passwd</span> dans le même répertoire et ajoutez le nouvel utilisateur. La syntaxe se présente ainsi :</p>
<div class="code"><pre class="contents ">username = password</pre></div>
<p class="para">Pour plus de renseignements, référez-vous au fichier.</p>
<p class="para">Maintenant, pour accéder à Subversion via le protocole personnalisé svn://, soit de la même machine, soit d'une autre, vous pouvez exécuter svnserver en utilisant la commande svnserve. La syntaxe se présente ainsi :</p>
<div class="code"><pre class="contents ">$ svnserve -d --foreground -r /path/to/repos
# -d -- daemon mode
# --foreground -- run in foreground (useful for debugging)
# -r -- root of directory to serve

For more usage details, please refer to:
$ svnserve --help</pre></div>
<p class="para">Une fois la commande exécutée, Subversion démarre en écoutant le port par défaut (3690). Pour accéder au dépôt du projet, vous devez exécuter la commande suivante dans un terminal :</p>
<p class="para">
<div class="screen"><pre class="contents "><span class="cmd command">svn co svn://nom_hote/projet project --username nom_utilisateur</span>
</pre></div>
                                        </p>
<p class="para">Suivant la configuration du serveur, il vous demande un mot de passe. Une fois que vous vous êtes authentifié, il vérifie le code sur le dépôt Subversion. Pour synchroniser le dépôt du projet avec votre copie locale, vous pouvez exécuter la sous-commande <span class="cmd command">update</span>. La syntaxe de cette commande, saisie dans un terminal, est la suivante :</p>
<p class="para">
<div class="screen"><pre class="contents "><span class="cmd command">cd répertoire_du_projet ; svn update</span>
</pre></div>
                                        </p>
<p class="para">Pour plus d'informations sur l'utilisation de chaque sous-commande de Subversion, vous pouvez vous référer au manuel. Par exemple, pour en savoir plus sur la commande co (checkout), exécutez la commande suivante dans un terminal :</p>
<p class="para"><div class="screen"><pre class="contents "><span class="cmd command">svn co help</span></pre></div></p>
</div></div>
</div></div>
<div class="sect3 sect" id="access-via-custom-protocol-with-ssh"><div class="inner">
<div class="hgroup"><h3 class="title">Accès par protocole personnalisé avec chiffrement SSH (svn+ssh://)</h3></div>
<div class="region"><div class="contents">
<p class="para">La configuration et le processus du serveur est le même que pour la méthode svn://. Pour plus de détails, veuillez vous référer au chapitre précédent. Dans cette étape, nous supposons que vous avez suivi l'étape précédente et que vous avez démarré le serveur Subversion en utilisant la commande <span class="app application">svnserve</span>.</p>
<p class="para">De même, nous supposons que le serveur ssh s'exécute sur cette machine et que les connexions entrantes y sont autorisées. Pour vous en assurer, essayez de vous connecter à la machine en utilisant ssh. Si vous pouvez vous identifier, alors tout est parfait. Si vous ne pouvez pas vous identifier, résolvez le problème avant de continuer.</p>
<p class="para">Le protocole svn+ssh:// est utilisé pour accéder au dépôt Subversion en utilisant un chiffrement SSL. Le transfert de données est chiffré en utilisant cette méthode. Pour accéder au dépôt du projet (pour une vérification par exemple), vous devez utiliser la syntaxe suivante :</p>
<p class="para">
<div class="screen"><pre class="contents ">    <span class="cmd command">svn co svn+ssh://ssh_utilisateur@hôte/chemin/vers/dépôt/du/projet</span>
</pre></div>
                                        </p>
<div class="note" title="Note"><div class="inner"><div class="region"><div class="contents"><p class="para">Vous devez utiliser le chemin complet (/chemin/vers/dépôt/projet) pour accéder au dépôt Subversion en utilisant cette méthode d'accès.</p></div></div></div></div>
<p class="para">Suivant la configuration du serveur, il vous demande un mot de passe. Vous devez saisir le mot de passe que vous utilisez pour vous identifier via ssh. Une fois que vous vous êtes authentifié, il vérifie le code sur le dépôt Subversion.</p>
</div></div>
</div></div>
</div>
</div></div>
</div>
<div class="links nextlinks">
<a class="nextlinks-prev" href="git.html" title="Git">Précédent</a><a class="nextlinks-next" href="version-control-ref.html" title="Références">Suivant</a>
</div>
<div class="clear"></div>
</div>
<div id="pagebottom"></div>
</div></div>
</div>
<div id="footer"><p>The material in this document is available under a free license, see <a href="../../legal.html">Legal</a> for details.<br>
          For information on contributing see the <a href="https://wiki.ubuntu.com/DocumentationTeam">Ubuntu Documentation Team wiki page</a>.
          To report errors in this serverguide documentation, <a href="https://bugs.launchpad.net/serverguide">file a bug report</a>.</p></div>
</div>
</body>
</html>
