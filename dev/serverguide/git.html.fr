<!DOCTYPE html>
<html lang=fr>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Git</title>
<link rel="stylesheet" type="text/css" href="fr.css">
<script type="text/javascript" src="jquery.js"></script><script type="text/javascript" src="jquery.syntax.js"></script><script type="text/javascript" src="yelp.js"></script>
</head>
<body id="home">
<script src="https://ssl.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">
        _uacct = "UA-1018242-8";
        urchinTracker();
      </script><script>
      function englishPageVersion() {
        var href = window.location.href;
        if (href.slice(-1) == "/") {
                window.location = "index.html.en";
        } else {
                window.location = href.replace(/\.html.*/, ".html.en");
        }
         return false;
      }
      function browserPreferredLanguage() {
        var href = window.location.href;
        if (href.slice(-1) == "/") {
                window.location = href;
        } else {
                window.location = href.replace(/\.html.*/, ".html");
        }
        return false;
      }
      </script><div id="container">
<div id="container-inner">
<div id="mothership"><ul>
<li><a href="https://partners.ubuntu.com">Partners</a></li>
<li><a href="https://www.ubuntu.com/support/community-support">Support</a></li>
<li><a href="https://community.ubuntu.com">Community</a></li>
<li><a href="https://www.ubuntu.com">Ubuntu.com</a></li>
</ul></div>
<div id="header">
<h1 id="ubuntu-header"><a href="https://help.ubuntu.com/">Ubuntu Documentation</a></h1>
<ul id="main-menu">
<li><a class="main-menu-item current" href="../../">Official Documentation</a></li>
<li><a href="https://help.ubuntu.com/community/CommunityHelpWiki">Community Help Wiki</a></li>
<li><a href="https://community.ubuntu.com/t/contribute/26">Contribute</a></li>
</ul>
</div>
<div id="menu-search"><div id="search-box">
<noscript><form action="https://www.google.com/cse" id="cse-search-box"><div>
<input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq"><input type="hidden" name="ie" value="UTF-8"><input type="text" name="q" size="21"><input type="submit" name="sa" value="Search">
</div></form></noscript>
<script>
                document.write('<form action="../../search.html" id="cse-search-box">');
                document.write('  <div>');
                document.write('    <input type="hidden" name="cof" value="FORID:9">');
                document.write('    <input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq">');
                document.write('    <input type="hidden" name="ie" value="UTF-8">');
                document.write('    <input type="text" name="q" size="21">');
                document.write('    <input type="submit" name="sa" value="Search">');
                document.write('  </div>');
                document.write('</form>');
              </script>
</div></div>
<div class="trails"><div class="trail">
<a href="../../18.04" class="trail">Ubuntu 18.04</a> » <a class="trail" href="index.html.fr" title="Guide du serveur Ubuntu">Guide du serveur Ubuntu</a> » <a class="trail" href="version-control-system.html.fr" title="Système de contrôle de version">Système de contrôle de version</a> » </div></div>
<div id="cwt-content" class="clearfix content-area"><div id="page">
<div id="content">
<div class="links nextlinks">
<a class="nextlinks-prev" href="bazaar.html.fr" title="Bazaar">Précédent</a><a class="nextlinks-next" href="subversion.html.fr" title="Subversion">Suivant</a>
</div>
<div class="hgroup"><h1 class="title">Git</h1></div>
<div class="region">
<div class="contents"><p class="para">Git est un système open source de contrôle de version distribuée développé à l'origine par Linus Torvalds pour soutenir le développement du noyau Linux. Chaque répertoire de travail Git est un dépôt à part entière avec l'historique complet et la traçabilité  des fonctionnalités de toutes les versions,  indépendant de l'accès au réseau ou d'un serveur central.</p></div>
<div class="links sectionlinks" role="navigation"><ul>
<li class="links"><a class="xref" href="git.html.fr#git-installation" title="Installation">Installation</a></li>
<li class="links"><a class="xref" href="git.html.fr#git-configuration" title="Configuration">Configuration</a></li>
<li class="links"><a class="xref" href="git.html.fr#git-usage" title="Utilisation basique">Utilisation basique</a></li>
<li class="links"><a class="xref" href="git.html.fr#git-installing-gitolite" title="Installation d'un serveur gitolite">Installation d'un serveur gitolite</a></li>
<li class="links"><a class="xref" href="git.html.fr#git-configuring-gitolite" title="Configuration de gitolite">Configuration de gitolite</a></li>
<li class="links"><a class="xref" href="git.html.fr#git-gitolite-management" title="Gestion des utilisateurs et des dépôts gitolite">Gestion des utilisateurs et des dépôts gitolite</a></li>
<li class="links"><a class="xref" href="git.html.fr#git-gitolite-usage" title="Utilisation de votre serveur">Utilisation de votre serveur</a></li>
</ul></div>
<div class="sect2 sect" id="git-installation"><div class="inner">
<div class="hgroup"><h2 class="title">Installation</h2></div>
<div class="region"><div class="contents">
<p class="para">Le système de contrôle de version <span class="app application">git</span> est installé avec la commande suivante</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo apt install git</span>
</pre></div>
</div></div>
</div></div>
<div class="sect2 sect" id="git-configuration"><div class="inner">
<div class="hgroup"><h2 class="title">Configuration</h2></div>
<div class="region"><div class="contents">
<p class="para">Chaque utilisateur de git devrait d'abord se présenter à git, en exécutant ces deux commandes :</p>
<div class="screen"><pre class="contents "><span class="cmd command">git config --global user.email « vous@example.com »</span>
<span class="cmd command">git config --global user.name « votre nom d'utilisateur »</span>
</pre></div>
</div></div>
</div></div>
<div class="sect2 sect" id="git-usage"><div class="inner">
<div class="hgroup"><h2 class="title">Utilisation basique</h2></div>
<div class="region"><div class="contents">
<p class="para">
                The above is already sufficient to use git in a distributed and 
                secure way, provided users have access to the machine assuming 
                the server role via SSH. On the server machine, creating a new 
                repository can be done with:
            </p>
<div class="screen"><pre class="contents "><span class="cmd command">git init --bare /chemin/vers/dépôt</span>
</pre></div>
<div class="note" title="Note"><div class="inner"><div class="region"><div class="contents"><p class="para">This creates a bare repository, that cannot be used to edit files directly. If you would rather have a working copy of the contents of the repository on the server, ommit the <span class="em emphasis">--bare</span> option.</p></div></div></div></div>
<p class="para">
                Any client with SSH access to the machine can then clone the 
                repository with:
            </p>
<div class="screen"><pre class="contents "><span class="cmd command">git clone utilisateur@hôte:/chemin/vers/dépôt</span>
</pre></div>
<p class="para">
                Once cloned to the client's machine, the client can edit files, then commit and share them with:
            </p>
<div class="screen"><pre class="contents "><span class="cmd command">cd /chemin/vers/dépôt</span>
<span class="cmd command">#(modifie des fichiers</span>
<span class="cmd command">git commit -a # réalise tous les changements dans la version locale du dépôt</span>
<span class="cmd command">git push origin master # Induit les changements sur la version serveur du dépôt</span>
</pre></div>
</div></div>
</div></div>
<div class="sect2 sect" id="git-installing-gitolite"><div class="inner">
<div class="hgroup"><h2 class="title">Installation d'un serveur gitolite</h2></div>
<div class="region"><div class="contents">
<p class="para">Alors que ce qui précède est suffisant pour créer, cloner et modifier les dépôts, les utilisateurs désirant installer git sur un serveur préfèreront davantage un fonctionnement tel un serveur de gestion de contrôle de source plus traditionnel, multi-utilisateurs et l’accès à la gestion des droits. La solution suggérée est d'installer <span class="app application">gitolite</span> avec la commande suivante :</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo apt install gitolite</span>
</pre></div>
</div></div>
</div></div>
<div class="sect2 sect" id="git-configuring-gitolite"><div class="inner">
<div class="hgroup"><h2 class="title">Configuration de gitolite</h2></div>
<div class="region"><div class="contents">
<p class="para">La configuration de <span class="app application">gitolite</span> est un peu différente que celle de la plupart des serveurs sur les systèmes comme Unix. À la place du fichier de configuration habituel dans  /etc/, gitolite place sa configuration dans un dépôt git. La première étape pour configurer une nouvelle installation est donc de permettre l’accès au dépôt de configuration.</p>
<p class="para">Tout d’abord, créons un utilisateur pour gitolite afin d'y accéder.</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo adduser --system --shell /bin/bash --group --disabled-password --home /home/git git</span>
</pre></div>
<p class="para">
        Now we want to let gitolite know about the repository administrator's public SSH key. This assumes that the current user is the repository administrator.
        If you have not yet configured an SSH key, refer to <a class="xref" href="openssh-server.html.fr#openssh-keys" title="Clés SSH">Clés SSH</a>
        </p>
<div class="screen"><pre class="contents "><span class="cmd command">cp ~/.ssh/id_rsa.pub /tmp/$(whoami).pub</span>
</pre></div>
<p class="para">Passons sur l'utilisateur de git et importons la clé de l'administrateur dans gitolite.</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo su - git</span>
<span class="cmd command">gl-setup /tmp/*.pub</span>
</pre></div>
<p class="para">
        Gitolite will allow you to make initial changes to its configuration file during the setup process. You can now clone and modify the gitolite configuration repository from your administrator user (the user whose public SSH key you imported). Switch back to that user, then clone the configuration repository:
        </p>
<div class="screen"><pre class="contents "><span class="cmd command">sortie</span>
<span class="cmd command">git clone git@$IP_ADDRESS:gitolite-admin.git</span>
<span class="cmd command">cd gitolite-admin</span>
</pre></div>
<p class="para">L'administrateur gitolite contient deux sous-répertoires, « conf » et « keydir ». Les fichiers de configuration sont dans le répertoire conf, et le répertoire keydir contient la liste des clés publiques SSH utilisateur.</p>
</div></div>
</div></div>
<div class="sect2 sect" id="git-gitolite-management"><div class="inner">
<div class="hgroup"><h2 class="title">Gestion des utilisateurs et des dépôts gitolite</h2></div>
<div class="region"><div class="contents">
<p class="para">Adding new users to gitolite is simple: just obtain their public SSH key and add it to the keydir directory as $DESIRED_USER_NAME.pub. Note that the gitolite usernames don't have to match the system usernames - they are only used in the gitolite configuration file to manage access control. Similarly, users are deleted by deleting their public key file. After each change, do not forget to commit the changes to git, and push the changes back to the server with</p>
<div class="screen"><pre class="contents "><span class="cmd command">git commit -a</span>
<span class="cmd command">git push origin master</span>
</pre></div>
<p class="para">Les dépôts sont gerés en modifiant le fichier conf/gitolite.conf. La syntaxe est séparée par des espaces et spécifie simplement la liste des dépôts suivie par des règles d’accès. Ce qui suit est un exemple par défaut.</p>
<div class="code"><pre class="contents ">repo    gitolite-admin
        RW+     =   admin
        R       =   alice

repo    project1
        RW+     =   alice
        RW      =   bob
        R       =   denise
</pre></div>
</div></div>
</div></div>
<div class="sect2 sect" id="git-gitolite-usage"><div class="inner">
<div class="hgroup"><h2 class="title">Utilisation de votre serveur</h2></div>
<div class="region"><div class="contents">
<p class="para">To use the newly created server, users have to have the gitolite admin import their public key into the gitolite configuration repository, they can then access any project they have access to with the following command:</p>
<div class="screen"><pre class="contents "><span class="cmd command">git clone git@$IP_DU_SERVEUR:$NOM_DU_PROJET.git</span>
</pre></div>
<p class="para">Or add the server's project as a remote for an existing git repository:</p>
<div class="screen"><pre class="contents "><span class="cmd command">git remote add gitolite git@$IP_DU_SERVEUR:$NOM_DU_PROJET.git</span>
</pre></div>
</div></div>
</div></div>
</div>
<div class="links nextlinks">
<a class="nextlinks-prev" href="bazaar.html.fr" title="Bazaar">Précédent</a><a class="nextlinks-next" href="subversion.html.fr" title="Subversion">Suivant</a>
</div>
<div class="clear"></div>
</div>
<div id="pagebottom"></div>
</div></div>
</div>
<div id="footer">
<p style="padding-bottom: 0.4em">You can choose the <b>displayed language</b> by adding a language suffix to the web address
          so it ends with e.g. <tt>.html.en</tt> or <tt>.html.de</tt>.<br>
          If the web address has no language suffix, the preferred language specified in your web browser's settings is used. For your convenience:<br>
          [ <a title="English page version" href="#" onClick="englishPageVersion();">Change to English Language</a> | 
          <a title="Language selected by browser" href="#" onClick="browserPreferredLanguage()">Change to Browser's Preferred Language</a> ]</p>
<p>The material in this document is available under a free license, see <a href="../../legal.html">Legal</a> for details.<br>
          For information on contributing see the <a href="https://wiki.ubuntu.com/DocumentationTeam">Ubuntu Documentation Team wiki page</a>.
          To report errors in this serverguide documentation, <a href="https://bugs.launchpad.net/serverguide">file a bug report</a>.</p>
</div>
</div>
</body>
</html>
