<!DOCTYPE html>
<html lang=pt-BR>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>HTTPD - Servidor Web Apache2</title>
<link rel="stylesheet" type="text/css" href="pt_BR.css">
<script type="text/javascript" src="jquery.js"></script><script type="text/javascript" src="jquery.syntax.js"></script><script type="text/javascript" src="yelp.js"></script>
</head>
<body id="home">
<script src="https://ssl.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">
        _uacct = "UA-1018242-8";
        urchinTracker();
      </script><script>
      function englishPageVersion() {
        var href = window.location.href;
        if (href.slice(-1) == "/") {
                window.location = "index.html.en";
        } else {
                window.location = href.replace(/\.html.*/, ".html.en");
        }
         return false;
      }
      function browserPreferredLanguage() {
        var href = window.location.href;
        if (href.slice(-1) == "/") {
                window.location = href;
        } else {
                window.location = href.replace(/\.html.*/, ".html");
        }
        return false;
      }
      </script><div id="container">
<div id="container-inner">
<div id="mothership"><ul>
<li><a href="https://partners.ubuntu.com">Partners</a></li>
<li><a href="https://www.ubuntu.com/support/community-support">Support</a></li>
<li><a href="https://community.ubuntu.com">Community</a></li>
<li><a href="https://www.ubuntu.com">Ubuntu.com</a></li>
</ul></div>
<div id="header">
<h1 id="ubuntu-header"><a href="https://help.ubuntu.com/">Ubuntu Documentation</a></h1>
<ul id="main-menu">
<li><a class="main-menu-item current" href="../../">Official Documentation</a></li>
<li><a href="https://help.ubuntu.com/community/CommunityHelpWiki">Community Help Wiki</a></li>
<li><a href="https://community.ubuntu.com/t/contribute/26">Contribute</a></li>
</ul>
</div>
<div id="menu-search"><div id="search-box">
<noscript><form action="https://www.google.com/cse" id="cse-search-box"><div>
<input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq"><input type="hidden" name="ie" value="UTF-8"><input type="text" name="q" size="21"><input type="submit" name="sa" value="Search">
</div></form></noscript>
<script>
                document.write('<form action="../../search.html" id="cse-search-box">');
                document.write('  <div>');
                document.write('    <input type="hidden" name="cof" value="FORID:9">');
                document.write('    <input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq">');
                document.write('    <input type="hidden" name="ie" value="UTF-8">');
                document.write('    <input type="text" name="q" size="21">');
                document.write('    <input type="submit" name="sa" value="Search">');
                document.write('  </div>');
                document.write('</form>');
              </script>
</div></div>
<div class="trails"><div class="trail">
<a href="../../18.04" class="trail">Ubuntu 18.04</a> » <a class="trail" href="index.html.pt-BR" title="Guia para servidores Ubuntu">Guia para servidores Ubuntu</a> » <a class="trail" href="web-servers.html.pt-BR" title="Servidores Web">Servidores Web</a> » </div></div>
<div id="cwt-content" class="clearfix content-area"><div id="page">
<div id="content">
<div class="links nextlinks">
<a class="nextlinks-prev" href="web-servers.html.pt-BR" title="Servidores Web">Anterior</a><a class="nextlinks-next" href="php.html.pt-BR" title="PHP - Scripting Language">Próximo</a>
</div>
<div class="hgroup"><h1 class="title">HTTPD - Servidor Web Apache2</h1></div>
<div class="region">
<div class="contents">
<p class="para">Apache is the most commonly used Web server on Linux systems. Web servers are used
          to serve Web pages requested by client computers. Clients typically request and view
          Web pages using Web browser applications such as <span class="app application">Firefox</span>,
              <span class="app application">Opera</span>, <span class="app application">Chromium</span>,
              or <span class="app application">Internet Explorer</span>.</p>
<p class="para">Users enter a Uniform Resource Locator (URL) to point to a Web server by means of
          its Fully Qualified Domain Name (FQDN) and a path to the required resource. For example, to view the home page of
          the <a href="http://www.ubuntu.com" class="ulink" title="http://www.ubuntu.com">Ubuntu Web site</a> a user will enter only the FQDN:</p>
<div class="screen"><pre class="contents "><span class="input userinput">http://www.ubuntu-br.org/</span>
</pre></div>
<p class="para"> To view the <a href="http://www.ubuntu.com/community" class="ulink" title="http://www.ubuntu.com/community">community</a> sub-page, a user will enter the FQDN followed by a path:</p>
<div class="screen"><pre class="contents "><span class="input userinput">http://www.ubuntu-br.org/comunidade</span>
</pre></div>
<p class="para">O protocolo mais comum usado para transferir páginas de internet é o Hyper Text Transfer Protocol (HTTP - Protocolo de transferência de hipertexto). Protocolos como Hyper Text Transfer Protocol over Secure Sockets Layer (HTTPS - Protocolo seguro de transferência de hipertexto) e File Transfer Protocol (FTP - Protocolo de transferência de arquivo), um protocolo para enviar e receber arquivos, são também suportados.</p>
<p class="para">Servidores Web Apache são geralmente utilizados em conjunto com o motor de banco de dados <span class="app application">MySQL</span>, a linguagem de de construção de scripts pré-processadora de hiper-texto (<span class="app application">PHP</span>), e outras linguagens de construção de scripts populares como o <span class="app application">Python</span> e o <span class="app application">Perl</span>. Essa configuração é denominada LAMP (Linux, Apache, MySQL e Perl/Python/PHP) e dá forma a uma poderosa e robusta plataforma de desenvolvimento e hospedagem de aplicações basedas na web.</p>
</div>
<div class="links sectionlinks" role="navigation"><ul>
<li class="links"><a class="xref" href="httpd.html.pt-BR#http-installation" title="Instalação">Instalação</a></li>
<li class="links"><a class="xref" href="httpd.html.pt-BR#http-configuration" title="Configuração">Configuração</a></li>
<li class="links"><a class="xref" href="httpd.html.pt-BR#https-configuration" title="Configurações HTTPS">Configurações HTTPS</a></li>
<li class="links"><a class="xref" href="httpd.html.pt-BR#http-directory-permissions" title="Permissão de escrita do compartilhamento">Permissão de escrita do compartilhamento</a></li>
<li class="links"><a class="xref" href="httpd.html.pt-BR#http-references" title="Referências">Referências</a></li>
</ul></div>
<div class="sect2 sect" id="http-installation"><div class="inner">
<div class="hgroup"><h2 class="title">Instalação</h2></div>
<div class="region"><div class="contents">
<p class="para">O servidor web <span class="app application">Apache2</span> está disponível para Ubuntu Linux. Para instalá-lo:</p>
<div class="steps"><div class="inner"><ul class="steps"><li class="steps">
        <p class="para">Em um terminal digite o comando:</p>

<div class="screen"><pre class="contents "><span class="cmd command">sudo apt install apache2</span>
</pre></div>
             		 
      </li></ul></div></div>
</div></div>
</div></div>
<div class="sect2 sect" id="http-configuration"><div class="inner">
<div class="hgroup"><h2 class="title">Configuração</h2></div>
<div class="region">
<div class="contents">
<p class="para">O Apache2 é configurado inserindo-se <span class="em emphasis">diretivas</span> em arquivos de configuração em texto puro. Estas <span class="em emphasis">diretivas</span> estão distribuídas pelos seguintes diretórios:</p>
<div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
            <p class="para"><span class="em emphasis">apache2.conf:</span> o arquivo de configuração principal do Apache2. Contém configurações que são <span class="em emphasis">globais</span> para o Apache2.</p>
          </li>
<li class="list itemizedlist">
            <p class="para"><span class="em emphasis">httpd.conf:</span> historicamente o principal arquivo de configuração do  Apache2, nomeado depois do daemon <span class="app application">httpd</span>. Agora, o arquivo não existe. Em versões mais antigas do Ubuntu o arquivo pode estar presente, mas vazio, visto que todas as opções de configuração foram movidas para os diretórios referenciados abaixo.</p>
          </li>
<li class="list itemizedlist">
            <p class="para">
            <span class="em emphasis">conf-available:</span> this directory contains available configuration files. 
            All files that were previously in <span class="file filename">/etc/apache2/conf.d</span> 
            should be moved to <span class="file filename">/etc/apache2/conf-available</span>.
            </p>
          </li>
<li class="list itemizedlist">
            <p class="para">
            <span class="em emphasis">conf-enabled:</span> holds <span class="em emphasis">symlinks</span> to the files in 
            <span class="file filename">/etc/apache2/conf-available</span>.  When a configuration file is symlinked,
            it will be enabled the next time <span class="app application">apache2</span> is restarted.
            </p>
          </li>
<li class="list itemizedlist">
            <p class="para"><span class="em emphasis">envvars:</span> arquivo onde váriaveis de <span class="em emphasis">ambiente</span> do Apache2 são setadas.</p>
          </li>
<li class="list itemizedlist">
            <p class="para"><span class="em emphasis">mods-available:</span> este diretório contém arquivos de configuração tanto para carregar <span class="em emphasis">modules</span> quanto para configura-los. No entanto, nem todos os módulos terão arquivos de configuração específicos.</p>
          </li>
<li class="list itemizedlist">
            <p class="para"><span class="em emphasis">mods-enabled:</span> contém <span class="em emphasis">links simbólicos</span> para os arquivos em <span class="file filename">/etc/apache2/mods-available</span>. Quando um arquivo de configuração de módulo é linkado simbólicamente será ativado na próxima vez que o <span class="app application">apache2</span> for reiniciado.</p>
          </li>
<li class="list itemizedlist">
            <p class="para"><span class="em emphasis">ports.conf:</span> mantém as diretivas que determimam quais portas TCP o Apache2 estará escutando.</p>
          </li>
<li class="list itemizedlist">
            <p class="para"><span class="em emphasis">sites-available:</span> este diretório contém arquivos de configuração para o Apache2 <span class="em emphasis">Virtual Hosts</span>. Virtual Hosts permite o Apache2 ser configurado para múltiplos sites que têm configurações independentes.</p>
          </li>
<li class="list itemizedlist">
            <p class="para"><span class="em emphasis">sites-enabled:</span> como mods-enabled, <span class="file filename">sites-enabled</span> contém links simbólicos para o diretório <span class="file filename">/etc/apache2/sites-available</span>. Semelhantemente quando um arquivo de configuração em sites-available possuir links simbólicos, o site ali configurado estará ativo quando Apache2 for reiniciado.</p>
          </li>
<li class="list itemizedlist">
            <p class="para">
            <span class="em emphasis">magic:</span> instructions for determining MIME type based on the first few bytes of a file.
            </p>
          </li>
</ul></div>
<p class="para">Além disso, outros arquivos de configuração podem ser adicionados usando a diretiva <span class="em emphasis">Include</span>, e coringas podem ser usados para incluir vários arquivos de configuração. Qualquer diretiva pode ser colocada em qualquer um destes arquivos de configuração. Alterações nos principais arquivos de configuração somente são reconhecidas pelo Apache2 quando ele for iniciado ou reiniciado.</p>
<p class="para">
          The server also reads a file containing mime document types; the filename is set
          by the <span class="em emphasis">TypesConfig</span> directive, typically via
          <span class="file filename">/etc/apache2/mods-available/mime.conf</span>, which might also include additions
          and overrides, and is <span class="file filename">/etc/mime.types</span> by default.
          </p>
</div>
<div class="sect3 sect" id="http-basic-settings"><div class="inner">
<div class="hgroup"><h3 class="title">Configurações Básicas</h3></div>
<div class="region"><div class="contents">
<p class="para">
             This section explains Apache2 server essential configuration
             parameters. Refer to the <a href="http://httpd.apache.org/docs/2.4/" class="ulink" title="http://httpd.apache.org/docs/2.4/">Apache2
             Documentation</a> for more details.</p>
<div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
                 <p class="para">
                 Apache2 ships with a virtual-host-friendly default configuration.
	         That is, it is configured with a single default virtual host (using
		 the <span class="em emphasis">VirtualHost</span> directive) which can be modified or used as-is if you
		 have a single site, or used as a template for additional virtual hosts
		 if you have multiple sites.  If left alone, the default virtual host
		 will serve as your default site, or the site users will see if the
		 URL they enter does not match the <span class="em emphasis">ServerName</span> directive of any of your 
		 custom sites.  To modify the default virtual host, edit the file
		 <span class="file filename">/etc/apache2/sites-available/000-default.conf</span>.
                 </p>

                 <div class="note" title="Nota"><div class="inner"><div class="region"><div class="contents">
                   <p class="para">As diretivas para um host virtual somente são aplicadas para um host virtual em particular. Se a diretiva é configurada para escopo de servidor e não definida dentro das configurações de um virtual host, as configurações padrão serão usadas. Por exempĺo, você pode definir o e-mail do Webmaster e não definir um e-mail individual para cada virtual host.</p>
                 </div></div></div></div>

                 <p class="para">Se você deseja configurar um novo virtual host ou site, copie esse arquivo para o mesmo diretório com o nome que você escolher. Por exemplo:</p>

<div class="screen"><pre class="contents "><span class="cmd command">sudo cp /etc/apache2/sites-available/000-default.conf /etc/apache2/sites-available/mynewsite.conf</span>
</pre></div>

                 <p class="para">Edite o novo arquivo para configurar o novo site utilizando algumas das diretivas descritas abaixo.</p>

               </li>
<li class="list itemizedlist">
                 <p class="para">A diretiva <span class="em emphasis">ServerAdmin</span> especifica o endereço de e-mail a ser anunciado como do administrador do servidor. O valor padrão é webmaster@localhost. Ele deve ser alterado para um endereço de e-mail que seja entregue para você (caso você seja o administrador do servidor). Se seu website possuir um problema, o Apache2 mostrará uma mensagem de erro contendo este endereço de e-mail para qual o problema poderá ser relatado. Encontre esta diretiva no arquivo de configuração do site em /etc/apache2/sites-available.</p>
               </li>
<li class="list itemizedlist">
                 <p class="para">A diretiva <span class="em emphasis">Listen</span> especifica a porta, e opcionalmente o endereço IP, na qual o Apache2 irá escutar. Se o endereço IP não for especificado, o Apache2 irá escutar em todos os endereços IP designados para a máquina no qual ele esteja rodando. O valor padrão para a diretiva Listen é 80. Altere isso para 127.0.0.1:80 para fazer com que o Apache apenas escute apenas na sua interface de loopback, de forma que ele esteja disponível para a Internet, para (por exemplo) 81 para mudar a porta no qual ele escuta, ou deixe o valor como está para operação normal. Esta diretiva pode ser encontrada e alterada em seu próprio arquivo, <span class="file filename">/etc/apache2/ports.conf</span></p>
               </li>
<li class="list itemizedlist">
                 <p class="para">
	         The <span class="em emphasis">ServerName</span> directive is optional and specifies what FQDN your
		 site should answer to.  The default virtual host has no ServerName
		 directive specified, so it will respond to all requests that do not
		 match a ServerName directive in another virtual host.  If you have
		 just acquired the domain name ubunturocks.com and wish to host it on
		 your Ubuntu server, the value of the ServerName directive in your
		 virtual host configuration file should be ubunturocks.com.  Add this
		 directive to the new virtual host file you created earlier 
		 (<span class="file filename">/etc/apache2/sites-available/mynewsite.conf</span>).
		 </p>
			 
                 <p class="para">Você também pode desejar que o seu site responda para www.ubunturocks.com, uma vez que muitos utilizadores irão assumir que o prefixo www é apropriado. A diretiva <span class="em emphasis">ServerAlias</span> para isto. Você também pode utilizar curingas na diretiva ServerAlias.</p>

                 <p class="para">Por exemplo, a seguinte configuração fará com que seu site responda a qualquer pedido que termine no domínio <span class="em emphasis">.ubunturocks.com</span>.</p>                 

<div class="code"><pre class="contents ">ServerAlias *.ubunturocks.com
</pre></div>

               </li>
<li class="list itemizedlist">
                 <p class="para">
		 The <span class="em emphasis">DocumentRoot</span> directive specifies where Apache2 should look for the
		 files that make up the site.  The default value is /var/www/html, as specified in
		 <span class="file filename">/etc/apache2/sites-available/000-default.conf</span>. If desired, change this value
		 in your site's virtual host file, and remember to create that directory if necessary!
		 </p>
              </li>
</ul></div>
<p class="para">Habilite o novo <span class="em emphasis">VirtualHost</span> utilizando o utilitário <span class="app application">a2ensite</span>  e reinicie o Apache2:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo a2ensite novosite</span>
<span class="cmd command">sudo systemctl restart apache2.service</span>
</pre></div>
<div class="note" title="Nota"><div class="inner"><div class="region"><div class="contents">
              <p class="para">Certifique-se de substituir <span class="em emphasis">novosite</span> para um nome mais descritivo para o Host Virtual. Um método é o nome do arquivo após a diretiva <span class="em emphasis">ServerName</span> do Host Virtual.</p>
            </div></div></div></div>
<p class="para">Similarmente, utilize o utilitário <span class="app application">a2dissite</span> para desabilitar sites. Isto pode ser útil quando se está solucionando problemas de configuração de múltiplos Hosts Virtuais:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo a2dissite novosite</span>
<span class="cmd command">sudo systemctl restart apache2.service</span>
</pre></div>
</div></div>
</div></div>
<div class="sect3 sect" id="default-settings"><div class="inner">
<div class="hgroup"><h3 class="title">Configuração Padrão</h3></div>
<div class="region"><div class="contents">
<p class="para">Esta seção explica a configuração das definições padrão do servidor Apache2. Por exemplo, se você adicionar um host virtual, as definições que você configurar para o host virtual têm precedência para aquele host virtual. Para uma diretiva não definida dentro da definição de host virtual, o valor padrão é utilizado.</p>
<div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">

              <p class="para">O <span class="em emphasis">DirectoryIndex</span> é a página padrão servida pelo servidor quando o usuário requisita um índice de um diretório especificando uma barra (/) no final do nome do diretório.</p>

              <p class="para">Por exemplo, quando um usuário pede a página http://www.example.com/este_directorio/, ele ou ela vai receber a página especificada em DirectoryIndex se a mesma existir, uma lista de diretório gerada pelo servidor caso esta página não exista e se a opção Indexes for especificada, ou uma página de Permissão Negada page se nenhum dos casos for verdadeiro. O servidor vai tentar encontrar um dos arquivos listados na diretiva DirectoryIndex e vai retornar o primeiro localizado. Se nenhum destes arquivos for localizado e se <span class="em emphasis">Options Indexes</span> estiver configurado para aquele diretório, o servidor vai gerar uma lista em formato HTML dos subdiretórios e arquivos neste diretório. O valor padrão, encontrado em <span class="file filename">/etc/apache2/mods-available/dir.conf</span> é  "index.html index.cgi index.pl index.php index.xhtml index.htm". Assim, se o Apache2 encontrar um arquivo em um diretório requisitado que tenha qualquer um destes nomes, será mostrado.</p>
            </li>
<li class="list itemizedlist">

              <p class="para">
              The <span class="em emphasis">ErrorDocument</span> directive allows you to specify a file
       	      for Apache2 to use for specific error events.  For example,
	      if a user requests a resource that does not exist, a 404
	      error will occur. By default, Apache2 will simply return a HTTP 404 Return code.
              Read <span class="file filename">/etc/apache2/conf-available/localized-error-pages.conf</span> for detailed
              instructions for using ErrorDocument, including locations of example files.
              </p>
            </li>
<li class="list itemizedlist">
              <p class="para">
              By default, the server writes the transfer log to the file
              <span class="file filename">/var/log/apache2/access.log</span>. You can change this on a per-site
	      basis in your virtual host configuration files with the <span class="em emphasis">CustomLog</span>
              directive, or omit it to accept the default, specified in <span class="file filename">
	      /etc/apache2/conf-available/other-vhosts-access-log.conf</span>.  You may also specify the file
	      to which errors are logged, via the <span class="em emphasis">ErrorLog</span> directive, whose default
	      is <span class="file filename">/var/log/apache2/error.log</span>.  These are kept
	      separate from the transfer logs to aid in troubleshooting problems
	      with your Apache2 server.  You may also specify the <span class="em emphasis">LogLevel</span> (the
	      default value is "warn") and the <span class="em emphasis">LogFormat</span> (see <span class="file filename">
	      /etc/apache2/apache2.conf</span> for the default value).
	      </p>
            </li>
<li class="list itemizedlist">
              <p class="para">Algumas opções são especificadas em uma base por diretório, e não por servidor. <span class="em emphasis">Options</span> é uma dessas diretivas. Uma instância Directory está delimitado por tags semelhantes ao formato XML, assim:</p>

<div class="code"><pre class="contents ">&lt;Directory /var/www/html/mynewsite&gt;
...
&lt;/Directory&gt;
</pre></div>

	    <p class="para">A diretiva <span class="em emphasis">Options</span>, dentro de uma instância Directory, aceita um ou mais dos seguintes valores (dentre outros), separados por espaços:</p>

            <div class="list itemizedlist"><ul class="list itemizedlist compact">
<li class="list itemizedlist">
                <p class="para"><span class="em em-bold emphasis">ExecCGI</span> - Permite execução de scripts CGI. Scripts CGI não são executados se esta opção não estiver habilitada. <div class="note note-tip" title="Dica"><div class="inner"><div class="region"><div class="contents">
                  <p class="para">A maioria dos arquivos não devem ser executados como scripts CGI. Isto pode ser bastante perigoso. Scripts CGI devem ser mantidos em um diretório separado e fora de seu DocumentRoot, e somente este diretório deve ter a opção ExecCGI setada. Isto é o padrão, e a localização padrão para os scripts CGI é <span class="file filename">/usr/lib/cgi-bin</span>.</p>
                </div></div></div></div></p>
                </li>
<li class="list itemizedlist">
                  <p class="para">
                  <span class="em em-bold emphasis">Includes</span> - Allow server-side includes.
		  Server-side includes allow an HTML file to <span class="em emphasis">
		  include</span> other files. See
                  <a href="https://help.ubuntu.com/community/ServerSideIncludes" class="ulink" title="https://help.ubuntu.com/community/ServerSideIncludes">Apache SSI documentation
                  (Ubuntu community)</a> for more information.
                  </p>
                </li>
<li class="list itemizedlist">
                  <p class="para"><span class="em em-bold emphasis">IncludesNOEXEC</span> - Permite inclusão pelo lado do servidor, mas desabilita os comandos <span class="em emphasis">#exec</span> e <span class="em emphasis">#include</span> nos scripts CGI.</p>
                </li>
<li class="list itemizedlist">
                  <p class="para"><span class="em em-bold emphasis">Índices</span> - Exibe uma lista formatada dos conteúdos dos diretórios, se não houver <span class="em emphasis">Diretório índice</span> (como index.html) existe no diretório solicitado. <div class="note note-warning" title="Aviso"><div class="inner"><div class="region"><div class="contents">
                    <p class="para">Por motivos de segurança, isto geralmente não deveria estar habilitado, e certamente não deveria estar habilitado no seu diretório DocumentRoot. Habilite esta opção com cuidado, diretório por diretório somente se você tem certeza de que quer que os usuários vejam o conteúdo inteiro do diretório.</p>
                  </div></div></div></div></p>
                </li>
<li class="list itemizedlist">
                  <p class="para">
                  <span class="em em-bold emphasis">Multiview</span> - Support content-negotiated multiviews;
                  this option is disabled by default for security reasons.  See the <a href="http://httpd.apache.org/docs/2.4/mod/mod_negotiation.html#multiviews" class="ulink" title="http://httpd.apache.org/docs/2.4/mod/mod_negotiation.html#multiviews">Apache2
		  documentation on this option</a>.
                  </p>
                </li>
<li class="list itemizedlist">
                  <p class="para"><span class="em em-bold emphasis">SymLinksIfOwnerMatch</span> - Somente segue os links simbólicos caso o arquivo alvo ou diretório seja do mesmo dono que o link.</p>
                </li>
</ul></div>
            </li>
</ul></div>
</div></div>
</div></div>
<div class="sect3 sect" id="httpd-settings"><div class="inner">
<div class="hgroup"><h3 class="title">Configurações httpd</h3></div>
<div class="region"><div class="contents">
<p class="para">Esta seção explica algumas propriedades básicas da configuração de daemons <span class="app application">httpd</span>.</p>
<p class="para"><span class="em em-bold emphasis">LockFile</span> - A diretiva LockFile define o caminho do arquivo de trava usado quando o servidor é compilado tanto com USE_FCNTL_SERIALIZED_ACCEPT quanto com USE_FLOCK_SERIALIZED_ACCEPT. É obrigatório armazená-lo no disco local. Deixe o valor padrão a menos que o diretório de logs esteja localizando em um compartilhamento NFS. Se este for o caso, o valor padrão deverá ser alterado para um caminho no disco local e para um diretório no qual apenas o root tem permissões de leitura.</p>
<p class="para"><span class="em em-bold emphasis">PidFile</span> - A diretiva PidFile define o arquivo em que o servidor gravará o seu ID de processo (pid). Este arquivo deve ser permissões de leitura somente para o root. Na maioria dos casos, o valor padrão deve ser deixado.</p>
<p class="para"><span class="em em-bold emphasis">User</span> - A diretiva User configura o userid utilizado pelo servidor para responder requisições. Essa configuração determina o acesso do servidor. Qualquer arquivo inacessível para este usuários ficará também inacessível para os visitantes do website. O valor padrão para User é "www-data".</p>
<div class="note note-warning" title="Aviso"><div class="inner"><div class="region"><div class="contents">
            <p class="para">A não ser que você saiba exatamente o que está fazendo, não defina a diretiva User para root. Usando o root como User (usuário) você irá criar largas brechas de segurança para seu ser servidor Web.</p>
          </div></div></div></div>
<p class="para"><span class="em em-bold emphasis">Group</span> - A diretiva Group é similar à diretiva User. Group configura o grupo sob o qual o servidor responderá requisições. O grupo padrão é também "www-data".</p>
</div></div>
</div></div>
<div class="sect3 sect" id="apache-modules"><div class="inner">
<div class="hgroup"><h3 class="title">Módulos Apache2</h3></div>
<div class="region"><div class="contents">
<p class="para">Apache2 é um servidor modular. Isso significa que somente as funcionalidades mais básicas estão incluídas no núcleo do servidor. Características prolongadas estão disponíveis através de módulos que podem ser carregados no Apache2. Por padrão, um conjunto básico de módulos está incluído no servidor em tempo de compilação. Se o servidor é compilado para usar os módulos carregados dinamicamente, em seguida, os módulos podem ser compilados separadamente, e adicionados a qualquer momento usando a diretiva LoadModule. Caso contrário, O Apache2 deve ser recompilado para adicionar ou remover módulos.</p>
<p class="para">O Ubuntu compila o Apache2 de forma a permitir que o carregamento dinâmico de módulos. Diretivas de configuração podem ser condicionalmente incluídas na presença de algum módulo especial pela declaração  deles entre um <span class="em emphasis">&lt;IfModule&gt;</span> bloco.</p>
<p class="para">
          You can install additional Apache2 modules and use them
          with your Web server.  For example, run the following command at a 
          terminal prompt to install the <span class="em emphasis">MySQL Authentication</span> module:
          </p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo apt install libapache2-mod-auth-mysql</span>
</pre></div>
<p class="para">Veja o diretório <span class="file filename">/etc/apache2/mods-available</span>, para módulos adicionais.</p>
<p class="para">Use o utilitário <span class="app application">a2enmod</span> para habilitar um módulo:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo a2enmod auth_mysql</span>
<span class="cmd command">sudo systemctl restart apache2.service</span>
</pre></div>
<p class="para">Similarmente, <span class="app application">a2dismod</span> para desabilitar um módulo:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo a2dismod auth_mysql</span>
<span class="cmd command">sudo systemctl restart apache2.service</span>
</pre></div>
</div></div>
</div></div>
</div>
</div></div>
<div class="sect2 sect" id="https-configuration"><div class="inner">
<div class="hgroup"><h2 class="title">Configurações HTTPS</h2></div>
<div class="region"><div class="contents">
<p class="para">O módulo <span class="app application">mod_ssl</span> agrega uma característica importante ao servidor Apache2 - a habilidade de encriptar comunicações. Assim, quando seu navegador está comunicando usando SSL, usa-se o prefixo https:// no começo da URL na barra de navegação do navegador.</p>
<p class="para">
          The <span class="app application">mod_ssl</span> module is available in
          <span class="app application">apache2-common</span> package. Execute the following command at a terminal prompt to
          enable the <span class="app application">mod_ssl</span> module:
          </p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo a2enmod ssl</span>
</pre></div>
<p class="para">
          There is a default HTTPS configuration file in <span class="file filename">/etc/apache2/sites-available/default-ssl.conf</span>.
          In order for <span class="app application">Apache2</span> to provide HTTPS, 
          a <span class="em emphasis">certificate</span> and <span class="em emphasis">key</span> file are also needed.  The default HTTPS 
          configuration will use a certificate and key generated by the <span class="app application">ssl-cert</span> package.  They 
          are good for testing, but the auto-generated certificate and key should be replaced by a certificate specific
          to the site or server. For information on generating a key and obtaining a certificate see 
          <a class="xref" href="certificates-and-security.html.pt-BR" title="Certificados">Certificados</a>
          </p>
<p class="para">Para configurar o <span class="app application">Apache2</span> para HTTPS, informe o seguinte:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo a2ensite default-ssl</span>
</pre></div>
<div class="note" title="Nota"><div class="inner"><div class="region"><div class="contents">
              <p class="para">Os diretórios <span class="file filename">/etc/ssl/certs</span> e <span class="file filename">/etc/ssl/private</span> são caminhos padrão. Se você instalar o certificado e chave em outro diretório, certifique-se em alterar <span class="em emphasis">SSLCertificateFile</span> e <span class="em emphasis">SSLCertificateKeyFile</span> apropriadamente.</p>
            </div></div></div></div>
<p class="para">Com o Apache2 agora configurado para HTTPS, reinicie o serviço para habilitar as novas configurações:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo systemctl restart apache2.service</span>
</pre></div>
<div class="note" title="Nota"><div class="inner"><div class="region"><div class="contents">
              <p class="para">Dependendo de como você obteve o seu certificado, você pode precisar digitar uma senha quando <span class="app application"> O Apache2 iniciar </span>.</p>
            </div></div></div></div>
<p class="para">Você pode acessar as páginas seguras do servidor digitando https://your_hostname/url/ na barra de endereços do browser.</p>
</div></div>
</div></div>
<div class="sect2 sect" id="http-directory-permissions"><div class="inner">
<div class="hgroup"><h2 class="title">Permissão de escrita do compartilhamento</h2></div>
<div class="region"><div class="contents">
<p class="para">
          For more than one user to be able to write to the same directory it will
          be necessary to grant write permission to a group they share in common.  The
          following example grants shared write permission to <span class="file filename">/var/www/html</span>
          to the group "webmasters".
          </p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo chgrp -R webmasters /var/www/html</span>
<span class="cmd command">sudo find /var/www/html -type d -exec chmod g=rwxs "{}" \;</span>
<span class="cmd command">sudo find /var/www/html -type f -exec chmod g=rw  "{}" \;</span>
</pre></div>
<p class="para">
    These commands recursively set the group permission on all files and
    directories in /var/www/html to read write and set user id. This has the
    effect of having the files and directories inherit their group and permission
    from their parrent. Many admins find this useful for allowing multiple users
    to edit files in a directory tree.
</p>
<div class="note" title="Nota"><div class="inner"><div class="region"><div class="contents">
          <p class="para">Se acesso deve ser concedido para mais de um grupo por diretório, ative Listas de Controle de Acesso (Access Control Lists - ACLs).</p>
        </div></div></div></div>
</div></div>
</div></div>
<div class="sect2 sect" id="http-references"><div class="inner">
<div class="hgroup"><h2 class="title">Referências</h2></div>
<div class="region"><div class="contents"><div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
            <p class="para">
            <a href="http://httpd.apache.org/docs/2.4/" class="ulink" title="http://httpd.apache.org/docs/2.4/">Apache2 Documentation</a> contains in depth
            information on Apache2 configuration directives. Also, see the <span class="app application">apache2-doc</span> 
            package for the official Apache2 docs.
            </p>
          </li>
<li class="list itemizedlist">
            <p class="para">Veja o site <a href="http://www.modssl.org/docs/" class="ulink" title="http://www.modssl.org/docs/">Documentação Mod SSL</a> para mais informações relacionadas a SSL.</p>
          </li>
<li class="list itemizedlist">
            <p class="para">O'Reilly's <a href="http://oreilly.com/catalog/9780596001919/" class="ulink" title="http://oreilly.com/catalog/9780596001919/">Apache Cookbook</a> é um bom recurso para realizar configurações específicas no Apache2.</p>
          </li>
<li class="list itemizedlist">
            <p class="para">Para questões do Apache2 específicas ao Ubuntu, pergunte no canal de IRC <span class="em emphasis">#ubuntu-server</span> na <a href="http://freenode.net/" class="ulink" title="http://freenode.net/">freenode.net</a>.</p>
          </li>
<li class="list itemizedlist">
            <p class="para">Geralmente integrado com PHP e MySQL, a página <a href="https://help.ubuntu.com/community/ApacheMySQLPHP" class="ulink" title="https://help.ubuntu.com/community/ApacheMySQLPHP">Apache MySQL PHP Ubuntu Wiki </a> é uma boa referência.</p>
          </li>
</ul></div></div></div>
</div></div>
</div>
<div class="links nextlinks">
<a class="nextlinks-prev" href="web-servers.html.pt-BR" title="Servidores Web">Anterior</a><a class="nextlinks-next" href="php.html.pt-BR" title="PHP - Scripting Language">Próximo</a>
</div>
<div class="clear"></div>
</div>
<div id="pagebottom"></div>
</div></div>
</div>
<div id="footer">
<p style="padding-bottom: 0.4em">You can choose the <b>displayed language</b> by adding a language suffix to the web address
          so it ends with e.g. <tt>.html.en</tt> or <tt>.html.de</tt>.<br>
          If the web address has no language suffix, the preferred language specified in your web browser's settings is used. For your convenience:<br>
          [ <a title="English page version" href="#" onClick="englishPageVersion();">Change to English Language</a> | 
          <a title="Language selected by browser" href="#" onClick="browserPreferredLanguage()">Change to Browser's Preferred Language</a> ]</p>
<p>The material in this document is available under a free license, see <a href="../../legal.html">Legal</a> for details.<br>
          For information on contributing see the <a href="https://wiki.ubuntu.com/DocumentationTeam">Ubuntu Documentation Team wiki page</a>.
          To report errors in this serverguide documentation, <a href="https://bugs.launchpad.net/serverguide">file a bug report</a>.</p>
</div>
</div>
</body>
</html>
