<!DOCTYPE html>
<html lang=th>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Securing File and Print Server</title>
<link rel="stylesheet" type="text/css" href="th.css">
<script type="text/javascript" src="jquery.js"></script><script type="text/javascript" src="jquery.syntax.js"></script><script type="text/javascript" src="yelp.js"></script>
</head>
<body id="home">
<script src="https://ssl.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">
        _uacct = "UA-1018242-8";
        urchinTracker();
      </script><script>
      function englishPageVersion() {
        var href = window.location.href;
        if (href.slice(-1) == "/") {
                window.location = "index.html.en";
        } else {
                window.location = href.replace(/\.html.*/, ".html.en");
        }
         return false;
      }
      function browserPreferredLanguage() {
        var href = window.location.href;
        if (href.slice(-1) == "/") {
                window.location = href;
        } else {
                window.location = href.replace(/\.html.*/, ".html");
        }
        return false;
      }
      </script><div id="container">
<div id="container-inner">
<div id="mothership"><ul>
<li><a href="https://partners.ubuntu.com">Partners</a></li>
<li><a href="https://www.ubuntu.com/support/community-support">Support</a></li>
<li><a href="https://community.ubuntu.com">Community</a></li>
<li><a href="https://www.ubuntu.com">Ubuntu.com</a></li>
</ul></div>
<div id="header">
<h1 id="ubuntu-header"><a href="https://help.ubuntu.com/">Ubuntu Documentation</a></h1>
<ul id="main-menu">
<li><a class="main-menu-item current" href="../../">Official Documentation</a></li>
<li><a href="https://help.ubuntu.com/community/CommunityHelpWiki">Community Help Wiki</a></li>
<li><a href="https://community.ubuntu.com/t/contribute/26">Contribute</a></li>
</ul>
</div>
<div id="menu-search"><div id="search-box">
<noscript><form action="https://www.google.com/cse" id="cse-search-box"><div>
<input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq"><input type="hidden" name="ie" value="UTF-8"><input type="text" name="q" size="21"><input type="submit" name="sa" value="Search">
</div></form></noscript>
<script>
                document.write('<form action="../../search.html" id="cse-search-box">');
                document.write('  <div>');
                document.write('    <input type="hidden" name="cof" value="FORID:9">');
                document.write('    <input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq">');
                document.write('    <input type="hidden" name="ie" value="UTF-8">');
                document.write('    <input type="text" name="q" size="21">');
                document.write('    <input type="submit" name="sa" value="Search">');
                document.write('  </div>');
                document.write('</form>');
              </script>
</div></div>
<div class="trails"><div class="trail">
<a href="../../18.04" class="trail">Ubuntu 18.04</a> » <a class="trail" href="index.html.th" title="คู่มือ Ubuntu Server">คู่มือ Ubuntu Server</a> » <a class="trail" href="samba.html.th" title="Samba">Samba</a> » </div></div>
<div id="cwt-content" class="clearfix content-area"><div id="page">
<div id="content">
<div class="links nextlinks">
<a class="nextlinks-prev" href="samba-printserver.html.th" title="Print Server">ก่อนหน้า</a><a class="nextlinks-next" href="samba-dc.html.th" title="As a Domain Controller">ถัดไป</a>
</div>
<div class="hgroup"><h1 class="title">Securing File and Print Server</h1></div>
<div class="region">
<div class="contents"></div>
<div class="links sectionlinks" role="navigation"><ul>
<li class="links"><a class="xref" href="samba-fileprint-security.html.th#samba-security-mode" title="โหมดความปลอดภัยของแซมบ้า">โหมดความปลอดภัยของแซมบ้า</a></li>
<li class="links"><a class="xref" href="samba-fileprint-security.html.th#samba-user-security" title="ความปลอดภัยระดับ Security = User">ความปลอดภัยระดับ Security = User</a></li>
<li class="links"><a class="xref" href="samba-fileprint-security.html.th#samba-share-security" title="ระดับความปลอดภัยแบบแชร์">ระดับความปลอดภัยแบบแชร์</a></li>
<li class="links"><a class="xref" href="samba-fileprint-security.html.th#samba-apparmor" title="โปรไฟล์ AppArmor ของแซมบ้า">โปรไฟล์ AppArmor ของแซมบ้า</a></li>
<li class="links"><a class="xref" href="samba-fileprint-security.html.th#samba-security-resources" title="แหล่งข้อมูล">แหล่งข้อมูล</a></li>
</ul></div>
<div class="sect2 sect" id="samba-security-mode"><div class="inner">
<div class="hgroup"><h2 class="title">โหมดความปลอดภัยของแซมบ้า</h2></div>
<div class="region"><div class="contents">
<p class="para">โปรโตคอลเครือข่าย Common Internet Filesystem (CIFS) ได้ระบุระดับความปลอดภัยไว้สองระดับคือระดับผู้ใช้ (<span class="em emphasis">user-level</span>) และระดับแชร์ (<span class="em emphasis">share-level</span>)  แซมบ้ามีระบบความปลอดภัยที่ยืดหยุ่นกว่าที่เรียกว่าโหมดความปลอดภัย (<span class="em emphasis">security mode</span>) ที่มีถึง 4 วิธีในการรักษาความปลอดภัยสำหรับระดับผู้ใช้และอีก 1 วิธีสำหรับระดับแชร์:</p>
<div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
          <p class="para">
          <span class="em emphasis">security = user:</span> requires clients to supply a username and password to connect to shares. 
          Samba user accounts are separate from system accounts, but the <span class="app application">libpam-winbind</span> 
          package will sync system users and passwords with the Samba user database.
          </p>
        </li>
<li class="list itemizedlist">
          <p class="para"><span class="em emphasis">security = domain:</span> โหมดนี้ทำให้เซิร์ฟเวอร์แซมบ้าทำตัวเป็น Primary Domain Controller (PDC), Backup Domain Controller (BDC), หรือ Domain Member Server (DMS) สำหรับเครื่องลูกข่ายวินโดว์ได้  กรุณาดูรายละเอียดเพิ่มเติมที่ <a class="xref" href="samba-dc.html.th" title="As a Domain Controller">As a Domain Controller</a></p>
        </li>
<li class="list itemizedlist">
          <p class="para"><span class="em emphasis">security = ADS:</span> ทำให้เซิร์ฟเวอร์แซมบ้าเข้าร่วมกับโดเมน Active Directory ในฐานะสมาชิกของโดเมน  กรุณาดูรายละเอียดเพิ่มเติมที่ <a class="xref" href="samba-ad-integration.html.th" title="Active Directory Integration">Active Directory Integration</a></p>
        </li>
<li class="list itemizedlist">
          <p class="para"><span class="em emphasis">security = server:</span> โหมดนี้เป็นโหมดที่หลงเหลือก่อนที่แซมบ้าจะสามารถเป็นสมาชิกของโดเมนได้ และเนื่องจากปัญหาเกี่ยวกับความปลอดภัยเราไม่แนะนำให้คุณใช้โหมดนี้  กรุณาอ่านส่วน <a href="http://samba.org/samba/docs/man/Samba-HOWTO-Collection/ServerType.html#id349531" class="ulink" title="http://samba.org/samba/docs/man/Samba-HOWTO-Collection/ServerType.html#id349531">การรักษาความปลอดภัยของเซิร์ฟเวอร์</a>ในคู่มือแซมบ้าเพื่อดูรายละเอียดเพิ่มเติม</p>
        </li>
<li class="list itemizedlist">
          <p class="para"><span class="em emphasis">security = share:</span> อนุญาติให้เครื่องลูกข่ายเชื่อมต่อเข้าไปที่แชร์โดยไม่ต้องระบุชื่อผู้ใช้และรหัสผ่าน</p>
        </li>
</ul></div>
<p class="para">โหมดความปลอดภัยที่คุณเลือกขึ้นอยู่กับว่าคุณอยากให้เซิร์ฟเวอร์แซมบ้าของคุณทำอะไร</p>
</div></div>
</div></div>
<div class="sect2 sect" id="samba-user-security"><div class="inner">
<div class="hgroup"><h2 class="title">ความปลอดภัยระดับ Security = User</h2></div>
<div class="region"><div class="contents">
<p class="para">ส่วนนี้จะแสดงการตั้งค่าแซมบ้าต่อจาก <a class="xref" href="samba-fileserver.html.th" title="File Server">File Server</a> และ <a class="xref" href="samba-printserver.html.th" title="Print Server">Print Server</a> เพื่อให้มีการลงชื่อเข้าใช้แชร์</p>
<p class="para">
      First, install the <span class="app application">libpam-winbind</span> package which will sync the system users to the Samba
      user database:
      </p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo apt install libpam-winbind</span>
</pre></div>
<div class="note" title="หมายเหตุ"><div class="inner"><div class="region"><div class="contents">
        <p class="para">
        If you chose the <span class="em emphasis">Samba Server</span> task during installation <span class="app application">libpam-winbind</span>
        is already installed.
        </p>
      </div></div></div></div>
<p class="para">แก้ไขหมวด <span class="em emphasis">[share]</span> ในไฟล์ <span class="file filename">/etc/samba/smb.conf</span>:</p>
<div class="code"><pre class="contents ">    guest ok = no
</pre></div>
<p class="para">จากนั้นเริ่มโปรแกรมแซมบ้าใหม่เพื่อให้การตั้งค่าใหม่มีผลบังคับใช้:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo systemctl restart smbd.service nmbd.service</span>
</pre></div>
<p class="para">จากนี้ไปเมื่อคุณเชื่อมต่อเข้าใช้งานแฟ้มข้อมูลหรือเครื่องพิมพ์ที่แชร์ผ่านแซมบ้า คุณจะต้องระบุชื่อผู้ใช้และรหัสผ่าน</p>
<div class="note" title="หมายเหตุ"><div class="inner"><div class="region"><div class="contents">
        <p class="para">ถ้าคุณต้องการให้แฟ้มข้อมูลที่แชร์แสดงเป็นไดรฟ์ในวินโดว์ ให้เช็คเครื่องหมาย <span class="quote">“Reconnect at Logon”</span> ซึ่งจะบังคับให้คุณต้องใส่ชื่อผู้ใช้และรหัสผ่านแค่ครั้งเดียว อย่างน้อยก็จนกว่ารหัสผ่านจะเปลี่ยนแปลง</p>
      </div></div></div></div>
</div></div>
</div></div>
<div class="sect2 sect" id="samba-share-security"><div class="inner">
<div class="hgroup"><h2 class="title">ระดับความปลอดภัยแบบแชร์</h2></div>
<div class="region">
<div class="contents"><p class="para">มีหลายวิธีที่คุณสามารถใช้ได้เพื่อรักษาความปลอดภัยให้กับแต่ละแฟ้มข้อมูลที่ถูกแชร์  หมวดนี้จะแสดงตัวเลือกที่ใช้โดยทั่วไปโดยใช้ตัวอย่าง <span class="em emphasis">[share]</span> จากส่วนก่อนหน้า</p></div>
<div class="sect3 sect" id="windows-networking-groups"><div class="inner">
<div class="hgroup"><h3 class="title">กลุ่ม</h3></div>
<div class="region"><div class="contents">
<p class="para">กลุ่มเป็นตัวแทนของกลุ่มของเครื่องลูกข่ายหรือกลุ่มของผู้ใช้ในเครือข่ายที่สมาชิกในกลุ่มได้รับสิทธิ์เหมือนๆกันในการใช้งานทรัพยากรเครือข่าย และทำให้การกำหนดสิทธิ์ง่ายขึ้น  ยกตัวอย่างเช่น ถ้ามีกลุ่มชื่อ <span class="em emphasis">qa</span> ที่มีผู้ใช้ชื่อ <span class="em emphasis">freda</span>, <span class="em emphasis">danika</span>, และ <span class="em emphasis">rob</span> และอีกกลุ่มหนึ่งชื่อ <span class="em emphasis">support</span> ที่มีสมาชิกชื่อ <span class="em emphasis">danika</span>, <span class="em emphasis">jeremy</span>, และ <span class="em emphasis">vincent</span>  ทรัพยากรใดๆก็ตามที่กลุ่ม <span class="em emphasis">qa</span> สามารถใช้งานได้ก็หมายความว่าสมาชิกในกลุ่มคือ freda, danika, และ rob ก็สามารถใช้งานได้เช่นกัน แต่ jeremy และ vincent จะไม่สามารถใช้งานได้เพราะไม่ใช่สมาชิกในกลุ่ม  และเนื่องจากว่า <span class="em emphasis">danika</span> เป็นสมาชิกของทั้งกลุ่ม <span class="em emphasis">qa</span> และ <span class="em emphasis">support</span> เธอจึงสามารถใช้ทรัพยากรของทั้งสองกลุ่มได้ ต่างจากคนอื่นๆที่อยู่ในกลุ่มๆเดียวและสามารถใช้งานเฉพาะทรัพยากรที่กลุ่มนั้นๆได้รับอนุญาติ</p>
<p class="para">โดยปกติแซมบ้าจะหากลุ่มผู้ใช้ในระบบจากไฟล์ <span class="file filename">/etc/group</span> เพื่อดูว่าผู้ใช้เป็นสมาชิกของกลุ่มไหน  สำหรับข้อมูลเพิ่มเติมเกี่ยวกับการเพิ่งหรือลบผู้ใช้ออกจากกลุ่มลองดูที่ <a class="xref" href="user-management.html.th#adding-deleting-users" title="Adding and Deleting Users">Adding and Deleting Users</a></p>
<p class="para">เมื่อคุณสร้างกลุ่มในไฟล์การตั้งค่าของแซมบ้าที่ <span class="file filename">/etc/samba/smb.conf</span> คุณต้องเริ่มต้นชื่อกลุ่มด้วยเครื่องหมาย "@"  เช่นถ้าคุณต้องการสร้างกลุ่มชื่อ <span class="em emphasis">sysadmin</span> ในหมวดใดๆของไฟล์ <span class="file filename">/etc/samba/smb.conf</span> คุณต้องใส่ชื่อกลุ่มเป็น <span class="em em-bold emphasis">@sysadmin</span></p>
</div></div>
</div></div>
<div class="sect3 sect" id="samba-file-permissions"><div class="inner">
<div class="hgroup"><h3 class="title">สิทธิ์ของไฟล์</h3></div>
<div class="region"><div class="contents">
<p class="para">สิทธิ์ของไฟล์เป็นตัวกำหนดว่าเครื่องคอมพิวเตอร์หรือผู้ใช้มีสิทธิ์ในการทำอะไรกับแฟ้มข้อมูล ไฟล์ หรือกลุ่มของไฟล์ได้บ้าง  คุณสามารถกำหนดสิทธิ์เหล่านี้โดยแก้ไฟล์ <span class="file filename">/etc/samba/smb.conf</span> และระบุสิทธิ์ต่างๆสำหรับแต่ละแชร์</p>
<p class="para">ยกตัวอย่างเช่น ถ้าคุณสร้างแชร์ในแซมบ้าชื่อ <span class="em emphasis">share</span> และต้องการให้สิทธิ์ <span class="em emphasis">read-only</span> หรือให้เฉพาะสิทธิ์การอ่านกับกลุ่มของผู้ใช้ชื่อ <span class="em emphasis">qa</span> แต่ต้องการให้สิทธิ์การอ่านและเขียนกับกลุ่มของผู้ใช้ที่ชื่อ <span class="em emphasis">sysadmin</span> และผู้ใช้ที่ชื่อ <span class="em emphasis">vincent</span> คุณต้องแก้ไขไฟล์ <span class="file filename">/etc/samba/smb.conf</span> และตั้งค่าเหล่านี้ภายใต้หมวด <span class="em emphasis">[share]</span>:</p>
<div class="code"><pre class="contents ">    read list = @qa
    write list = @sysadmin, vincent
</pre></div>
<p class="para">สิทธิ์อีกแบบนึงที่คุณสามารถใช้ได้คือ <span class="em emphasis">administrative</span>หรือสิทธิ์ของผู้ดูแล ซึ่งหมายความว่าใครก็ตามที่ได้สิทธิ์นี้จะสามารถอ่าน เขียน แก้ไขข้อมูลใดๆก็ตามที่อยู่ในแชร์นั้นๆ</p>
<p class="para">ยกตัวอย่างเช่น ถ้าคุณต้องการให้สิทธิ์ผู้ดูแลกับ <span class="em emphasis">melissa</span> สำหรับแชร์ในตัวอย่าง <span class="em emphasis">share</span> ก่อนหน้านี้ คุณต้องแก้ไขไฟล์ <span class="file filename">/etc/samba/smb.conf</span> และเพิ่มบรรทัดต่อไปนี้ภายใต้หมวด <span class="em emphasis">[share]</span>:</p>
<div class="code"><pre class="contents ">    admin users = melissa
</pre></div>
<p class="para">หลังจากแก้ไขไฟล์ <span class="file filename">/etc/samba/smb.conf</span> แล้วให้เริ่มโปรแกรมแซมบ้าใหม่เพื่อให้ข้อเปลี่ยนแปลงมีผลบังคับใช้:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo systemctl restart smbd.service nmbd.service</span>
</pre></div>
<div class="note" title="หมายเหตุ"><div class="inner"><div class="region"><div class="contents">
          <p class="para">การตั้งค่า <span class="em emphasis">read list</span> และ <span class="em emphasis">write list</span> นั้นจะมีผลก็ต่อเมื่อโหมดรักษาความปลอดภัยของแซมบ้า<span class="em emphasis">ไม่ใช่</span> <span class="em emphasis">security = share</span> เท่านั้น</p>
        </div></div></div></div>
<p class="para">หลังจากคุณตั้งค่าสิทธิ์ต่างๆในแซมบ้าแล้ว คุณต้องไปแก้ไขสิทธิ์ในระบบไฟล์ของอูบุนตูด้วย</p>
<p class="para">สิทธิ์ของไฟล์ในลีนุกซ์นั้นไม่คล้ายกับสิทธิ์แบบ Access Control Lists (ACLs) ของวินโดว์ซักเท่าไรนัก แต่โชคดีที่อูบุนตูเซิร์ฟเวอร์ก็มี POSIX ACLs  ซึ่งเพิ่มความสามารถในการปรับตั้งค่าสิทธิ์แบบละเอียดขึ้น  ยกตัวอย่างเช่น ถ้าคุณต้องการใช้งาน ACLs  กับ <span class="file filename">/srv</span> ซึ่งเป็นระบบไฟล์แบบ EXT3 ให้เพิ่มตัวเลือก <span class="em emphasis">acl</span> ในไฟล์ <span class="file filename">/etc/fstab</span> ดังนี้:</p>
<div class="code"><pre class="contents ">UUID=66bcdd2e-8861-4fb0-b7e4-e61c569fe17d /srv  ext3    noatime,relatime,acl 0       1
</pre></div>
<p class="para">จากนั้นก็ mount พาร์ติชั่นใหม่โดยพิมพ์คำสั่ง:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo mount -v -o remount /srv</span>
</pre></div>
<div class="note" title="หมายเหตุ"><div class="inner"><div class="region"><div class="contents">
          <p class="para">ตัวอย่างด้านบนนั้นสมมุติว่า <span class="file filename">/srv</span> อยู่บนพาร์ติชั่นอีกพาร์ติชั่นนึง  ถ้า <span class="file filename">/srv</span> หรือที่ใดก็ตามที่คุณใช้เป็นแชร์เป็นส่วนหนึ่งของพาร์ติชั่น <span class="file filename">/</span> คุณอาจจะต้องบูตเครื่องของคุณหลังแก้ไขค่า</p>
        </div></div></div></div>
<p class="para">เพื่อให้สิทธิ์ของไฟล์ตรงกับสิทธิ์ของแชร์ที่เราได้ตั้งค่าไว้ด้านบน เราจะให้สิทธิ์การอ่าน เขียน และรันโปรแกรมใน <span class="file filename">/srv/samba/share</span> กับกลุ่มผู้ใช้ <span class="em emphasis">sysadmin</span> และให้เฉพาะสิทธิ์อ่านและรันโปรแกรมกับกลุ่ม <span class="em emphasis">qa</span> และผู้ใช้ชื่อ <span class="em emphasis">melissa</span> จะเป็นเจ้าของไฟล์ทั้งหมดที่อยู่ในแชร์นี้  ให้พิมพ์คำสั่งดังนี้:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo chown -R melissa /srv/samba/share/</span>
<span class="cmd command">sudo chgrp -R sysadmin /srv/samba/share/</span>
<span class="cmd command">sudo setfacl -R -m g:qa:rx /srv/samba/share/</span>
</pre></div>
<div class="note" title="หมายเหตุ"><div class="inner"><div class="region"><div class="contents">
          <p class="para">คำสั่ง <span class="app application">setfacl</span> ด้านบนนั้นให้สิทธิ์ <span class="em emphasis">execute</span> (สิทธิ์ในการรันโปรแกรมจากไฟล์) กับทุกไฟล์ในแฟ้มข้อมูล <span class="file filename">/srv/samba/share</span> ซึ่งอาจเป็นสิ่งที่คุณต้องการหรือไม่ต้องการ</p>
        </div></div></div></div>
<p class="para">ตอนนี้ถ้าคุณลองใช้งานแชร์จากเครื่องลูกข่ายวินโดว์คุณจะสั่งเกตุเห็นว่าสิทธิ์ใหม่ได้มีผลบังคับใช้แล้ว  ถ้าคุณต้องการข้อมูลเพิ่มเติมเกี่ยวกับ POSIX ACLs กรุณาอ่านคู่มือ (man pages) ของ <span class="app application">acl</span> และ <span class="app application">setfacl</span></p>
</div></div>
</div></div>
</div>
</div></div>
<div class="sect2 sect" id="samba-apparmor"><div class="inner">
<div class="hgroup"><h2 class="title">โปรไฟล์ AppArmor ของแซมบ้า</h2></div>
<div class="region"><div class="contents">
<p class="para">อูบุนตูมาพร้อมกับโมดูลรักษาความปลอดภัยที่เรียกว่า <span class="app application">AppArmor</span> ซึ่งบังคับให้มีการกำหนดขอบเขตและสิทธิ์ที่โปรแกรมต่างๆสามารถมีได้  คุณสามารถปรับแต่งโปรไฟล์ AppArmor ของอูบุนตูที่มาพร้อมกับตอนติดตั้งให้เหมาะกับความต้องการของคุณได้  สำหรับรายละเอียดเพิ่มเติมกรุณาดู <a class="xref" href="apparmor.html.th" title="AppArmor">AppArmor</a></p>
<p class="para">แพคเกจ <span class="app application">apparmor-profiles</span> จะทำการสร้างโปรไฟล์ AppArmor สำหรับโปรแกรมของแซมบ้าสองตัวคือ <span class="file filename">/usr/sbin/smbd</span> และ <span class="file filename">/usr/sbin/nmbd</span> ซึ่งเป็นโปรแกรมแซมบ้าที่ทำงานอยู่เบื้องหลัง (daemon)  คุณสามารถติดตั้งแพคเกจนี้ได้โดยพิมพ์คำสั่ง:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo apt install apparmor-profiles apparmor-utils</span>
</pre></div>
<div class="note" title="หมายเหตุ"><div class="inner"><div class="region"><div class="contents">
        <p class="para">แพคเกจนี้ยังมีโปรไฟล์สำหรับโปรแกรมอื่นๆอีกด้วย</p>
      </div></div></div></div>
<p class="para">ค่าเริ่มต้นของโปรไฟล์สำหรับ <span class="app application">smbd</span> และ <span class="app application">nmbd</span> จะอยู่ในโหมด <span class="em emphasis">complain</span> ซึ่งอนุญาติให้แซมบ้าทำงานโดยห้ามแก้ไขโปรไฟล์และจะเก็บบันทึกของข้อผิดพลาดต่างๆที่เกิดขึ้นเท่านั้น  ถ้าคุณต้องการให้โปรไฟล์สำหรับ <span class="app application">smbd</span> อยู่ในโหมด <span class="em emphasis">enforce</span> คุณจะต้องแก้ไขโปรไฟล์และระบุแฟ้มข้อมูลใดๆก็ตามที่ถูกแชร์เพื่อให้แซมบ้าทำงานได้เป็นปกติ</p>
<p class="para">แก้ไขไฟล์ <span class="file filename">/etc/apparmor.d/usr.sbin.smbd</span> และเพิ่มข้อมูลเกี่ยวกับ <span class="em emphasis">[share]</span> (จากตัวอย่างด้านบน):</p>
<div class="code"><pre class="contents ">  /srv/samba/share/ r,
  /srv/samba/share/** rwkix,
</pre></div>
<p class="para">จากนั้นคุณต้องโหลดโปรไฟล์ใหม่ในโหมด <span class="em emphasis">enforce</span> โดยพิมพ์คำสั่ง:</p>
<div class="screen"><pre class="contents "><span class="cmd command">sudo aa-enforce /usr/sbin/smbd</span>
<span class="cmd command">cat /etc/apparmor.d/usr.sbin.smbd | sudo apparmor_parser -r</span>
</pre></div>
<p class="para">
      You should now be able to read, write, and execute files in the shared directory as normal, and the
      <span class="app application">smbd</span> binary will have access to only the configured files and directories.  
      Be sure to add entries for each directory you configure Samba to share.  Also, any errors will be logged
      to <span class="file filename">/var/log/syslog</span>.  
      </p>
</div></div>
</div></div>
<div class="sect2 sect" id="samba-security-resources"><div class="inner">
<div class="hgroup"><h2 class="title">แหล่งข้อมูล</h2></div>
<div class="region"><div class="contents"><div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
          <p class="para">สำหรับการตั้งค่าแซมบ้าขั้นสูง กรุณาดูที่ <a href="http://samba.org/samba/docs/man/Samba-HOWTO-Collection/" class="ulink" title="http://samba.org/samba/docs/man/Samba-HOWTO-Collection/">Samba HOWTO Collection</a></p>
        </li>
<li class="list itemizedlist">
          <p class="para">คุณสามารถอ่านคู่มือนี้<a href="http://www.amazon.com/exec/obidos/tg/detail/-/0131882228" class="ulink" title="http://www.amazon.com/exec/obidos/tg/detail/-/0131882228">ในแบบหนังสือ</a>ได้</p>
        </li>
<li class="list itemizedlist">
          <p class="para">หนังสือ <a href="http://www.oreilly.com/catalog/9780596007690/" class="ulink" title="http://www.oreilly.com/catalog/9780596007690/">Using Samba</a> จากสำนักพิพม์ O'Reilly ก็เป็นแหล่งอ้างอิงที่ดี</p>
        </li>
<li class="list itemizedlist">
          <p class="para"><a href="http://samba.org/samba/docs/man/Samba-HOWTO-Collection/securing-samba.html" class="ulink" title="http://samba.org/samba/docs/man/Samba-HOWTO-Collection/securing-samba.html">บทที่ 18</a> ของ  Samba HOWTO Collection ทั้งบทอธิบายเกี่ยวกับการรักษาความปลอดภัย</p>
        </li>
<li class="list itemizedlist">
          <p class="para">สำหรับข้อมูลเพิ่มเติมเกี่ยวกับแซมบ้าและ ACLs กรุณาอ่าน <a href="http://samba.org/samba/docs/man/Samba-HOWTO-Collection/AccessControls.html#id397568" class="ulink" title="http://samba.org/samba/docs/man/Samba-HOWTO-Collection/AccessControls.html#id397568">หน้า ACLs ของแซมบ้า </a>.</p>
        </li>
<li class="list itemizedlist">
          <p class="para">
          The <a href="https://help.ubuntu.com/community/Samba" class="ulink" title="https://help.ubuntu.com/community/Samba">Ubuntu Wiki Samba </a> page.
          </p>
        </li>
</ul></div></div></div>
</div></div>
</div>
<div class="links nextlinks">
<a class="nextlinks-prev" href="samba-printserver.html.th" title="Print Server">ก่อนหน้า</a><a class="nextlinks-next" href="samba-dc.html.th" title="As a Domain Controller">ถัดไป</a>
</div>
<div class="clear"></div>
</div>
<div id="pagebottom"></div>
</div></div>
</div>
<div id="footer">
<p style="padding-bottom: 0.4em">You can choose the <b>displayed language</b> by adding a language suffix to the web address
          so it ends with e.g. <tt>.html.en</tt> or <tt>.html.de</tt>.<br>
          If the web address has no language suffix, the preferred language specified in your web browser's settings is used. For your convenience:<br>
          [ <a title="English page version" href="#" onClick="englishPageVersion();">Change to English Language</a> | 
          <a title="Language selected by browser" href="#" onClick="browserPreferredLanguage()">Change to Browser's Preferred Language</a> ]</p>
<p>The material in this document is available under a free license, see <a href="../../legal.html">Legal</a> for details.<br>
          For information on contributing see the <a href="https://wiki.ubuntu.com/DocumentationTeam">Ubuntu Documentation Team wiki page</a>.
          To report errors in this serverguide documentation, <a href="https://bugs.launchpad.net/serverguide">file a bug report</a>.</p>
</div>
</div>
</body>
</html>
